/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={1469:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>ChatbotContextProvider,o:()=>useChatbotContext});var _neko_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8135),_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6966),_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1137),_app_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7678);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var _excluded=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==_typeof(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function asyncGeneratorStep(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,r,a,i,l,"next",e)}function l(e){asyncGeneratorStep(o,r,a,i,l,"throw",e)}i(void 0)}))}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var _wp$element=wp.element,useContext=_wp$element.useContext,createContext=_wp$element.createContext,useState=_wp$element.useState,useMemo=_wp$element.useMemo,useEffect=_wp$element.useEffect,useCallback=_wp$element.useCallback,useRef=_wp$element.useRef,rawAiName="AI: ",rawUserName="User: ",ChatbotContext=createContext(),useChatbotContext=function(){var e=useContext(ChatbotContext);if(!e)throw new Error("useChatbotContext must be used within a ChatbotContextProvider");return e},ChatbotContextProvider=function ChatbotContextProvider(_ref){var _system$typewriter,_system$speech_recogn,_system$speech_synthe,_params$startSentence,_params$startSentence2,children=_ref.children,rest=_objectWithoutProperties(_ref,_excluded),params=rest.params,system=rest.system,theme=rest.theme,atts=rest.atts,_useChrono=(0,_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__.dh)(),timeElapsed=_useChrono.timeElapsed,startChrono=_useChrono.startChrono,stopChrono=_useChrono.stopChrono,shortcodeStyles=useMemo((function(){return(null==theme?void 0:theme.settings)||{}}),[theme]),_useState=useState(system.restNonce),_useState2=_slicedToArray(_useState,2),restNonce=_useState2[0],setRestNonce=_useState2[1],_useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1],_useState5=useState([]),_useState6=_slicedToArray(_useState5,2),shortcuts=_useState6[0],setShortcuts=_useState6[1],_useState7=useState([]),_useState8=_slicedToArray(_useState7,2),blocks=_useState8[0],setBlocks=_useState8[1],_useState9=useState(!1),_useState10=_slicedToArray(_useState9,2),locked=_useState10[0],setLocked=_useState10[1],_useState11=useState((0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)()),_useState12=_slicedToArray(_useState11,2),chatId=_useState12[0],setChatId=_useState12[1],_useState13=useState(""),_useState14=_slicedToArray(_useState13,2),inputText=_useState14[0],setInputText=_useState14[1],_useState15=useState(!1),_useState16=_slicedToArray(_useState15,2),chatbotTriggered=_useState16[0],setChatbotTriggered=_useState16[1],_useState17=useState(!1),_useState18=_slicedToArray(_useState17,2),showIconMessage=_useState18[0],setShowIconMessage=_useState18[1],_useState19=useState({localFile:null,uploadedId:null,uploadedUrl:null,uploadProgress:null}),_useState20=_slicedToArray(_useState19,2),uploadedFile=_useState20[0],setUploadedFile=_useState20[1],_useState21=useState(!0),_useState22=_slicedToArray(_useState21,2),windowed=_useState22[0],setWindowed=_useState22[1],_useState23=useState(!1),_useState24=_slicedToArray(_useState23,2),open=_useState24[0],setOpen=_useState24[1],_useState25=useState(null),_useState26=_slicedToArray(_useState25,2),error=_useState26[0],setError=_useState26[1],_useState27=useState(!1),_useState28=_slicedToArray(_useState27,2),busy=_useState28[0],setBusy=_useState28[1],_useState29=useState(!1),_useState30=_slicedToArray(_useState29,2),busyNonce=_useState30[0],setBusyNonce=_useState30[1],_useState31=useState(),_useState32=_slicedToArray(_useState31,2),serverReply=_useState32[0],setServerReply=_useState32[1],chatbotInputRef=useRef(),conversationRef=useRef(),hasFocusRef=useRef(!1),_useSpeechRecognition=(0,_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__.Vw)((function(e){setInputText(e)})),isListening=_useSpeechRecognition.isListening,setIsListening=_useSpeechRecognition.setIsListening,speechRecognitionAvailable=_useSpeechRecognition.speechRecognitionAvailable,stream=system.stream||!1,internalId=useMemo((function(){return(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)()}),[]),botId=system.botId,customId=system.customId,userData=system.userData,sessionId=system.sessionId,contextId=system.contextId,pluginUrl=system.pluginUrl,restUrl=system.restUrl,debugMode=system.debugMode,virtualKeyboardFix=system.virtual_keyboard_fix,typewriter=null!==(_system$typewriter=null==system?void 0:system.typewriter)&&void 0!==_system$typewriter&&_system$typewriter,speechRecognition=null!==(_system$speech_recogn=null==system?void 0:system.speech_recognition)&&void 0!==_system$speech_recogn&&_system$speech_recogn,speechSynthesis=null!==(_system$speech_synthe=null==system?void 0:system.speech_synthesis)&&void 0!==_system$speech_synthe&&_system$speech_synthe,startSentence=(0,_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__.Mc)(null!==(_params$startSentence=null===(_params$startSentence2=params.startSentence)||void 0===_params$startSentence2?void 0:_params$startSentence2.trim())&&void 0!==_params$startSentence?_params$startSentence:"",userData),initialActions=system.actions||[],initialShortcuts=system.shortcuts||[],initialBlocks=system.blocks||[],isMobile=document.innerWidth<=768,processedParams=(0,_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__._$)(params,userData),aiName=processedParams.aiName,userName=processedParams.userName,guestName=processedParams.guestName,aiAvatar=processedParams.aiAvatar,userAvatar=processedParams.userAvatar,guestAvatar=processedParams.guestAvatar,textSend=processedParams.textSend,textClear=processedParams.textClear,textInputMaxLength=processedParams.textInputMaxLength,textInputPlaceholder=processedParams.textInputPlaceholder,textCompliance=processedParams.textCompliance,isWindow=processedParams.window,copyButton=processedParams.copyButton,headerSubtitle=processedParams.headerSubtitle,fullscreen=processedParams.fullscreen,localMemoryParam=processedParams.localMemory,icon=processedParams.icon,iconText=processedParams.iconText,iconTextDelay=processedParams.iconTextDelay,iconAlt=processedParams.iconAlt,iconPosition=processedParams.iconPosition,iconBubble=processedParams.iconBubble,imageUpload=processedParams.imageUpload,fileUpload=processedParams.fileUpload,fileSearch=processedParams.fileSearch,isRealtime="realtime"===processedParams.mode,localMemory=localMemoryParam&&(!!customId||!!botId),localStorageKey=localMemory?"mwai-chat-".concat(customId||botId):null,_useMemo=useMemo((function(){var e=function(e){return e?(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Ve)(e)||(0,_app_chatbot_helpers__WEBPACK_IMPORTED_MODULE_0__.mv)(e)?e:"".concat(pluginUrl,"/images/").concat(e):null},t=icon?e(icon):"".concat(pluginUrl,"/images/chat-traditional-1.svg"),n=e(processedParams.aiAvatarUrl),r=e(processedParams.userAvatarUrl),a=e(processedParams.guestAvatarUrl);return{cssVariables:Object.keys(shortcodeStyles).reduce((function(e,t){return e["--mwai-".concat(t)]=shortcodeStyles[t],e}),{}),iconUrl:t,aiAvatarUrl:n,userAvatarUrl:r,guestAvatarUrl:a}}),[icon,pluginUrl,shortcodeStyles,processedParams]),cssVariables=_useMemo.cssVariables,iconUrl=_useMemo.iconUrl,aiAvatarUrl=_useMemo.aiAvatarUrl,userAvatarUrl=_useMemo.userAvatarUrl,guestAvatarUrl=_useMemo.guestAvatarUrl,_useState33=useState(!1),_useState34=_slicedToArray(_useState33,2),draggingType=_useState34[0],setDraggingType=_useState34[1],_useState35=useState(!1),_useState36=_slicedToArray(_useState35,2),isBlocked=_useState36[0],setIsBlocked=_useState36[1],uploadIconPosition=useMemo((function(){return"timeless"===(null==theme?void 0:theme.themeId)?"mwai-tools":"mwai-input"}),[null==theme?void 0:theme.themeId]),submitButtonConf=useMemo((function(){return{text:textSend,textSend,textClear,imageSend:"timeless"===(null==theme?void 0:theme.themeId)?pluginUrl+"/images/action-submit-blue.svg":null,imageClear:"timeless"===(null==theme?void 0:theme.themeId)?pluginUrl+"/images/action-clear-blue.svg":null}}),[pluginUrl,textClear,textSend,null==theme?void 0:theme.themeId]),resetMessages=function(){if(resetUploadedFile(),startSentence){var e=[{id:(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)(),role:"assistant",content:startSentence,who:rawAiName,timestamp:(new Date).getTime()}];setMessages(e)}else setMessages([])},refreshRestNonce=useCallback(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],e.prev=1,t||!restNonce){e.next=4;break}return e.abrupt("return",restNonce);case 4:return setBusyNonce(!0),e.next=7,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai/v1/start_session"));case 7:return n=e.sent,e.next=10,n.json();case 10:return r=e.sent,setRestNonce(r.restNonce),e.abrupt("return",r.restNonce);case 15:e.prev=15,e.t0=e.catch(1),console.error("Error while fetching the restNonce.",e.t0);case 18:return e.prev=18,setBusyNonce(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])}))),[restNonce,setRestNonce,restUrl]);useEffect((function(){initialActions.length>0&&handleActions(initialActions),initialShortcuts.length>0&&handleShortcuts(initialShortcuts),initialBlocks.length>0&&handleBlocks(initialBlocks)}),[]),useEffect((function(){chatbotTriggered&&!restNonce&&refreshRestNonce()}),[chatbotTriggered]),useEffect((function(){inputText.length>0&&!chatbotTriggered&&setChatbotTriggered(!0)}),[chatbotTriggered,inputText]),useEffect((function(){resetMessages()}),[startSentence]),useEffect((function(){if(customId||botId){var e=_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.HX.chatbots.findIndex((function(e){return e.internalId===internalId})),t={internalId,botId,chatId,customId,open:function(){setTasks((function(e){return[].concat(_toConsumableArray(e),[{action:"open"}])}))},close:function(){setTasks((function(e){return[].concat(_toConsumableArray(e),[{action:"close"}])}))},clear:function(e){var t=(e||{}).chatId,n=void 0===t?null:t;setTasks((function(e){return[].concat(_toConsumableArray(e),[{action:"clear",data:{chatId:n}}])}))},toggle:function(){setTasks((function(e){return[].concat(_toConsumableArray(e),[{action:"toggle"}])}))},ask:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];setTasks((function(n){return[].concat(_toConsumableArray(n),[{action:"ask",data:{text:e,submit:t}}])}))},lock:function(){setLocked(!0)},unlock:function(){setLocked(!1)},setShortcuts:function(e){setTasks((function(t){return[].concat(_toConsumableArray(t),[{action:"setShortcuts",data:e}])}))},setBlocks:function(e){setTasks((function(t){return[].concat(_toConsumableArray(t),[{action:"setBlocks",data:e}])}))},addBlock:function(e){setTasks((function(t){return[].concat(_toConsumableArray(t),[{action:"addBlock",data:e}])}))},removeBlockById:function(e){setTasks((function(t){return[].concat(_toConsumableArray(t),[{action:"removeBlockById",data:e}])}))},getBlocks:function(){return blocks},setContext:function(e){var t=e.chatId,n=e.messages;setTasks((function(e){return[].concat(_toConsumableArray(e),[{action:"setContext",data:{chatId:t,messages:n}}])}))}};-1!==e?_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.HX.chatbots[e]=t:_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.HX.chatbots.push(t)}}),[botId,chatId,customId,internalId]),useEffect((function(){busy?startChrono():(!isMobile&&hasFocusRef.current&&chatbotInputRef.current.focusInput(),stopChrono())}),[busy,startChrono,stopChrono,isMobile]);var saveMessages=useCallback((function(e){localStorageKey&&localStorage.setItem(localStorageKey,(0,_neko_ui__WEBPACK_IMPORTED_MODULE_3__.F1)({chatId,messages:e}))}),[localStorageKey,chatId]),resetError=function(){setError(null)};useEffect((function(){var e=[];if(localStorageKey&&(e=localStorage.getItem(localStorageKey)))return e=JSON.parse(e),setMessages(e.messages),void setChatId(e.chatId);resetMessages()}),[botId]);var handleActions=useCallback((function(actions,lastMessage){actions=actions||[];var callsCount=0,_iterator=_createForOfIteratorHelper(actions),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var action=_step.value;if("function"===action.type){var data=action.data||{},_data$name=data.name,name=void 0===_data$name?null:_data$name,_data$args=data.args,args=void 0===_data$args?[]:_data$args,finalArgs=args?Object.values(args).map((function(e){return JSON.stringify(e)})):[];try{debugMode&&console.log("[CHATBOT] CALL ".concat(name,"(").concat(finalArgs.join(", "),")")),eval("".concat(name,"(").concat(finalArgs.join(", "),")")),callsCount++}catch(e){console.error("Error while executing an action.",e)}}}}catch(e){_iterator.e(e)}finally{_iterator.f()}!lastMessage.content&&callsCount>0&&(lastMessage.content="*Done!*")}),[debugMode]),handleShortcuts=useCallback((function(e){setShortcuts(e||[])}),[]),handleBlocks=useCallback((function(e){setBlocks(e||[])}),[]);useEffect((function(){if(serverReply){setBusy(!1);var e=_toConsumableArray(messages),t=e.length>0?e[e.length-1]:null;if(!serverReply.success)return"assistant"===t.role&&t.isQuerying&&e.pop(),e.pop(),e.push({id:(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)(),role:"system",content:serverReply.message,who:rawAiName,timestamp:(new Date).getTime()}),setMessages(e),void saveMessages(e);if("assistant"===t.role&&t.isQuerying)t.content=(0,_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.W5)("ai.reply",serverReply.reply,{chatId,botId}),serverReply.images&&(t.images=serverReply.images),t.timestamp=(new Date).getTime(),delete t.isQuerying,handleActions(null==serverReply?void 0:serverReply.actions,t),handleBlocks(null==serverReply?void 0:serverReply.blocks),handleShortcuts(null==serverReply?void 0:serverReply.shortcuts);else if("assistant"===t.role&&t.isStreaming)t.content=(0,_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.W5)("ai.reply",serverReply.reply,{chatId,botId}),serverReply.images&&(t.images=serverReply.images),t.timestamp=(new Date).getTime(),delete t.isStreaming,handleActions(null==serverReply?void 0:serverReply.actions,t),handleBlocks(null==serverReply?void 0:serverReply.blocks),handleShortcuts(null==serverReply?void 0:serverReply.shortcuts);else{var n={id:(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)(),role:"assistant",content:(0,_app_chatbot_MwaiAPI__WEBPACK_IMPORTED_MODULE_2__.W5)("ai.reply",serverReply.reply,{botId,chatId,customId}),who:rawAiName,timestamp:(new Date).getTime()};serverReply.images&&(n.images=serverReply.images),handleActions(null==serverReply?void 0:serverReply.actions,n),handleBlocks(null==serverReply?void 0:serverReply.blocks),handleShortcuts(null==serverReply?void 0:serverReply.shortcuts),e.push(n)}setMessages(e),saveMessages(e)}}),[serverReply]);var onClear=useCallback(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r.length>0&&void 0!==r[0]?r[0]:{}).chatId,(n=void 0===t?null:t)||(n=(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)()),e.next=4,setChatId(n);case 4:localStorageKey&&localStorage.removeItem(localStorageKey),resetMessages(),setInputText(""),setShortcuts([]),setBlocks([]);case 9:case"end":return e.stop()}}),e)}))),[botId]),onStartRealtimeSession=useCallback(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={botId,customId,contextId,chatId},null==restNonce){e.next=5;break}e.t0=restNonce,e.next=8;break;case 5:return e.next=7,refreshRestNonce();case 7:e.t0=e.sent;case 8:return n=e.t0,e.next=11,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai-ui/v1/openai/realtime/start"),t,n);case 11:return r=e.sent,e.next=14,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Pn)(r);case 14:return a=e.sent,e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),[botId,customId,contextId,chatId,restNonce,refreshRestNonce,restUrl]),onCommitStats=useCallback(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,o,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,e.prev=1,null==restNonce){e.next=6;break}e.t0=restNonce,e.next=9;break;case 6:return e.next=8,refreshRestNonce();case 8:e.t0=e.sent;case 9:return r=e.t0,e.next=12,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai-ui/v1/openai/realtime/stats"),{botId,session:sessionId,refId:n||chatId,stats:t},r);case 12:return a=e.sent,e.next=15,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Pn)(a);case 15:return o=e.sent,e.abrupt("return",{success:o.success,message:o.message});case 19:return e.prev=19,e.t1=e.catch(1),console.error("Error while committing stats.",e.t1),e.abrupt("return",{success:!1,message:"An error occurred while committing the stats."});case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),[botId,restNonce,refreshRestNonce,restUrl,sessionId,chatId]),onCommitDiscussions=useCallback(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,o,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:[],e.prev=1,null==restNonce){e.next=6;break}e.t0=restNonce,e.next=9;break;case 6:return e.next=8,refreshRestNonce();case 8:e.t0=e.sent;case 9:return n=e.t0,r={botId,session:sessionId,chatId,messages:null!=t?t:[]},e.next=13,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai-ui/v1/openai/realtime/discussions"),r,n);case 13:return a=e.sent,e.next=16,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Pn)(a);case 16:return o=e.sent,e.abrupt("return",{success:o.success,message:o.message});case 20:return e.prev=20,e.t1=e.catch(1),console.error("Error while committing discussion.",e.t1),e.abrupt("return",{success:!1,message:"An error occurred while committing the discussion."});case 24:case"end":return e.stop()}}),e,null,[[1,20]])}))),[botId,chatId,restNonce,refreshRestNonce,restUrl,sessionId]),onRealtimeFunctionCallback=useCallback(function(){var _ref10=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(functionId,functionType,functionName,functionTarget,args){var body,finalArgs,nonce,res,data;return _regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(body={functionId,functionType,functionName,functionTarget,arguments:args},"js"!==functionTarget){_context6.next=15;break}return finalArgs=args?Object.values(args).map((function(e){return JSON.stringify(e)})):[],_context6.prev=3,debugMode&&console.log("[CHATBOT] CALL ".concat(functionName,"(").concat(finalArgs.join(", "),")")),eval("".concat(functionName,"(").concat(finalArgs.join(", "),")")),_context6.abrupt("return",{success:!0,message:"The function was executed",data:null});case 9:return _context6.prev=9,_context6.t0=_context6.catch(3),console.error("Error while executing an action.",_context6.t0),_context6.abrupt("return",{success:!1,message:"An error occurred while executing the function.",data:null});case 13:_context6.next=30;break;case 15:if(null==restNonce){_context6.next=19;break}_context6.t1=restNonce,_context6.next=22;break;case 19:return _context6.next=21,refreshRestNonce();case 21:_context6.t1=_context6.sent;case 22:return nonce=_context6.t1,_context6.next=25,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai-ui/v1/openai/realtime/call"),body,nonce);case 25:return res=_context6.sent,_context6.next=28,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Pn)(res);case 28:return data=_context6.sent,_context6.abrupt("return",data);case 30:return _context6.abrupt("return",null);case 31:case"end":return _context6.stop()}}),_callee6,null,[[3,9]])})));return function(e,t,n,r,a){return _ref10.apply(this,arguments)}}(),[restNonce,refreshRestNonce,restUrl,debugMode]),onSubmit=useCallback(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,o,i,l,c,u,s,f,d,m,p,h,v;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!busy){e.next=3;break}return console.error("AI Engine: There is already a query in progress."),e.abrupt("return");case 3:if("string"!=typeof t&&(t=inputText),r=uploadedFile,a=null==uploadedFile?void 0:uploadedFile.uploadedUrl,o=null==uploadedFile||null===(n=uploadedFile.localFile)||void 0===n?void 0:n.type,i=!!o&&o.startsWith("image"),l=t,a&&(l=i?"![Uploaded Image](".concat(a,")\n").concat(t):"[Uploaded File](".concat(a,")\n").concat(t)),setBusy(!0),setInputText(""),setShortcuts([]),setBlocks([]),resetUploadedFile(),c=[].concat(_toConsumableArray(messages),[{id:(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)(),role:"user",content:l,who:rawUserName,timestamp:(new Date).getTime()}]),saveMessages(c),u=(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.vx)(),s=[].concat(_toConsumableArray(c),[{id:u,role:"assistant",content:null,who:rawAiName,timestamp:null,isQuerying:!stream,isStreaming:!!stream}]),setMessages(s),f=_objectSpread({botId,customId,session:sessionId,chatId,contextId,messages,newMessage:t,newFileId:null==r?void 0:r.uploadedId,stream},atts),e.prev=21,debugMode&&console.log("[CHATBOT] OUT: ",f),d=stream?function(e){setMessages((function(t){var n=_toConsumableArray(t),r=n.length>0?n[n.length-1]:null;return r&&r.id===u&&(r.content=e,r.timestamp=(new Date).getTime()),n}))}:null,null==restNonce){e.next=28;break}e.t0=restNonce,e.next=31;break;case 28:return e.next=30,refreshRestNonce();case 30:e.t0=e.sent;case 31:return m=e.t0,e.next=34,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.ti)("".concat(restUrl,"/mwai-ui/v1/chats/submit"),f,m,stream);case 34:return p=e.sent,e.next=37,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.Pn)(p,d,debugMode?"CHATBOT":null);case 37:if((h=e.sent).success||!h.message){e.next=47;break}return setError(h.message),(v=_toConsumableArray(s)).pop(),v.pop(),setMessages(v),saveMessages(v),setBusy(!1),e.abrupt("return");case 47:setServerReply(h),e.next=54;break;case 50:e.prev=50,e.t1=e.catch(21),console.error("An error happened in the handling of the chatbot response.",{err:e.t1}),setBusy(!1);case 54:case"end":return e.stop()}}),e,null,[[21,50]])})));return function(t){return e.apply(this,arguments)}}(),[busy,uploadedFile,messages,saveMessages,stream,botId,customId,sessionId,chatId,contextId,atts,inputText,debugMode,restNonce,refreshRestNonce,restUrl]),onSubmitAction=useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(null==uploadedFile||!uploadedFile.uploadedId);hasFocusRef.current=document.activeElement===chatbotInputRef.current.currentElement(),e?onSubmit(e):(t||inputText.length>0)&&onSubmit(inputText)}),[inputText,onSubmit,null==uploadedFile?void 0:uploadedFile.uploadedId]),onFileUpload=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,o,i,l,c=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:"N/A",r=c.length>2&&void 0!==c[2]?c[2]:"N/A",e.prev=2,null!==t){e.next=6;break}return resetUploadedFile(),e.abrupt("return");case 6:if(a={type:n,purpose:r},o="".concat(restUrl,"/mwai-ui/v1/files/upload"),null==restNonce){e.next=12;break}e.t0=restNonce,e.next=15;break;case 12:return e.next=14,refreshRestNonce();case 14:e.t0=e.sent;case 15:return i=e.t0,e.next=18,(0,_app_helpers__WEBPACK_IMPORTED_MODULE_1__.uE)(o,t,i,(function(e){setUploadedFile({localFile:t,uploadedId:null,uploadedUrl:null,uploadProgress:e})}),a);case 18:l=e.sent,setUploadedFile({localFile:t,uploadedId:l.data.id,uploadedUrl:l.data.url,uploadProgress:null}),e.next=27;break;case 22:e.prev=22,e.t1=e.catch(2),console.error("onFileUpload Error",e.t1),setError(e.t1.message||"An unknown error occurred"),resetUploadedFile();case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),onUploadFile=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return error&&resetError(),e.abrupt("return",onFileUpload(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),resetUploadedFile=function(){setUploadedFile({localFile:null,uploadedId:null,uploadedUrl:null,uploadProgress:null})},runTimer=useCallback((function(){var e=setTimeout((function(){setOpen((function(e){return e||setShowIconMessage(!0),e}))}),1e3*iconTextDelay);return function(){return clearTimeout(e)}}),[iconText,iconTextDelay]);useEffect((function(){if(iconText&&!iconTextDelay)setShowIconMessage(!0);else if(iconText&&iconTextDelay)return runTimer()}),[iconText]);var _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),tasks=_useState38[0],setTasks=_useState38[1],runTasks=useCallback(_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,o,i,l,c,u,s,f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tasks.length>0&&("ask"===(t=tasks[0]).action?(n=t.data,r=n.text,n.submit?onSubmit(r):setInputText(r)):"toggle"===t.action?setOpen((function(e){return!e})):"open"===t.action?setOpen(!0):"close"===t.action?setOpen(!1):"clear"===t.action?(a=t.data.chatId,onClear({chatId:a})):"setContext"===t.action?(o=t.data,i=o.chatId,l=o.messages,setChatId(i),setMessages(l)):"setShortcuts"===t.action?(c=t.data,handleShortcuts(c)):"setBlocks"===t.action?(u=t.data,handleBlocks(u)):"addBlock"===t.action?(s=t.data,setBlocks((function(e){return[].concat(_toConsumableArray(e),[s])}))):"removeBlockById"===t.action&&(f=t.data,setBlocks((function(e){return e.filter((function(e){return e.id!==f}))}))),setTasks((function(e){return e.slice(1)})));case 1:case"end":return e.stop()}}),e)}))),[tasks,onClear,onSubmit,setChatId,setInputText,setMessages,setOpen,handleShortcuts,handleBlocks]);useEffect((function(){runTasks()}),[runTasks]);var actions={setInputText,saveMessages,setMessages,resetMessages,resetError,onClear,onSubmit,onSubmitAction,onFileUpload,onUploadFile,setOpen,setWindowed,setShowIconMessage,setIsListening,setDraggingType,setIsBlocked,onStartRealtimeSession,onRealtimeFunctionCallback,onCommitStats,onCommitDiscussions},state={theme,botId,customId,userData,pluginUrl,inputText,messages,shortcuts,blocks,busy,error,setBusy,typewriter,speechRecognition,speechSynthesis,virtualKeyboardFix,localMemory,isRealtime,imageUpload,fileUpload,uploadedFile,fileSearch,textSend,textClear,textInputMaxLength,textInputPlaceholder,textCompliance,aiName,userName,guestName,aiAvatar,userAvatar,guestAvatar,aiAvatarUrl,userAvatarUrl,guestAvatarUrl,isWindow,copyButton,headerSubtitle,fullscreen,icon,iconText,iconAlt,iconPosition,iconBubble,cssVariables,iconUrl,chatbotInputRef,conversationRef,isMobile,open,locked,windowed,showIconMessage,timeElapsed,isListening,speechRecognitionAvailable,uploadIconPosition,submitButtonConf,draggingType,isBlocked,busyNonce};return React.createElement(ChatbotContext.Provider,{value:{state,actions}},children)}},1137:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:String(t)}n.d(t,{HX:()=>l,W5:()=>c});var i=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"!=typeof window&&window.MwaiAPI)return window.MwaiAPI;this.chatbots=[],this.forms=[],this.filters={},this.actions={},"undefined"!=typeof window&&(window.MwaiAPI=this)}var t,n;return t=e,n=[{key:"getChatbot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.chatbots.find((function(t){return t.botId===e||t.customId===e})):this.chatbots[0]}},{key:"getForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.forms.find((function(t){return t.formId===e})):this.forms[0]}},{key:"addFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.filters[e]||(this.filters[e]=[]),this.filters[e].push({callback:t,priority:n}),this.filters[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"applyFilters",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return this.filters[e]?this.filters[e].reduce((function(e,t){return t.callback.apply(t,[e].concat(r))}),t):t}},{key:"addAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.actions[e]||(this.actions[e]=[]),this.actions[e].push({callback:t,priority:n}),this.actions[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"doAction",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.actions[e]&&this.actions[e].forEach((function(e){e.callback.apply(e,n)}))}}],n&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=function(){if("undefined"!=typeof window&&window.MwaiAPI)return window.MwaiAPI;var e=new i;return"undefined"!=typeof window&&(window.MwaiAPI=e),e}(),c=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return l.applyFilters.apply(l,[e,t].concat(r))}},6966:(e,t,n)=>{n.d(t,{$$:()=>y,Mc:()=>w,Vw:()=>O,_$:()=>R,bE:()=>_,dh:()=>b,gR:()=>g,kW:()=>x,mv:()=>E,tm:()=>v});var r=n(8614),a=["active","disabled"],o=["if","className","disableTransition","children"];function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=wp.element,f=s.useState,d=s.useMemo,m=s.useEffect,p=s.useRef,h=s.useCallback,v=function(e){var t=e.active,n=e.disabled,o=u(e,a);return React.createElement("div",c({active:t?"true":"false",disabled:n},o),React.createElement(r.A,{size:"24"}))};function y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=p();m((function(){r.current=t}),[t]),m((function(){if(null!==e&&n){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e,n])}var g=function(){return d((function(){return function(e,t){return Array.isArray(e)||(e=[e]),t&&Object.entries(t).forEach((function(t){var n=i(t,2),r=n[0];n[1]&&e.push(r)})),e.join(" ")}}),[])};function E(e){return!(!e||"string"!=typeof e)&&0===e.indexOf("http")}function b(){var e=i(f(null),2),t=e[0],n=e[1],r=p(null);return m((function(){return function(){clearInterval(r.current)}}),[]),{timeElapsed:t,startChrono:function(){if(null===r.current){var e=Date.now();r.current=setInterval((function(){var t,r,a,o=Math.floor((Date.now()-e)/1e3);n((t=o,r=Math.floor(t/60),a=t%60,"".concat(r,":").concat(a.toString().padStart(2,"0"))))}),500)}},stopChrono:function(){clearInterval(r.current),r.current=null,n(null)}}}var w=function(e,t){return"string"==typeof e&&t?(Object.entries(t).forEach((function(t){var n=i(t,2),r=n[0],a=n[1];e=e.replace(new RegExp("{".concat(r,"}"),"g"),a)})),e):e},R=function(e){var t,n,r,a,o,i,l,c,u,s,f,d,m,p,h,v,y,g,E,b,R,O,_,x,S,T,N,C,I,k,A,L,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],P=null!==(t=null===(n=e.guestName)||void 0===n?void 0:n.trim())&&void 0!==t?t:"",j=null!==(r=null===(a=e.textSend)||void 0===a?void 0:a.trim())&&void 0!==r?r:"",F=null!==(o=null===(i=e.textClear)||void 0===i?void 0:i.trim())&&void 0!==o?o:"",D=parseInt(e.textInputMaxLength),U=null!==(l=null===(c=e.textInputPlaceholder)||void 0===c?void 0:c.trim())&&void 0!==l?l:"",G=null!==(u=null===(s=e.textCompliance)||void 0===s?void 0:s.trim())&&void 0!==u?u:"",B="",H=Boolean(e.window),Y=Boolean(e.copyButton),z=Boolean(e.fullscreen),W=null!==(f=null===(d=e.icon)||void 0===d?void 0:d.trim())&&void 0!==f?f:"",V=null!==(m=null===(p=e.iconText)||void 0===p?void 0:p.trim())&&void 0!==m?m:"",K=parseInt(e.iconTextDelay||1),q=null!==(h=null===(v=e.iconAlt)||void 0===v?void 0:v.trim())&&void 0!==h?h:"",X=null!==(y=null===(g=e.iconPosition)||void 0===g?void 0:g.trim())&&void 0!==y?y:"",$=Boolean(e.iconBubble),Q=null!==(E=null===(b=e.aiName)||void 0===b?void 0:b.trim())&&void 0!==E?E:"",J=null!==(R=null===(O=e.userName)||void 0===O?void 0:O.trim())&&void 0!==R?R:"",Z=Boolean(null==e?void 0:e.aiAvatar),ee=Boolean(null==e?void 0:e.userAvatar),te=Boolean(null==e?void 0:e.guestAvatar),ne=Z?null!==(_=null==e||null===(x=e.aiAvatarUrl)||void 0===x?void 0:x.trim())&&void 0!==_?_:"":null,re=ee?null!==(S=null==e||null===(T=e.userAvatarUrl)||void 0===T?void 0:T.trim())&&void 0!==S?S:"":null,ae=te?null!==(N=null==e||null===(C=e.guestAvatarUrl)||void 0===C?void 0:C.trim())&&void 0!==N?N:"":null,oe=Boolean(e.localMemory),ie=Boolean(e.imageUpload),le=Boolean(e.fileUpload),ce=Boolean(e.fileSearch),ue=null!==(I=null===(k=e.mode)||void 0===k?void 0:k.trim())&&void 0!==I?I:"chat";return B=null===e.headerSubtitle||void 0===e.headerSubtitle?"Discuss with":null!==(A=null===(L=e.headerSubtitle)||void 0===L?void 0:L.trim())&&void 0!==A?A:"",M&&(G=w(G,M),V=w(V,M)),{textSend:j,textClear:F,textInputMaxLength:D,textInputPlaceholder:U,textCompliance:G,mode:ue,window:H,copyButton:Y,fullscreen:z,localMemory:oe,imageUpload:ie,fileUpload:le,fileSearch:ce,icon:W,iconText:V,iconTextDelay:K,iconAlt:q,iconPosition:X,iconBubble:$,headerSubtitle:B,aiName:Q,userName:J,guestName:P,aiAvatar:Z,userAvatar:ee,guestAvatar:te,aiAvatarUrl:ne,userAvatarUrl:re,guestAvatarUrl:ae}},O=function(e){var t=i(f(!1),2),n=t[0],r=t[1],a=i(f(!1),2),o=a[0],l=a[1];return m((function(){"undefined"!=typeof window&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)&&l(!0)}),[]),m((function(){if(o){var t=new(window.SpeechRecognition||window.webkitSpeechRecognition),a=null;return navigator.userAgent.toLowerCase().indexOf("android")>-1?(t.interimResults=!1,t.continuous=!1,a=function(t){var n=Array.from(t.results).filter((function(e){return e.isFinal})).map((function(e){return e[0].transcript})).join("");e(n),r(!1)}):(t.interimResults=!0,t.continuous=!0,a=function(t){var n=Array.from(t.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");e(n)}),n?(t.addEventListener("result",a),t.start()):(t.removeEventListener("result",a),t.abort()),function(){t.abort()}}}),[n,o]),{isListening:n,setIsListening:r,speechRecognitionAvailable:o}},_=function(e){var t=e.if,n=e.className,r=e.disableTransition,a=void 0!==r&&r,l=e.children,s=u(e,o),d=i(f(!1),2),p=d[0],h=d[1],v=i(f("mwai-transition"),2),y=v[0],g=v[1];return m((function(){a?h(t):t?(h(!0),setTimeout((function(){g("mwai-transition mwai-transition-visible")}),150)):g("mwai-transition")}),[t,a]),p?React.createElement("div",c({className:"".concat(n," ").concat(a?"":y),onTransitionEnd:function(){"mwai-transition"!==y||a||h(!1)}},s),l):null},x=function(){var e=i(f(window.visualViewport.height),2),t=e[0],n=e[1],r=d((function(){return/Android/.test(navigator.userAgent)}),[]),a=d((function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}),[]),o=p(window.visualViewport),l=h((function(){n(o.current.height)}),[]);return m((function(){var e=o.current;return e.addEventListener("resize",l),a?(window.addEventListener("resize",l),document.addEventListener("focusin",l)):e.addEventListener("scroll",l),function(){e.removeEventListener("resize",l),a?(window.removeEventListener("resize",l),document.removeEventListener("focusin",l)):e.removeEventListener("scroll",l)}}),[l,a]),{viewportHeight:t,isIOS:a,isAndroid:r}}},7678:(e,t,n)=>{n.d(t,{CI:()=>O,Pn:()=>h,Ve:()=>x,rn:()=>R,ti:()=>y,uE:()=>E,vx:()=>w});var r=n(8135),a=n(6841);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",s=l.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof E?t:E,i=Object.create(o.prototype),l=new A(r||[]);return a(i,"_invoke",{value:N(e,n,l)}),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",v="executing",y="completed",g={};function E(){}function b(){}function w(){}var R={};f(R,c,(function(){return this}));var O=Object.getPrototypeOf,_=O&&O(O(L([])));_&&_!==n&&r.call(_,c)&&(R=_);var x=w.prototype=E.prototype=Object.create(R);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(a,i,l,c){var u=m(e[a],e,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,l,c)}),(function(e){n("throw",e,l,c)})):t.resolve(f).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function N(t,n,r){var a=p;return function(o,i){if(a===v)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=C(l,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var u=m(t,n,r);if("normal"===u.type){if(a=r.done?y:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=y,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return b.prototype=w,a(x,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),f(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new T(d(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),f(x,s,"Generator"),f(x,c,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,l,"next",e)}function l(e){u(o,r,a,i,l,"throw",e)}i(void 0)}))}}var f=wp.element,d=f.useMemo,m=f.useEffect,p=f.useState;function h(e,t){return v.apply(this,arguments)}function v(){return v=s(i().mark((function e(t,n){var r,a,o,l,c,u,s,f,d,m,p,h,v,y,g=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>2&&void 0!==g[2]?g[2]:null,n){e.next=14;break}return e.prev=2,e.next=5,t.json();case 5:return a=e.sent,r&&console.log("[".concat(r,"] IN: "),a),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(2),console.error("Could not parse the regular response.",{err:e.t0,data}),e.abrupt("return",{success:!1,message:"Could not parse the regular response."});case 14:o=t.body.getReader(),l=new TextDecoder("utf-8"),c="",u="";case 18:return e.next=21,o.read();case 21:if(s=e.sent,f=s.value,d=s.done,c+=l.decode(f,{stream:!0}),!d){e.next=27;break}return e.abrupt("break",68);case 27:m=c.split("\n"),p=0;case 29:if(!(p<m.length-1)){e.next=65;break}if(0===m[p].indexOf("data: ")){e.next=32;break}return e.abrupt("continue",62);case 32:if("live"!==(h=JSON.parse(m[p].replace("data: ",""))).type){e.next=39;break}r&&console.log("[".concat(r," STREAM] LIVE: "),h),u+=h.data,n&&n(u,h.data),e.next=62;break;case 39:if("error"!==h.type){e.next=51;break}return e.prev=40,r&&console.error("[".concat(r," STREAM] ERROR: "),h.data),e.abrupt("return",{success:!1,message:h.data});case 45:return e.prev=45,e.t1=e.catch(40),console.error("Could not parse the 'error' stream.",{err:e.t1,data:h}),e.abrupt("return",{success:!1,message:"Could not parse the 'error' stream."});case 49:e.next=62;break;case 51:if("end"!==h.type){e.next=62;break}return e.prev=52,v=JSON.parse(h.data),r&&console.log("[".concat(r," STREAM] END: "),v),e.abrupt("return",v);case 58:return e.prev=58,e.t2=e.catch(52),console.error("Could not parse the 'end' stream.",{err:e.t2,data:h}),e.abrupt("return",{success:!1,message:"Could not parse the 'end' stream."});case 62:p++,e.next=29;break;case 65:c=m[m.length-1],e.next=18;break;case 68:return e.prev=68,y=JSON.parse(c),r&&console.log("[".concat(r," STREAM] IN: "),y),e.abrupt("return",y);case 74:return e.prev=74,e.t3=e.catch(68),console.error("Could not parse the buffer.",{err:e.t3,buffer:c}),e.abrupt("return",{success:!1,message:"Could not parse the buffer."});case 78:case"end":return e.stop()}}),e,null,[[2,10],[40,45],[52,58],[68,74]])}))),v.apply(this,arguments)}function y(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=s(i().mark((function e(t,n,a,o){var l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={"Content-Type":"application/json"},a&&(l["X-WP-Nonce"]=a),o&&(l.Accept="text/event-stream"),e.next=5,fetch("".concat(t),{method:"POST",headers:l,body:(0,r.F1)(n)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n,r){return b.apply(this,arguments)}function b(){return b=s(i().mark((function e(t,n,r,a){var o,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>4&&void 0!==c[4]?c[4]:{},e.abrupt("return",new Promise((function(e,i){var c=new FormData;c.append("file",n);for(var u=0,s=Object.entries(o);u<s.length;u++){var f=l(s[u],2),d=f[0],m=f[1];c.append(d,m)}var p=new XMLHttpRequest;p.open("POST",t,!0),r&&p.setRequestHeader("X-WP-Nonce",r),p.upload.onprogress=function(e){if(e.lengthComputable&&a){var t=e.loaded/e.total*100;a(t)}},p.onload=function(){if(p.status>=200&&p.status<300)try{var t=JSON.parse(p.responseText);e(t)}catch(e){i({status:p.status,statusText:p.statusText,error:"The server response is not valid JSON"})}else{try{var n=JSON.parse(p.responseText);return void i({status:p.status,message:n.message})}catch(e){}i({status:p.status,statusText:p.statusText})}},p.onerror=function(){i({status:p.status,statusText:p.statusText})},p.send(c)})));case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function w(){return Math.random().toString(36).substring(2)}var R=function(){var e=l(p(!0),2),t=e[0],n=e[1];m((function(){var e=setTimeout((function(){var e=setInterval((function(){n((function(e){return!e}))}),500);return function(){return clearInterval(e)}}),200);return function(){return clearTimeout(e)}}),[]);var r={opacity:t?1:0,width:"1px",height:"1em",borderLeft:"8px solid",marginLeft:"2px"};return React.createElement("span",{style:r})},O=function(e){var t,n=e.content,r=e.error,o=e.isStreaming,i=e.baseClass,l=void 0===i?"mwai-output-handler":i,c=null!==(t=r||n)&&void 0!==t?t:"";(c.match(/```/g)||[]).length%2!=0?c+="\n```":o&&(c+="<BlinkingCursor />");var u=d((function(){var e=[l];return r&&e.push("mwai-error"),e}),[r]),s=d((function(){return{wrapper:"div",forceWrapper:!0,overrides:{BlinkingCursor:{component:R},a:{props:{target:"_blank"}}}}}),[]);return React.createElement(a.Ay,{options:s,className:u.join(" "),children:c})},_=/([\u2700-\u27BF]|[\uE000-\uF8FF]|[\uD800-\uDFFF]|[\uFE00-\uFE0F]|[\u1F100-\u1F1FF]|[\u1F200-\u1F2FF]|[\u1F300-\u1F5FF]|[\u1F600-\u1F64F]|[\u1F680-\u1F6FF]|[\u1F700-\u1F77F]|[\u1F780-\u1F7FF]|[\u1F800-\u1F8FF]|[\u1F900-\u1F9FF]|[\u1FA00-\u1FA6F])/;function x(e){return e&&2===e.length&&_.test(e)}},1923:(e,t,n)=>{var r,a,o,i,l,c=n(5323),u=n(7665),s=n(2564),f=n(9270),d=n(7097),m=n(4977),p=n(7039),h=n(4536),v=n(5263),y=n(6913),g=n(1829),E=n(4547),b=n(3676),w=n(9296),R=n(4461),O=n(8135),_=mwai.prefix,x=mwai.domain,S=mwai.rest_url.replace(/\/+$/,""),T=mwai.api_url.replace(/\/+$/,""),N=mwai.plugin_url.replace(/\/+$/,""),C=mwai.user_data,I="1"===mwai.is_pro,k=I&&"1"===mwai.is_registered,A=mwai.rest_nonce,L=mwai.options,M=mwai.session,P=mwai.themes,j=!!mwai.stream,F=mwai.chatbots,D=n(197),U=n(3185);function G(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var B=U.Ay.div(r||(r=G(["\n  color: white;\n  padding: 15px;\n  margin-bottom: -15px;\n\n  a {\n    color: #7dedff;\n    text-decoration: none;\n  }\n\n  p {\n    font-size: 15px;\n  }\n"]))),H=(0,U.Ay)(R.z)(a||(a=G(["\n\n  .neko-block-title {\n    display: none;\n  }\n\n  .plugin-desc {\n    display: flex;\n    flex-direction: column;\n    margin-left: 15px;\n  }\n\n  .neko-block-content {\n    display: flex;\n    padding: 15px;\n\n    h2 {\n      font-size: 18px;\n      margin: 0;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    p {\n      margin: 0px;\n      margin-top: 10px;\n      font-size: 13px;\n      line-height: 1.5;\n    }\n\n    .plugin-actual-desc {\n      font-size: 13px;\n      font-weight: 500;\n    }\n  }\n"]))),Y=U.Ay.img(o||(o=G(["\n  height: 125px;\n  width: auto;\n  border-radius: 10px;\n  background: lightgray;\n"]))),z=U.Ay.div(i||(i=G(["\n\n  margin: 15px;\n\n  .center {\n    background: white;\n    color: black;\n    border-radius: 10px;\n    padding: 10px;\n    max-width: 100%\n    overflow: none;\n\n    h2 {\n      font-size: 26px;\n    }\n\n    table {\n      width: 100%;\n\n      tr td:first-child {\n        width: 220px;\n        font-weight: bold;\n        color: #1e7cba;\n      }\n\n      * {\n        overflow-wrap: anywhere;\n      }\n    }\n  }\n\n  hr {\n    border-color: #1e7cba;\n  }\n"]))),W=U.Ay.ul(l||(l=G(["\n  margin-top: 10px;\n  background: rgb(0, 72, 88);\n  padding: 10px;\n  color: rgb(58, 212, 58);\n  max-height: 600px;\n  min-height: 200px;\n  display: block;\n  font-family: monospace;\n  font-size: 12px;\n  white-space: pre;\n  overflow-x: auto;\n  width: calc(100vw - 276px);\n  color: white;\n\n  .log-date {\n    color: var(--neko-yellow);\n    margin-left: 8px;\n  }\n\n  .log-type {\n    background: #0000004d;\n    padding: 2px 5px;\n    border-radius: 8px;\n    text-transform: uppercase;\n  }\n\n  .log-content {\n    display: block;\n  }\n\n  .log-warning .log-type {\n    background: var(--neko-yellow);\n    color: white;\n  }\n\n  .log-fatal .log-type {\n    background: var(--neko-red);\n    color: white;\n  }\n"])));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function K(){K=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==V(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(V(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function q(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,l,"next",e)}function l(e){q(o,r,a,i,l,"throw",e)}i(void 0)}))}}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=wp.element,ee=Z.useState,te=Z.useEffect,ne="".concat(S,"/meow-common/v1"),re=function(e){var t=e.request,n=e.title,r=e.max,a=$(ee(!1),2),o=a[0],i=a[1],l=$(ee([]),2),c=l[0],u=l[1],s=c.length>0?c.reduce((function(e,t){return e+t})):0,f=c.length>0?Math.ceil(s/c.length):0,d=!c.length&&o;return te((function(){o&&setTimeout(X(K().mark((function e(){var n,r,a;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),e.next=3,(0,O.IU)("".concat(ne,"/").concat(t),{method:"POST",nonce:A});case 3:r=(new Date).getTime(),a=r-n,u((function(e){return[].concat(function(e){if(Array.isArray(e))return J(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a]);var t}));case 6:case"end":return e.stop()}}),e)}))),1e3)}),[c]),React.createElement(B,{style:{width:200,textAlign:"center"}},React.createElement(m.s,{h2:!0,style:{color:"white"}},n),React.createElement(D.X,{size:200,value:d?r:f,max:r},React.createElement("span",{style:{fontSize:20}},d?"START":f+" ms"),React.createElement("span",{style:{fontSize:12}},d?"YOUR ENGINE":c.length+" requests")),React.createElement(w.M,{style:{width:"100%",marginTop:10},color:o?"#cc3627":"#ccb027",onClick:function(){o||u([]),i(!o)}},o?"Stop":"Start"))};function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(){le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==ae(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ae(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ce(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ce(o,r,a,i,l,"next",e)}function l(e){ce(o,r,a,i,l,"throw",e)}i(void 0)}))}}var se=wp.element,fe=se.useState,de=se.useEffect;T&&S&&N||console.error("[@common/dashboard] apiUrl, restUrl and pluginUrl are mandatory.");var me="".concat(S,"/meow-common/v1"),pe=React.createElement(B,null,React.createElement(m.s,{p:!0,style:{lineHeight:"1.5",margin:"0 0 15px 0"}},"Hi!  Meow Apps isn't your typical plugin suiteit's a passion project led by me, ",React.createElement("a",{target:"_blank",href:"https://jordymeow.com"},"Jordy Meow"),", and a stellar team!  Based in ",React.createElement("a",{target:"_blank",href:"https://offbeatjapan.org"},"Japan"),", we're all about making your WordPress experience smoother and speedier. Our plugins are all about boosting your site's performance and user-friendliness. Ready to level up your WordPress game? Check out ",React.createElement("a",{href:"http://meowapps.com",target:"_blank"},"Meow Apps")," and let's make magic happen! ")),he=React.createElement(B,null,React.createElement(m.s,{p:!0},"The ",React.createElement("b",null,"Empty Request Time")," measures your installation's basic performance by showing the average time needed to process an empty request on your server. To see how disabling plugins affects the results, turn some off and run the test again. Aim for a time under 2,000 ms, but ideally, keep it below 500 ms. The ",React.createElement("b",null,"File Operation Time")," creates a temporary 10MB file each time it runs. ",React.createElement("b",null,"The SQL Request Time")," calculates the total number of posts. This process should be quick and have a similar duration to the Empty Request Time.")),ve=React.createElement(B,null,React.createElement(m.s,{p:!0},"Maintain a streamlined WordPress setup by using essential plugins and a dependable hosting provider. Refrain from self-hosting unless you're an expert. Go further by reading our tutorials:",React.createElement("ul",null,React.createElement("li",null," ",React.createElement("a",{href:"https://meowapps.com/tutorial-improve-seo-wordpress/",target:"_blank"},"SEO Checklist & Optimization")),React.createElement("li",null," ",React.createElement("a",{href:"https://meowapps.com/tutorial-faster-wordpress-optimize/",target:"_blank"},"Optimize your WordPress Speed")),React.createElement("li",null," ",React.createElement("a",{href:"https://meowapps.com/tutorial-optimize-images-wordpress/",target:"_blank"},"Optimize Images (CDN, and so on)")),React.createElement("li",null," ",React.createElement("a",{href:"https://meowapps.com/tutorial-hosting-service-wordpress/",target:"_blank"},"The Best Hosting Services for WordPress"))))),ye=function(){var e=ue(le().mark((function e(){var t;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(me,"/all_settings/"),{method:"POST",nonce:A});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=ue(le().mark((function e(t){var n,r,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,r=t.id,e.next=3,(0,O.IU)("".concat(me,"/update_option"),{method:"POST",nonce:A,json:{name:r,value:n}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=ue(le().mark((function e(){var t;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(me,"/error_logs"),{method:"POST",nonce:A});case 2:return t=e.sent,e.abrupt("return",t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,u.jE)(),t=oe(fe(!1),2),n=t[0],r=t[1],a=oe(fe(!1),2),o=a[0],i=(a[1],oe(fe(""),2)),l=i[0],c=i[1],s=(0,f.I)({queryKey:["all_settings"],queryFn:ye}),O=s.data,_=s.error,x=(s.isLoading,(0,d.n)({mutationFn:ge,onSuccess:function(){e.invalidateQueries(["all_settings"])}}).mutate),S=(0,d.n)({mutationFn:Ee}),T=S.mutate,N=S.data,C=void 0===N?[]:N,I=null==O?void 0:O.meowapps_hide_meowapps,k=null==O?void 0:O.force_sslverify;de((function(){_&&!n&&(r(!0),console.error("Error from useQuery",_.message))}),[_]),de((function(){var e=document.getElementById("meow-common-phpinfo");c(e.innerHTML)}),[]);var A=function(e,t){x({value:e,id:t})},L=React.createElement(p.d,{title:"Main Menu"},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"meowapps_hide_meowapps",label:"Hide (Not Recommended)",description:React.createElement(m.s,{p:!0},"This will hide the Meow Apps Menu (on the left side) and everything it contains. You can re-enable it through though an option that will be added in Settings  General."),value:"1",disabled:o,checked:I,onChange:A}))),M=React.createElement(p.d,{title:"SSL Verify"},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"force_sslverify",label:"Force (Not Recommended)",description:React.createElement(m.s,{p:!0},"This will enforce the usage of SSL when checking the license or updating the plugin."),value:"1",disabled:o,checked:k,onChange:A})));return React.createElement(y.z,{showRestError:n},React.createElement(g.n,{title:"The Dashboard"}),React.createElement(E.N,null,React.createElement(E.Y,{full:!0},React.createElement(b._,{keepTabOnReload:!0},React.createElement(b.V,{title:"Meow Apps"},pe,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement(H,{title:"AI Engine",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/ai-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/"},"AI Engine")),React.createElement("p",{className:"plugin-actual-desc"},"This is the ultimate AI plugin for WordPress. From a chatbot adapted to your needs to an AI that can write your content for you, API, REST, and more."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/ai-engine/"},"Meow Apps"))))),React.createElement(H,{title:"Media Cleaner",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/media-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/"},"Media Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Is your Media Library bloated, your database heavy, and your website running slow? Media Cleaner will clean your Media Library from the media entries (and files) which aren't used in your website, as well as broken entries."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-cleaner/"},"Meow Apps"))))),React.createElement(H,{title:"Database Cleaner",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/database-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/"},"Database Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Not only does Database Cleaner have a user-friendly UI, but it's also equipped to handle large DBs, giving it an edge over other plugins. It's a must-have for any WordPress site."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/database-cleaner/"},"Meow Apps"))))),React.createElement(H,{title:"Media File Renamer",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/media-file-renamer/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/"},"Media File Renamer")),React.createElement("p",{className:"plugin-actual-desc"},"Rename and move files directly from the dashboard, manually, automatically or via AI, either individually or in bulk. It's the best way to rename your files."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-file-renamer/"},"Meow Apps"))))),React.createElement(H,{title:"Social Engine",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/social-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/"},"Social Engine")),React.createElement("p",{className:"plugin-actual-desc"},'Effortlessly schedule and automate the perfect posts for all your networks. Unlimited capabilities and infinite className="plugin-actual-desc" extensibility, for free!'),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/social-engine/"},"Meow Apps"))))),React.createElement(H,{title:"Meow Analytics",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/meow-analytics/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"Meow Analytics")),React.createElement("p",{className:"plugin-actual-desc"},"Google Analytics for your website. Simple and fast."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/meow-analytics/"},"Meow Apps")))))),React.createElement(E.Y,{minimal:!0},React.createElement(H,{title:"Contact Form Block",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/seo-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/seo-engine/"},"SEO Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Optimize your content for SEO and for the AI world, with AI assistants... while keeping everything simple and fast, as it should be! "),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/seo-engine/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/seo-engine/"},"Meow Apps"))))),React.createElement(H,{title:"Meow Gallery",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/meow-gallery/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery")),React.createElement("p",{className:"plugin-actual-desc"},"Fast and beautiful galleries with many layouts. Forget the heavy and slow plugins, use the Meow Gallery for a better experience! "),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/meow-gallery/"},"Meow Apps"))))),React.createElement(H,{title:"Meow Lightbox",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/meow-lightbox/assets/icon-256x256.gif"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"Meow Lightbox")),React.createElement("p",{className:"plugin-actual-desc"},"Sleek and performant lightbox with EXIF support."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/meow-lightbox/"},"Meow Apps"))))),React.createElement(H,{title:"Perfect Images (Retina)",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/wp-retina-2x/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"Perfect Images")),React.createElement("p",{className:"plugin-actual-desc"},"Manage, Optimize, Replace your images with Perfect Images."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/wp-retina-2x/"},"Meow Apps"))))),React.createElement(H,{title:"Photo Engine",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/wplr-sync/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"Photo Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Organize your photos in folders and collections. Synchronize with Lightroom. Simplify and speed up your workflow."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/wplr-sync/"},"Meow Apps"))))),React.createElement(H,{title:"Contact Form Block",className:"primary"},React.createElement(Y,{src:"https://ps.w.org/contact-form-block/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"Contact Form Block")),React.createElement("p",{className:"plugin-actual-desc"},"Need a very simple but straightforward contact form? This is the one you need. It's fast, simple, and efficient."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/contact-form-block/"},"Meow Apps")))))))),React.createElement(b.V,{title:"Performance"},he,React.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:25}},React.createElement(re,{title:"Empty Request Time",request:"empty_request",max:2500}),React.createElement(re,{title:"File Operation Time",request:"file_operation",max:2600}),React.createElement(re,{title:"SQL Request Time",request:"sql_request",max:2800})),ve),React.createElement(b.V,{title:"PHP Info"},React.createElement(z,{dangerouslySetInnerHTML:{__html:l}})),React.createElement(b.V,{title:"PHP Error Logs"},React.createElement(B,null,React.createElement(w.M,{style:{marginBottom:10},color:"#ccb027",onClick:function(){T()},disabled:o,isBusy:"isLoadingErrorLogs"===o},"Load PHP Error Logs"),React.createElement(W,null,C.map((function(e){return React.createElement("li",{class:"log-".concat(e.type)},React.createElement("span",{class:"log-type"},e.type),React.createElement("span",{class:"log-date"},e.date),React.createElement("span",{class:"log-content"},e.content))}))),React.createElement(m.s,{p:!0},"If you don't see any errors, your host might not allow remote access to PHP error logs. Contact them for assistance, or look in your hosting control panel."))),React.createElement(b.V,{title:"Settings"},React.createElement(R.z,{title:"Settings",className:"primary"},L,M))))))},we=n(4677),Re=n(8696),Oe=n(8922),_e=n(6734),xe=n(1543),Se=n(8668),Te=n(9794),Ne=n(7213);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(){Ie=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ce(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ce(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ke(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ke(o,r,a,i,l,"next",e)}function l(e){ke(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=wp.element,je=Pe.useState,Fe=Pe.useEffect,De="".concat(S,"/meow-licenser/").concat(_,"/v1"),Ue=function(){var e=Le(je(!1),2),t=e[0],n=e[1],r=Le(je(!1),2),a=r[0],o=r[1],i=Le(je(null),2),l=i[0],c=i[1],u=Le(je(null),2),s=u[0],f=u[1],d=Le(je(""),2),p=d[0],h=d[1],v=k&&(!s||"valid"!==s.license),y=function(){var e=Ae(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=2;break}return e.abrupt("return");case 2:return n(!0),e.prev=3,e.next=6,(0,O.IU)("".concat(De,"/get_license"),{method:"POST",nonce:A});case 6:t=e.sent,f(t.data),t.data.key&&h(t.data.key),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),alert("Error while checking the license. Check your console for more information."),console.error(e.t0);case 15:n(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Ae(Ie().mark((function e(){return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(De,"/set_license"),{method:"POST",nonce:A,json:{serialKey:null}});case 4:e.sent.success&&(h(""),f(null),c("licenseRemoved")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Error while removing the license. Check your console for more information."),console.error(e.t0);case 12:n(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Ae(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(De,"/set_license"),{method:"POST",nonce:A,json:{serialKey:p,override:!0}});case 4:(t=e.sent).success&&(f(t.data),t.data&&!t.data.issue&&c("licenseAdded")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Error while forcing the license. Check your console for more information."),console.error(e.t0);case 12:n(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Ae(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("MEOW_OVERRIDE"!==p){e.next=5;break}return o(!0),f(null),h(""),e.abrupt("return");case 5:return n(!0),e.prev=6,e.next=9,(0,O.IU)("".concat(De,"/set_license"),{method:"POST",nonce:A,json:{serialKey:p}});case 9:(t=e.sent).success&&(f(t.data),t.data&&!t.data.issue&&c("licenseAdded")),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),alert("Error while validating the license. Check your console for more information."),console.error(e.t0);case 17:n(!1);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();Fe((function(){y()}),[]);var _=v?"Forced License":k?"Enabled":"Disabled",x=v||s&&"valid"===s.license,S="Your license is active. Thanks a lot for your support :)";v&&(S="This license has been force-enabled for you.",s&&s.check_url&&(S=React.createElement(React.Fragment,null,React.createElement("span",null,S),React.createElement("br",null),React.createElement("small",null,"To check your license status, please click ",React.createElement("a",{target:"_blank",href:s.check_url+"&cache="+642e3*Math.random(),rel:"noreferrer"},"here"),".")))),x||(s?"no_activations_left"===s.issue?S=React.createElement("span",null,"There are no activations left for this license. You can visit your account at ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://meowapps.com"},"Meow Apps"),", unregister a site, and click on ",React.createElement("i",null,"Retry to validate"),"."):"expired"===s.issue?S=React.createElement("span",null,"Your license has expired. You can get another license or renew the current one by visiting your account at ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://meowapps.com"},"Meow Apps"),"."):"missing"===s.issue?S="This license does not exist.":"disabled"===s.issue?S="This license has been disabled.":"item_name_mismatch"===s.issue?S="This license seems to be for a different plugin... isn't it? :)":"forced"===s.issue?S="ABC":(S=React.createElement("span",null,"There is an unknown error related to the system or this serial key. Really sorry about this! Make sure your security plugins and systems are off temporarily. If you are still experiencing an issue, please ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://meowapps.com/contact/"},"contact us"),"."),console.error({license:s})):S="Unknown error :(");var T=React.createElement(R.z,{title:"Pro Version (Not Installed)",className:"primary"},"You will find more information about the Pro Version ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://meowapps.com"},"here"),". If you actually bought the Pro Version already, please remove the current plugin and download the Pro Version from your account at ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://meowapps.com/"},"Meow Apps"),"."),N=React.createElement(R.z,{title:"Pro Version (".concat(_,")"),busy:t,className:"primary"},!v&&!(s&&s.key===p)&&React.createElement(React.Fragment,null,React.createElement("div",{style:{marginBottom:10}},"License Key:"),React.createElement(Re.A,{id:"mfrh_pro_serial",name:"mfrh_pro_serial",disabled:t,value:p,onChange:function(e){return h(e)},placeholder:"Type your license key..."}),React.createElement(m.s,{p:!0},"Insert your serial key above. If you don't have one yet, you can get one ",React.createElement("a",{href:"https://meowapps.com"},"here"),". If there was an error during the validation, try the ",React.createElement("i",null,"Retry")," to ",React.createElement("i",null,"validate")," button.")),s&&!x&&React.createElement(Ne.X,{variant:"danger"},S),(v||s)&&x&&React.createElement(Ne.X,{variant:"success"},S),React.createElement("div",{style:{marginTop:15,display:"flex",justifyContent:"end"}},s&&!x&&React.createElement(w.M,{className:"secondary",disabled:t||!p,onClick:b},"Retry to validate"),s&&s.key===p&&React.createElement(w.M,{className:"secondary",disabled:t||!p,onClick:g},"Remove License"),React.createElement(w.M,{disabled:t||!p||s&&s.key===p,onClick:b},"Validate License"),a&&!x&&React.createElement(w.M,{disabled:t||!p||s&&s.key===p,onClick:E,className:"danger"},"Force License")),React.createElement(Te.n,{isOpen:"licenseAdded"===l,title:"Thank you :)",content:"The Pro features have been enabled. This page should be now reloaded.",okButton:{label:"Reload",onClick:function(){return location.reload()}}}),React.createElement(Te.n,{isOpen:"licenseRemoved"===l,title:"Goodbye :(",content:"The Pro features have been disabled. This page should be now reloaded.",okButton:{label:"Reload",onClick:function(){return location.reload()}}}));return I?N:T};const{__:Ge}=wp.i18n,Be={};Be.COMMON={GENERAL:Ge("General","ai-engine"),MODULES:Ge("Modules","ai-engine"),CLIENT_MODULES:Ge("Client Modules","ai-engine"),BACKEND_MODULES:Ge("Admin Modules","ai-engine"),SERVER_MODULES:Ge("Server Modules","ai-engine"),ADVISOR:Ge("Advisor","ai-engine"),SETTINGS:Ge("Settings","ai-engine"),CHATBOT:Ge("Chatbot","ai-engine"),CHATBOTS:Ge("Chatbots","ai-engine"),CHATBOT_HELP:Ge("Highly customizable chatbot.","ai-engine"),STATISTICS:Ge("Statistics","ai-engine"),STYLE:Ge("Style","ai-engine"),ENABLE:Ge("Enable","ai-engine"),NAME:Ge("Name","ai-engine"),SUBMIT:Ge("Submit","ai-engine"),MODEL:Ge("Model","ai-engine"),AI_MODEL:Ge("AI Model","ai-engine"),TEMPERATURE:Ge("Temperature","ai-engine"),MAX_TOKENS:Ge("Max Tokens","ai-engine"),CONTEXT_MAX_LENGTH:Ge("Context Max Length","ai-engine"),STOP_SEQUENCE:Ge("Stop Sequence","ai-engine"),MODE:Ge("Mode","ai-engine"),CONTEXT:Ge("Context","ai-engine"),IMAGES_NUMBER:Ge("Number of Images","ai-engine"),AVATAR:Ge("Avatar","ai-engine"),AI_NAME:Ge("AI Name","ai-engine"),GUEST_NAME:Ge("Guest Name","ai-engine"),USER_NAME:Ge("User Name","ai-engine"),PLACEHOLDER:Ge("Placeholder","ai-engine"),START_SENTENCE:Ge("Start Sentence","ai-engine"),SEND:Ge("Send","ai-engine"),CLEAR:Ge("Clear","ai-engine"),SYSTEM_NAME:Ge("System Name","ai-engine"),ID:Ge("ID","ai-engine"),POPUP:Ge("Popup","ai-engine"),POSITION:Ge("Position","ai-engine"),VOICE:Ge("Voice","ai-engine"),ICON:Ge("Icon","ai-engine"),ICON_TEXT:Ge("Icon Text","ai-engine"),ICON_TEXT_DELAY:Ge("Icon Text Delay","ai-engine"),FULL_SCREEN:Ge("Full Screen","ai-engine"),CASUALLY_FINE_TUNED:Ge("Casually Fine-Tuned","ai-engine"),CONTENT_AWARE:Ge("Content Aware","ai-engine"),SPACING:Ge("Spacing","ai-engine"),BORDER_RADIUS:Ge("Border Radius","ai-engine"),FONT_SIZE:Ge("Font Size","ai-engine"),FONT_COLOR:Ge("Font Color","ai-engine"),BACK_PRIMARY_COLOR:Ge("Back Primary Color","ai-engine"),BACK_SECONDARY_COLOR:Ge("Back 2nd Color","ai-engine"),HEADER_BUTTONS_COLOR:Ge("Header Buttons Color","ai-engine"),HEADER_BACKGROUND_COLOR:Ge("Header Back Color","ai-engine"),HEADER_SUBTITLE:Ge("Header Subtitle","ai-engine"),BUBBLE_COLOR:Ge("Bubble Color","ai-engine"),BACK_USER_COLOR:Ge("Back User Color","ai-engine"),BACK_AI_COLOR:Ge("Back AI Color","ai-engine"),BACK_AI_SECONDARY_COLOR:Ge("Back AI 2nd Color","ai-engine"),AVATAR_MESSAGE_BACKGROUND_COLOR:Ge("Message Background","ai-engine"),AVATAR_MESSAGE_FONT_COLOR:Ge("Message Color","ai-engine"),POPUP_ICON:Ge("Popup Icon","ai-engine"),CUSTOM_ICON:Ge("Custom Icon (URL or Emoticon)","ai-engine"),FEATURES:Ge("Features","ai-engine"),TIMEFRAME:Ge("Timeframe","ai-engine"),ABSOLUTE:Ge("Absolute","ai-engine"),NONE:Ge("None","ai-engine"),EDITORS_ADMINS:Ge("Editors & Admins","ai-engine"),ADMINS_ONLY:Ge("Admins Only","ai-engine"),CREDITS:Ge("Credits","ai-engine"),TYPE:Ge("Type","ai-engine"),USERS:Ge("Users","ai-engine"),USER:Ge("User","ai-engine"),GUESTS:Ge("Guests","ai-engine"),GUEST:Ge("Guest","ai-engine"),OPENAI:Ge("Open AI","ai-engine"),LICENSE_TAB:Ge("License","ai-engine"),FINETUNES:Ge("Finetunes","ai-engine"),MODELS:Ge("Models","ai-engine"),FILES:Ge("Files","ai-engine"),ASSISTANT:Ge("Assistant","ai-engine"),ASSISTANTS:Ge("Assistants","ai-engine"),UTILITIES:Ge("Utilities","ai-engine"),POSTS_SUGGESTIONS:Ge("AI Copilot, AI Suggestions, Magic Wands","ai-engine"),POSTS_SUGGESTIONS_HELP:Ge("Tools to brainstorm/write faster and better.","ai-engine"),GENERATORS:Ge("Generators","ai-engine"),CONTENT_GENERATOR:Ge("Content Generator","ai-engine"),CONTENT_GENERATOR_HELP:Ge("Generate articles. Support templates.","ai-engine"),IMAGES_GENERATOR:Ge("Images Generator","ai-engine"),IMAGES_GENERATOR_HELP:Ge("Generate images. Support templates.","ai-engine"),PLAYGROUND:Ge("Playground","ai-engine"),PLAYGROUND_HELP:Ge("Play with AI or let it perform various tasks for you. Support templates.","ai-engine"),FORMS:Ge("Forms","ai-engine"),FORMS_HELP:Ge("Build AI forms. Based on fields, users will be given answers or suggestions.","ai-engine"),STATISTICS_HELP:Ge("Track AI interactions, check statistics, set limits, and more!","ai-engine"),CLIENT_DEBUG:Ge("Client Debug","ai-engine"),CLIENT_DEBUG_HELP:Ge("Debugging information will be displayed in the console.","ai-engine"),SERVER_DEBUG:Ge("Server Debug","ai-engine"),SERVER_DEBUG_HELP:Ge("Debugging information from your server will be displayed in a console on this tab.","ai-engine"),CLEAR_LOGS:Ge("Clear Logs","ai-engine"),REFRESH_LOGS:Ge("Refresh Logs","ai-engine"),API_KEY:Ge("API Key","ai-engine"),USAGE_HELP:Ge('Those values are for information only. They are not accurate and should not be used for billing purposes. The calculation of the number of tokens and the cost is very different from one service to another, and AI Engine does its best to estimate it. For the exact amounts, please check your accounts at the respective services. For OpenAI, you can check your <a href="https://platform.openai.com/usage" target="_blank">OpenAI account</a>.',"ai-engine"),RESET_USAGE_SURE:Ge("Are you sure you want to reset the usage data?","ai-engine"),USAGE_PRO_HELP:Ge('If you would like to have better control on the amounts, add conditions or set limits to the usage of the AI, consider <a href="https://meowapps.com/ai-engine/" target="_blank">AI Engine Pro</a>.',"ai-engine"),LANGUAGE:Ge("Language","ai-engine"),HIDE:Ge("Hide","ai-engine"),SHOW:Ge("Show","ai-engine"),CONTENT:Ge("Content","ai-engine"),IMAGES:Ge("Images","ai-engine"),IMAGES_AND_FILES:Ge("Images & Files","ai-engine"),EXCERPT:Ge("Excerpt","ai-engine"),GENERATE:Ge("Generate","ai-engine"),MODEL_PARAMS:Ge("Model Params","ai-engine"),CONTEXT_PARAMS:Ge("Context Params","ai-engine"),PROMPT:Ge("Prompt","ai-engine"),PROMPTS:Ge("Prompts","ai-engine"),LABEL:Ge("Label","ai-engine"),SYSTEM:Ge("System","ai-engine"),SHORTCODE:Ge("Shortcode","ai-engine"),SHORTCODES:Ge("Shortcodes","ai-engine"),RESOLVE:Ge("Resolve","ai-engine"),MAX_MESSAGES:Ge("Max Messages","ai-engine"),INPUT_MAX_LENGTH:Ge("Input Max Length","ai-engine"),COMPLIANCE_TEXT:Ge("Compliance Text","ai-engine"),MODERATION:Ge("Moderation","ai-engine"),MODERATION_HELP:Ge("Moderation features with AI.","ai-engine"),FORMATTING:Ge("Formatting","ai-engine"),FORMATTING_HELP:Ge("Format the reply from AI into HTML. This is already done automatically if Markdown is detected in the reply.","ai-engine"),LOGS:Ge("Logs","ai-engine"),CODE:Ge("Code","ai-engine"),EMBEDDINGS:Ge("Embeddings","ai-engine"),EMBEDDINGS_HELP:Ge("Create searchable data that can be reused to feed the chatbot and other AI or UI elements.","ai-engine"),OTHERS:Ge("Others","ai-engine"),PINECONE_APIKEY_HELP:Ge('You can get your API Keys in your <a href="https://app.pinecone.io/organizations/keys" target="_blank">Pinecone Account</a>.',"ai-engine"),QDRANT_APIKEY_HELP:Ge('You can get your API Keys in your <a href="https://cloud.qdrant.io/accounts/" target="_blank">Qdrant Account</a>.',"ai-engine"),SERVER:Ge("Server","ai-engine"),PINECONE_SERVER_HELP:Ge("The URL of your host (check your Indexes).","ai-engine"),PINECONE_NAMESPACE_HELP:Ge("The namespace is used to separate the data from other data. This allows you to use the same server/index on more than one website. This is optional.","ai-engine"),QDRANT_SERVER_HELP:Ge("The URL of your cluster (known as Cluster URL).","ai-engine"),QDRANT_COLLECTION_HELP:Ge("The collection keeps data apart so you can use one cluster for many websites. If there's no collection, Qdrant makes one with 1536 dimensions and uses cosine similarity.","ai-engine"),COST:Ge("Cost","ai-engine"),USAGE:Ge("Usage","ai-engine"),TRANSCRIPTION:Ge("Transcription","ai-engine"),TRANSCRIPTION_HELP:Ge("Introduces a 'Transcribe' tab to easily transform audio/images into text and get AI answers in JSON format.","ai-engine"),AUDIO_TRANSCRIPTION:Ge("Audio-to-Text","ai-engine"),IMAGE_TRANSCRIPTION:Ge("Image-to-Text","ai-engine"),AUDIO_TO_TEXT:Ge("Audio  Text","ai-engine"),IMAGE_TO_TEXT:Ge("Image  Text","ai-engine"),EMBEDDINGS_ENV:Ge("Environment","ai-engine"),EMBEDDINGS_INDEX:Ge("Index","ai-engine"),NAMESPACE:Ge("Namespace","ai-engine"),NAMESPACES:Ge("Namespaces","ai-engine"),NAMESPACE_HELP:Ge("The namespace is used to separate the data from other data. This allows you to use the same index on more than one website.","ai-engine"),NAMESPACES_HELP:Ge("Enter the namespaces you would like to use on this site, separated by commas.","ai-engine"),ERROR:Ge("Error","ai-engine"),RETRY:Ge("Retry","ai-engine"),AUTO_RETRY:Ge("Auto Retry","ai-engine"),SKIP:Ge("Skip","ai-engine"),AUTO_SKIP:Ge("Auto Skip","ai-engine"),STOP:Ge("Stop","ai-engine"),AUTO_RETRY_DESCRIPTION:Ge("Auto Retry retries actions up to 10 times with increasing delay to avoid timeouts.","ai-engine"),WIDTH:Ge("Width","ai-engine"),MAX_HEIGHT:Ge("Max Height","ai-engine"),APPEARANCE:Ge("Appearance","ai-engine"),THRESHOLDS:Ge("Thresholds","ai-engine"),DASHBOARD:Ge("Dashboard","ai-engine"),ADVANCED:Ge("Advanced","ai-engine"),DISCUSSIONS:Ge("Discussions","ai-engine"),DISCUSSION_TITLES:Ge("Discussion Titles","ai-engine"),ROWS:Ge("Rows","ai-engine"),POST_TYPE:Ge("Post Type","ai-engine"),GENERATE_CONTENT:Ge("Generate Content","ai-engine"),GENERATE_IMAGES:Ge("Generate Images","ai-engine"),ADMIN_BAR:Ge("Admin Bar","ai-engine"),ADMIN_TOOLS:Ge("Admin Tools","ai-engine"),REFRESH:Ge("Refresh","ai-engine"),DELETE:Ge("Delete","ai-engine"),DELETE_ALL:Ge("Delete All","ai-engine"),DELETE_SELECTED:Ge("Delete Selected","ai-engine"),OPENAI_ORGANIZATION_ID:Ge("Organization ID","ai-engine"),OPENAI_AZURE_API_KEY:Ge("API Key","ai-engine"),OPENAI_AZURE_DEPLOYMENT_NAME:Ge("Deployment Name","ai-engine"),OPENAI_AZURE_DEPLOYMENTS:Ge("Deployments","ai-engine"),ENDPOINT:Ge("Endpoint","ai-engine"),HUGGINGFACE_MODELS:Ge("Models","ai-engine"),HUGGINGFACE_MODEL_NAME:Ge("Name","ai-engine"),HUGGINGFACE_MODEL_URL:Ge("API URL","ai-engine"),THEME:Ge("Theme","ai-engine"),THEMES:Ge("Themes","ai-engine"),BANNED_WORDS:Ge("Banned Words","ai-engine"),WORD_BOUNDARIES:Ge("Word Boundaries","ai-engine"),IGNORE:Ge("Ignore","ai-engine"),BANNED_IPS:Ge("Banned IPs","ai-engine"),SECURITY:Ge("Security","ai-engine"),POST_TYPES:Ge("Post Types","ai-engine"),COPY_BUTTON:Ge("Copy Button","ai-engine"),AI_AVATAR:Ge("AI Avatar","ai-engine"),GUEST_AVATAR:Ge("Guest Avatar","ai-engine"),SITE_WIDE_CHATBOT:Ge("Site-Wide Chatbot","ai-engine"),QUERIES_DATA:Ge("Queries Data","ai-engine"),QUERIES_FORMS_DATA:Ge("Queries Form Data","ai-engine"),WEBSPEECH_API:Ge("Web Speech API","ai-engine"),VIRTUAL_KEYBOARD:Ge("Virtual Keyboard","ai-engine"),GDPR_CONSENT:Ge("GDPR Consent","ai-engine"),GDPR_TEXT:Ge("GDPR Text","ai-engine"),GDPR_BUTTON:Ge("GDPR Button","ai-engine"),FIX:Ge("Fix","ai-engine"),SPEECH_RECOGNITION:Ge("Speech Recognition","ai-engine"),SPEECH_SYNTHESIS:Ge("Speech Synthesis","ai-engine"),QUERY:Ge("Query","ai-engine"),QUERIES:Ge("Queries","ai-engine"),LOCAL_MEMORY:Ge("Local Memory","ai-engine"),ACTIONS:Ge("Actions","ai-engine"),RESET:Ge("Reset","ai-engine"),INCIDENTS_OPENAI:Ge("Incidents (OpenAI)","ai-engine"),PREVIEW:Ge("Preview","ai-engine"),LEGACY_FORMS:Ge("Legacy Forms","ai-engine"),LEGACY_FEATURES:Ge("Legacy Features","ai-engine"),DUPLICATE:Ge("Duplicate","ai-engine"),CHATBOT_EDITOR:Ge("Chatbot Editor","ai-engine"),THEME_EDITOR:Ge("Theme Editor","ai-engine"),STREAMING:Ge("Streaming","ai-engine"),SYNTAX_HIGHLIGHT:Ge("Syntax Highlight","ai-engine"),DATA_NOT_AVAILABLE:Ge("Data not available.","ai-engine"),EXPORT:Ge("Export","ai-engine"),IMPORT:Ge("Import","ai-engine"),MODIFY_EMBEDDING:Ge("Modify Embedding","ai-engine"),ADD_EMBEDDING:Ge("Add Embedding","ai-engine"),DEV_TOOLS:Ge("Dev Tools","ai-engine"),SINGLE_GENERATE:Ge("Single Generate","ai-engine"),PUBLIC_API:Ge("Public API","ai-engine"),USER_INTERFACE:Ge("User Interface","ai-engine"),INTRO_MESSAGE:Ge("Intro Message","ai-engine"),ADDONS:Ge("Add-ons","ai-engine"),AI_ENVIRONMENT_DEFAULTS:Ge("Default Environments for AI","ai-engine"),ENVIRONMENTS_FOR_AI:Ge("Environments for AI","ai-engine"),ENVIRONMENT_ID:Ge("Environment ID","ai-engine"),EMBEDDINGS_ENVIRONMENT_DEFAULT:Ge("Default Embeddings Environment","ai-engine"),ENVIRONMENT:Ge("Environment","ai-engine"),PLUGIN_DATA:Ge("Plugin Data","ai-engine"),PLUGIN_DATA_DESCRIPTION:Ge("The database and all the options of the plugin will be removed on uninstall.","ai-engine"),RESET_LIMITS:Ge("Reset Limits","ai-engine"),VISION:Ge("Vision","ai-engine"),FILE_SEARCH:Ge("File Search","ai-engine"),PROMPT_TO_JSON:Ge("Prompt  JSON","ai-engine"),RESOLUTION:Ge("Resolution","ai-engine"),DEFAULT:Ge("Default","ai-engine"),REFRESH_MODELS:Ge("Refresh Models","ai-engine"),AUDIO:Ge("Audio","ai-engine"),JSON:Ge("JSON","ai-engine"),AI_ENVIRONMENT:Ge("AI Environment","ai-engine"),OVERRIDE_DEFAULTS:Ge("Override Defaults","ai-engine"),REGION:Ge("Region","ai-engine"),PROJECT_ID:Ge("Project ID","ai-engine"),BEARER_TOKEN:Ge("Bearer Token","ai-engine"),DIMENSIONS:Ge("Dimensions","ai-engine"),MIN_SCORE:Ge("Min Score","ai-engine"),MAX_SELECT:Ge("Max Results","ai-engine"),QDRANT_COLLECTION:Ge("Collection","ai-engine"),INSTRUCTIONS:Ge("Instructions","ai-engine"),FUNCTIONS:Ge("Functions","ai-engine"),BUBBLE:Ge("Bubble","ai-engine"),TABS:Ge("Tabs","ai-engine"),DROPDOWN:Ge("Dropdown","ai-engine"),CHATBOT_SELECT:Ge("Chatbot Select","ai-engine")},Be.FORMS={PROMPT_INFO:Ge("The template of your prompt. To re-use the data entered by the user, use the name of that field between curly braces. Example: Recommend me {MUSIC_TYPE} artists. You can also use an ID as an input, like this: ${#myfield}. Finally, if you wish the output to be formatted, add: 'Use Markdown.'.\"","ai-engine"),OUTPUT:Ge("Output","ai-engine"),OUTPUT_ELEMENT:Ge("Output Element","ai-engine"),OUTPUT_ELEMENT_INFO:Ge("The result will be written to this element. If you wish to simply display the result in an Output Block, use its ID. For instance, if its ID is mwai-666, use '#mwai-666'.","ai-engine")},Be.HELP={TEMPERATURE:Ge("Between 0 and 1. Higher values means the model will take more risks.","ai-engine"),MAX_TOKENS:Ge("The maximum number of tokens to generate. The model will stop generating once it hits this limit.","ai-engine"),STOP_SEQUENCE:Ge("The sequence of tokens that will cause the model to stop generating text. You absolutely need this with fine-tuned models.","ai-engine"),COST:Ge("Keeps track of the current costs.","ai-engine"),RESOLVE_SHORTCODE:Ge("Will resolve the shortcode in your content when needed (Content-Aware will use this, for instance).","ai-engine"),FINETUNES:Ge("Train your own AI models.","ai-engine"),DISCUSSIONS:Ge("Keep the conversations and enable browsing them via the Conversations tab.","ai-engine"),DISCUSSION_TITLES:Ge("Generate titles for the discussions automatically with AI.","ai-engine"),AZURE_DEPLOYMENTS:Ge("Add your deployments below and define what kind of model they are.","ai-engine"),BANNED_WORDS:Ge("Reject queries containing these words; separate with commas.","ai-engine"),WORD_BOUNDARIES:Ge("Ignore standard word separation (space) and match banned words anywhere in the text.","ai-engine"),BANNED_IPS:Ge("Block access from specified IP addresses or ranges using CIDR notation; separate with commas.","ai-engine"),VIRTUAL_KEYBOARD:Ge("Prevent the virtual keyboard from pushing the chatbot up on mobile devices. This is experimental and might cause issues.","ai-engine"),GDPR_CONSENT:Ge("If enabled, the user will have to accept the conditions before using the chatbot.","ai-engine"),POST_TYPES:Ge("Enable for these post types; separate with commas.","ai-engine"),POST_STATUS:Ge("Enable for these post statuses (publish, draft, future, private, etc); separate with commas.","ai-engine"),POST_CATEGORIES:Ge("Enable for these categories (slugs); separate with commas. If none, it will be enabled for all.","ai-engine"),CONTEXT_MAX_LENGTH:Ge("Truncate the context (Content-Aware, Embeddings, etc) to make sure it is below this number of characters.","ai-engine"),MAX_MESSAGES:Ge("Maximum number of historical messages that is sent to the AI model.","ai-engine"),INPUT_MAX_LENGTH:Ge("Maximum number of characters that can be input by the user.","ai-engine"),STATISTICS:Ge(" In the Queries tab, you can browse through all your users' activity. Contextual data is excluded unless you activate the options below. Make sure your users are aware of this.","ai-engine"),QUERIES_DATA:Ge("Record the queries and their replies.","ai-engine"),QUERIES_FORMS_DATA:Ge("Capture form data neatly for simple reuse.","ai-engine"),SPEECH_RECOGNITION:Ge("Enable speech-to-text. Depends on the browser and OS used by the user.","ai-engine"),SPEECH_SYNTHESIS:Ge("Enable text-to-speech.","ai-engine"),CUSTOM_SHORTCODE:Ge("Prefer the above version. If you need many chatbots, you can custom shortcodes, like the one below. Custom shortcodes are based on the default chatbot, and their attributes override the default ones.","ai-engine"),USER_FILTER:Ge("Type an User ID, or an IP.","ai-engine"),STREAMING:Ge("The AI's response will appear as it's being created. Be cautious: this feature's ability to manage statistics, limits, and filters is still in its beta phase.","ai-engine"),SYNTAX_HIGHLIGHT:Ge("Enable syntax highlighting for the code blocks.","ai-engine"),DEV_TOOLS:Ge("Enable a new tab with debugging tools. For developers only.","ai-engine"),PUBLIC_API:Ge("Enable the Public REST API.","ai-engine"),INTRO_MESSAGE:Ge("Enable the introduction text at the top of this page.","ai-engine"),ADDONS:Ge("Enable the AI Addons section under the Meow Apps menu.","ai-engine"),OPENAI_API_KEY:Ge('You can get your API Keys in your <a href="https://beta.openai.com/account/api-keys" target="_blank">OpenAI Account</a>.',"ai-engine"),OPENAI_ORGANIZATION_ID:Ge('You can link this environment to an <a href="https://platform.openai.com/account/organization" target="_blank">Organization</a>. This is optional.',"ai-engine"),AZURE_API_KEY:Ge('You can get your API Keys in your <a href="https://oai.azure.com/portal" target="_blank">Azure Account</a>.',"ai-engine"),ANTHROPIC_API_KEY:Ge('You can get your API Keys in your <a href="https://console.anthropic.com/settings/keys" target="_blank">Anthropic Account</a>.',"ai-engine"),OPENROUTER_API_KEY:Ge('You can get your API Keys in your <a href="https://openrouter.ai/keys" target="_blank">OpenRouter Account</a>.',"ai-engine"),QDRANT:Ge('Use the code <b>#AIENGINE5</b> when you <a href="https://qdrant.to/cloud" target="_blank">Create a Qdrant Account</a>. You will get 5% off.',"ai-engine"),ASSISTANTS:Ge("The Assistants API is designed to help developers build powerful AI assistants capable of performing a variety of tasks.","ai-engine"),ASSISTANTS_INTRO:Ge('The Assistants API is designed to help developers build powerful AI assistants capable of performing a variety of tasks. To create them, head to the <a href="https://beta.openai.com/assistants" target="_blank">OpenAI Assistants</a> dashboard, then <b>Refresh Assistants</b> here. You can use an assistant in your chatbots by switching the <b>Mode</b> to <b>Assistant</b>.',"ai-engine"),ASSISTANTS_WARNINGS:Ge('Assistants are also <a href="https://platform.openai.com/docs/api-reference/assistants" target="_blank">in beta</a>, both for OpenAI and AI Engine. OpenAI did not add streaming support for them yet. Pricing is still quite unclear and <a href="https://openai.com/pricing" target="_blank">tricky</a>. AI Engine can only perform an estimation. If you want to discuss assistants with other users, visit the <a href="https://discord.gg/bHDGh38" target="_blank">Meow Apps Discord Server</a>.',"ai-engine"),BEARER_TOKEN:Ge('The Public API will be usable by using this Bearer Token. If not set, you will need to <a href="https://meowapps.com/ai-engine/api/#public-rest-api" target="_blank">build your own authentication</a> by using the <i>mwai_allow_public_api</i> filter.',"ai-engine"),NO_EMBEDDINGS_RESULTS:Ge("No results for this search. Make sure the Minimum Score is not too high.","ai-engine"),NO_EMBEDDINGS_ROWS:Ge("No embeddings yet in this environment.","ai-engine"),MIN_SCORE:Ge("The minimum score the embeddings need to have to be returned. Between 0 and 100 and defaults to 35.","ai-engine"),MAX_SELECT:Ge("The maximum number of embeddings to return and to use as context. Between 1 and 100 and defaults to 10.","ai-engine"),FUNCTIONS:Ge("Select the functions to make available for the AI model's choice. It will use them to enhance responses and perform specific actions. This feature is known as Function Calling or Tools.","ai-engine"),FUNCTIONS_UNAVAILABLE:Ge('There are no functions available. Please use <a href="https://wordpress.org/plugins/code-engine/" target="_blank">Code Engine</a> to add some. The Pro Version of AI Engine is also required for this feature.',"ai-engine"),ADVISOR:Ge("In your Dashboard will be displayed daily recommendations tailored to your WordPress setup. Admins only.","ai-engine"),BUBBLE:Ge("The popup will be displayed as a bubble.","ai-engine"),ICON_TEXT:Ge("If set, this text will appear next to the icon/bubble.","ai-engine"),ICON_TEXT_DELAY:Ge("The delay before the text appears.","ai-engine"),CHATBOT_SELECT:Ge("Choose how you want to select the chatbot. By default, tabs are used, but you can also use a filterable dropdown if you have many chatbots.","ai-engine")},Be.SETTINGS={AI_ENV_SETUP:Ge('To leverage the functionalities of AI Engine, it needs to be connected directly to AI services. We recommend starting with OpenAI. Create an account and generate an API Key by visiting the <a href="https://beta.openai.com/account/api-keys" target="_blank">OpenAI</a> website. Once obtained, navigate to the <b>Settings</b> tab and input your OpenAI API Key in the "Environments for AI" section.',"ai-engine"),PINECONE_SETUP:Ge('You choose to use Embeddings. To use them, you need to a Pinecone account. Visit the <a href="https://app.pinecone.io" target="_blank">Pinecone</a> website to create an account, then insert your Pinecone API Key in the <b>Settings</b> tab.',"ai-engine"),INTRO:Ge('Boost your WordPress with AI, now! Please start with our <a href="https://meowapps.com/ai-engine/tutorial/" target="_blank">tutorial</a>. Then move to our <a href="https://docs.meowapps.com/" target="_blank">documentation</a>. Have a look at our <a href="https://meowapps.com/products/category/ai-add-ons/" target="_blank">add-ons</a>. And make sure you read the <a href="https://meowapps.com/ai-engine/disclaimer/" target="_blank">disclaimer</a>. Have fun! ',"ai-engine"),MODULES_INTRO:Ge("To avoid cluttering the UI and your WP, only enable the features you need.","ai-engine"),ALERT_INJECT_BUT_NO_POPUP:Ge("You choose to inject the chatbot in your website. You probably also want to use the chatbot in a Popup.","ai-engine"),ALERT_CASUALLY_BUT_NO_FINETUNE:Ge("Normally, you should not check the Casually Fine Tuned option with a non-finetuned model. Make sure that's what you want.","ai-engine"),ALERT_CONTENTAWARE_BUT_NO_CONTENT:Ge('Content Aware requires your Context to use the {CONTENT} placeholder. It will be replaced by the content of page the chatbot is on. More info <a href="https://meowapps.com/ai-engine/tutorial/#contextualization" target="_blank">here</a>.',"ai-engine"),SET_AS_DEFAULT_PARAMETERS:Ge("Set as Default Parameters","ai-engine"),SET_AS_DEFAULT_PARAMETERS_HELP:Ge("Set the parameters above as the default parameters for the chatbot. You can then use the shortcode [mwai_chat] anywhere on your website.","ai-engine"),INJECT_DEFAULT_CHATBOT:Ge("Inject Default Chatbot in Entire Website","ai-engine"),INJECT_DEFAULT_CHATBOT_HELP:Ge("Inject the chatbot [mwai_chat] in the entire website.","ai-engine"),CHATGPT_STYLE_INTRO:Ge('Keep in mind that you can also style the chatbot (or a specific chatbot, if you use many) by injecting CSS. Have a look <a target="_blank" href="https://meowapps.com/ai-engine/tutorial/#apply-custom-style-to-the-chatbot">here</a>. More information in the <a target="_blank" href="https://meowapps.com/ai-engine/faq">FAQ</a>.',"ai-engine"),TYPEWRITER_EFFECT:Ge("Typewriter Effect","ai-engine"),TYPEWRITER_EFFECT_HELP:Ge("The reply from AI will be typewrited. This delays the final output! Absolutely not recommended. Please use <b>Streaming</b> instead.","ai-engine"),CHATBOT_MODERATION_HELP:Ge("If the conversation seems offensive, the chatbot will reject it.","ai-engine"),CUSTOM_URL:Ge("Custom URL","ai-engine"),ASSISTANT_NO_FILE_SEARCH:Ge('This assistant does not support File Search. You can activate it on the <a href="https://platform.openai.com/assistants" target="_blank">OpenAI Assistants</a> dashboard. Then, use the Refresh button in the Assistants tab.',"ai-engine"),ASSISTANT_FILE_SEARCH:Ge("File Search will be used when the users upload documents. If the user uploads images, those will be handled by AI Vision if the model supports it and if it is enabled.","ai-engine")},Be.CHATBOT={CHATBOT_BUILDER:Ge("Chatbot Builder","ai-engine"),RESET_PARAMS:Ge("Reset Parameters","ai-engine")},Be.STATISTICS={ABSOLUTE_HELP:Ge("Using Absolute, Day represents <i>today</i>. Otherwise, the <i>past 24 hours</i>. Same logic applies to the other timeframes.","ai-engine"),NO_CREDITS_MESSAGE:Ge("Message for No Credits","ai-engine"),FULL_ACCESS_USERS:Ge("Full-Access Users","ai-engine"),ENABLE_LIMITS:Ge("Enable Limits","ai-engine")},Be.CONTENT_GENERATOR={INTRO:Ge("The Content Generator is a powerful tool that can generate content for you. It can be used to generate articles, emails, or even code. It can also be used to generate content for your chatbot. <b>Let me know if there are any new features you would like to see!</b> Have fun ","ai-engine"),TITLE_MISSING:Ge("Title is missing!","ai-engine"),SECTIONS_MISSING:Ge("Sections are missing!","ai-engine"),SINGLE_GENERATE:Ge("Single Generate","ai-engine"),BULK_GENERATE:Ge("Bulk Generate","ai-engine"),CONTENT_PARAMS:Ge("Content Params","ai-engine"),POST_PARAMS:Ge("Post Params","ai-engine"),CONTENT_PARAMS_INTRO:Ge("Input fields are displayed for certain placeholders used in prompts, such as {LANGUAGE} or {WRITING_TONE}","ai-engine"),CUSTOM_LANGUAGE:Ge("Custom Language","ai-engine"),WRITING_STYLE:Ge("Writing Style","ai-engine"),WRITING_TONE:Ge("Writing Tone","ai-engine"),CUSTOM_LANGUAGE_HELP:Ge('All the languages are <i>somehow</i> supported by AI. <a href="https://meowapps.com/ai-engine/faq/#languages" target="_blank">Learn more</a>.',"ai-engine"),MODEL_HELP:Ge("It is recommended to use Turbo or GPT-4 to write texts.","ai-engine"),PROMPTS_INTRO:Ge("Prompts represent the exact request sent to the AI. The variables between curly braces will be replaced by the content of the corresponding field. Prompts are saved in your templates.","ai-engine"),PROMPT_TITLE:Ge("Prompt for <b>Title</b>","ai-engine"),PROMPT_SECTIONS:Ge("Prompt for <b>Sections</b>","ai-engine"),PROMPT_CONTENT:Ge("Prompt for <b>Content</b>","ai-engine"),PROMPT_EXCERPT:Ge("Prompt for <b>Excerpt</b>","ai-engine"),POST_CREATED:Ge("Post Created","ai-engine"),POST_CREATED_AS_DRAFT:Ge("The post was created as a draft.","ai-engine"),CONTENT_HELP:Ge('You can modify the content before using "Create Post". Markdown is supported, and will be converted to HTML when the post is created.',"ai-engine"),SECTIONS_HELP:Ge('Add, rewrite, remove, or reorganize those sections as you wish before (re)clicking on "Generate Content". Markdown format is recommended.',"ai-engine"),GENERATE_EXCERPT:Ge("Generate Excerpt","ai-engine"),GENERATE_CONTENT:Ge("Generate Content","ai-engine"),GENERATE_SECTIONS:Ge("Generate Sections","ai-engine"),PARAGRAPHS_PER_SECTION:Ge("# of Paragraphs per Section","ai-engine"),SECTIONS:Ge("Sections","ai-engine"),TOPICS_HELP:Ge("Write or paste your topics below. Each line will be used as a topic. The same <b>Params</b> and <b>Prompts</b> will be used as with the <b>Single Generate</b>, so make sure you get satisfying results with it first. This <b>takes time</b>, so relax and enjoy some coffee  and tea  :)","ai-engine"),GENERATED_POSTS:Ge("Generated Posts","ai-engine"),GENERATE_ALL:Ge("Generate All","ai-engine"),EDIT_POST:Ge("Edit Post","ai-engine"),CREATE_POST:Ge("Create Post","ai-engine"),TITLE_TOO_SHORT:Ge("The title is too short. It should be at least 3 words.","ai-engine"),TITLE_TOO_SHORT_2:Ge("The title is too short.  It should be at least 40 characters.","ai-engine"),TITLE_TOO_LONG:Ge("The title is too long. It should be less than 8 words.","ai-engine"),TITLE_TOO_LONG_2:Ge("The title is too long. It should be less than 70 characters.","ai-engine")},Be.TEMPLATES={TEMPLATE:Ge("Template","ai-engine"),TEMPLATES:Ge("Templates","ai-engine"),DELETE_CONFIRM:Ge("Are you sure you want to delete this template?","ai-engine"),DELETE_ALL_CONFIRM:Ge("Are you sure you want to delete all the templates?","ai-engine"),NEW_TEMPLATE_NAME:Ge("New Template","ai-engine"),EDIT:Ge("EDIT","ai-engine")},Be.PLAYGROUND={INTRO:Ge("Welcome to the AI Playground! Here, you can play with different AI models and ask the UI to perform various tasks for you. You can ask it to write, rewrite, or translate an article, categorize words or elements into groups, write an email, etc. <b>Let me know if there are any new features you would like to see!</b> Have fun ","ai-engine"),PROMPT:Ge("Query / Prompt","ai-engine"),REPLY:Ge("Reply","ai-engine")},Be.ALERTS={FINETUNING_STARTED:Ge("Fine-tuning started! Check its progress in the Models section. Depending on your dataset size, it may take a while (from a few minutes to days).","ai-engine"),RESET_BUILDER:Ge("This will delete all the rows in the builder. Are you sure?","ai-engine"),DELETE_FINETUNE:Ge("You are going to delete this fine-tune. Are you sure?\n\nPlease note that it will take a while before it is actually deleted. This might be a temporary issue of OpenAI.","ai-engine"),FINETUNE_ALREADY_DELETED:Ge("This fine-tune was already deleted. It will be removed from the list.","ai-engine"),CHECK_CONSOLE:Ge("Error! Check your console for more details.","ai-engine"),DATASET_UPLOADED:Ge("Uploaded successfully! You can now train a model based on this dataset.","ai-engine"),ONLY_SUPPORTS_FILES:Ge("This only supports JSON, JSONL, and CSV files. Check the Instructions section below.","ai-engine"),EMPTY_LINES_DATASET:Ge("Some lines were empty. Make sure the CSV has a header row and that the columns are named 'prompt' and 'completion'. For debugging, an empty line was logged to the console.","ai-engine"),EMPTY_LINES_EMBEDDINGS:Ge("Some lines were empty. Make sure the CSV has a header row and that the columns are named 'title' and 'content'. For debugging, an empty line was logged to the console.","ai-engine"),ARE_YOU_SURE:Ge("Are you sure?","ai-engine")},Be.FINETUNING={MODELS_INTRO:Ge("The AI models you have fine-tuned. To create more, visit <b>Files</b>.","ai-engine"),LEGACY_MODELS_INTRO:Ge('The AI models you have fine-tuned. <b>Do not use legacy fine-tuning anymore (based on models prior to GPT 3.5). Their deprecation has been <a href="https://platform.openai.com/docs/guides/legacy-fine-tuning" target="_blank">announced by OpenAI</a> for January 4th, 2024.</b><br />',"ai-engine"),FILES_INTRO:Ge("The files you have uploaded to OpenAI. To create a new dataset file, switch from <b>Model & Files</b> to <b>Dataset Editor</b>. To train a new model, click on the <i>magic wand</i>.","ai-engine"),MODEL_FINETUNE:Ge("Model Finetune","ai-engine"),MODELS_FILES:Ge("Models & Files","ai-engine"),DATASET_EDITOR:Ge("Dataset Editor","ai-engine"),EDITOR:Ge("Editor","ai-engine"),GENERATOR:Ge("Generator","ai-engine"),HUGE_DATASET_WARNING:Ge("Caution: The data is too large to be saved in your browser's local storage.","ai-engine"),NO_FINETUNES_YET:Ge("No fine-tunes found. Refresh the list, or create a new one (via a dataset).","ai-engine"),CLEAN_MODELS_LIST:Ge("Clean Models List","ai-engine"),DELETED_FINETUNE_ISSUE:Ge("For some reason, OpenAI still return the models even after you deleted them. Don't worry, AI Engine will do the cleanup for you! You can force the cleanup by using this button. It takes a bit of time depending on the total of models you have.","ai-engine")},Be.EMBEDDINGS={EDIT:Ge("EDIT","ai-engine"),AI_SEARCH:Ge("AI SEARCH","ai-engine"),SYNC_POSTS:Ge("Sync Posts","ai-engine"),AUTO_SYNC_POSTS:Ge("Auto-Sync Posts","ai-engine"),AUTO_SYNC_POSTS_DESCRIPTION:Ge("Embeddings will be created, updated or removed based on the activity related to your posts.","ai-engine"),REWRITE_CONTENT:Ge("Rewrite Content","ai-engine"),REWRITE_CONTENT_DESCRIPTION:Ge("Shorten and improve the content for your embedding using the default model.","ai-engine"),FORCE_RECREATE:Ge("Force Recreate","ai-engine"),FORCE_RECREATE_DESCRIPTION:Ge("Recreate embeddings on sync even if the content has not changed.","ai-engine"),REWRITE_PROMPT_DESCRIPTION:Ge("Prompt for the rewrite. Supports {CONTENT}, {TITLE}, {URL}, {EXCERPT}, {LANGUAGE}, {ID}.","ai-engine"),SYNC_ALL:Ge("Sync All","ai-engine"),SYNC_ONE:Ge("Sync One","ai-engine"),ADD_INDEX:Ge("Add Index","ai-engine"),ADD_INDEX_DESCRIPTION:Ge("An index is like a database, and contains embeddings. You can have many indexes and switch between them. The indexes are hosted on Pinecone.","ai-engine"),NO_NAMESPACE_SUPPORT:Ge("Note: This server does not support namespaces.","ai-engine")},Be.ERROR={UPDATING_OPTIONS:Ge("An error occured while updating the options."),GETTING_OPTIONS:Ge("An error occured while getting the options."),CHECK_YOUR_CONSOLE:Ge('For more information, check <a target="_blank" href="https://meowapps.com/tutorial-network-activity-dev-tools/">your console</a>. You might also want to check your <a target="_blank" href="https://meowapps.com/tutorial-php-error-logs/">PHP Error Logs</a>.',"ai-engine")};const He=Be;var Ye=["size","disabled","style"],ze=["size","disabled","style"],We=["size","disabled","style"],Ve=["size","disabled","style"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke.apply(this,arguments)}function qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Xe(){Xe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Je(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Je(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function $e(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$e(o,r,a,i,l,"next",e)}function l(e){$e(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==Je(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ot=wp.element,it=ot.useMemo,lt=ot.useState,ct=ot.useEffect,ut={title:"",content:"",refId:null,type:"manual",behavior:"context"},st=function(e){var t=e.options,n=t.ai_envs.find((function(e){return e.apikey&&e.apikey.length>0})),r=!(null!=t&&t.module_embeddings)||(null==t?void 0:t.embeddings_envs)&&(null==t?void 0:t.embeddings_envs.length)>0;return React.createElement(React.Fragment,null,!n&&React.createElement(Ne.X,{variant:"danger",style:{marginTop:0,marginBottom:25}},(0,O.FE)(He.SETTINGS.AI_ENV_SETUP)),!r&&React.createElement(Ne.X,{variant:"danger",style:{marginTop:0,marginBottom:25}},(0,O.FE)(He.SETTINGS.PINECONE_SETUP)))},ft=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=nt(lt(null==e?void 0:e.ai_default_model),2),o=a[0],i=a[1],l=t||(null==e?void 0:e.ai_default_env),c=null!==(n=null==e?void 0:e.ai_envs)&&void 0!==n?n:[],u=it((function(){if(r&&null!=e&&e.ai_envs){var t={fake:!0,finetunes:[],legacy_finetunes:[],legacy_finetunes_deleted:[],finetunes_deleted:[],deployments:[]};return c.forEach((function(e){var n,r,a,o,i;e.finetunes&&(n=t.finetunes).push.apply(n,tt(e.finetunes)),e.legacy_finetunes&&(r=t.legacy_finetunes).push.apply(r,tt(e.legacy_finetunes)),e.legacy_finetunes_deleted&&(a=t.legacy_finetunes_deleted).push.apply(a,tt(e.legacy_finetunes_deleted)),e.finetunes_deleted&&(o=t.finetunes_deleted).push.apply(o,tt(e.finetunes_deleted)),e.deployments&&(i=t.deployments).push.apply(i,tt(e.deployments))})),t}return null}),[c,r]),s=it((function(){var t;return r?u:l?(null==e||null===(t=e.ai_envs)||void 0===t?void 0:t.find((function(e){return e.id===l})))||(console.warn("useModels: Environment with ID ".concat(l," could not be resolved."),{envs:c,envId:l}),null):(console.warn("useModels: Environment ID is null. Please provide a valid envId."),null)}),[c,l,r,u]),f=it((function(){var e=(null==s?void 0:s.finetunes_deleted)||[];return Array.isArray(null==s?void 0:s.legacy_finetunes_deleted)&&(e=[].concat(tt(e),tt(s.legacy_finetunes_deleted))),e}),[s]),d=function(e){return{background:{deprecated:"var(--neko-red)",tuned:"var(--neko-green)",preview:"var(--neko-orange)"}[e],color:"white",padding:"3px 4px",margin:"1px 0px 0px 3px",borderRadius:4,fontSize:9,lineHeight:"100%"}},m={deprecated:"DEPRECATED",tuned:"TUNED",preview:"PREVIEW"},p=function(e,t){var n,r,a,o=(null===(n=e.tags)||void 0===n?void 0:n.find((function(e){return["deprecated","preview"].includes(e)})))||(t?"tuned":"");return React.createElement(React.Fragment,null,null!==(r=null!==(a=e.name)&&void 0!==a?a:e.suffix)&&void 0!==r?r:e.model,o&&React.createElement("small",{style:d(o)},m[o]))},h=it((function(){var t,n=[];if(!0===(null==s?void 0:s.fake)){var r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rt(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(e.ai_engines);try{for(a.s();!(r=a.n()).done;){var o=r.value;Array.isArray(o.models)&&(n=[].concat(tt(n),tt(o.models)))}}catch(e){a.e(e)}finally{a.f()}}else if("azure"===(null==s?void 0:s.type)){var i,l,c=e.ai_engines.find((function(e){return"openai"===e.type})),u=null!==(i=null==c?void 0:c.models)&&void 0!==i?i:[];n=null!==(l=null==u?void 0:u.filter((function(e){var t;return null===(t=s.deployments)||void 0===t?void 0:t.find((function(t){return t.model===e.model}))})))&&void 0!==l?l:[]}else if("huggingface"===(null==s?void 0:s.type)){var f,d;n=null!==(f=null==s||null===(d=s.customModels)||void 0===d?void 0:d.map((function(e){var t=e.tags?tt(new Set([].concat(tt(e.tags),["core","chat"]))):["core","chat"],n=t.includes("image")?"text-to-image":"completion";return{model:e.name,name:e.name,features:n,tags:t,options:[]}})))&&void 0!==f?f:[]}else{var m,h=e.ai_engines.find((function(e){return e.type===(null==s?void 0:s.type)}));n=null!==(m=null==h?void 0:h.models)&&void 0!==m?m:[]}var v=null!==(t=null==s?void 0:s.finetunes)&&void 0!==t?t:[];return Array.isArray(null==s?void 0:s.legacy_finetunes)&&(v=[].concat(tt(v),tt(s.legacy_finetunes))),v=v.filter((function(e){return"succeeded"===e.status&&e.model})),n=n.map((function(e){return et(et({},e),{},{name:p(e),rawName:e.name})})),v.length&&(n=[].concat(tt(n),tt(v.map((function(e){var t=e.model.split(":")[0];return{model:e.model,name:p(e,!0),rawName:e.suffix,suffix:e.suffix,features:["completion"],family:t,description:"finetuned",finetuned:!0,tags:["chat","finetune"]}}))))),n}),[e,s]),v=it((function(){return h.filter((function(e){return!f.includes(e.model)}))}),[h,f]),y=it((function(){return h.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("core")}))}),[h]),g=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("image")}))}),[v]),E=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("embedding")}))}),[v]),b=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("vision")}))}),[v]),w=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("chat")}))}),[v]),R=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("audio")}))}),[v]),O=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("json")}))}),[v]),_=it((function(){return v.filter((function(e){var t;return null==e||null===(t=e.tags)||void 0===t?void 0:t.includes("realtime")}))}),[v]),x=function(t){if(!t)return null;var n=h.find((function(e){return e.model===t}));return n||(t.startsWith("gpt-3.5-turbo-")||t.startsWith("gpt-35-turbo")?t="gpt-3.5-turbo":t.startsWith("gpt-4o-mini")?t="gpt-4o-mini":t.startsWith("gpt-4o")?t="gpt-4o":t.startsWith("gpt-4")?t="gpt-4":t.startsWith("o1-preview")?t="o1-preview":t.startsWith("o1-mini")?t="o1-mini":t.startsWith("o1-")&&(t="o1"),(n=h.find((function(e){return e.model===t})))||console.warn("Model ".concat(t," not found."),{allModels:h,options:e}),n)},S=function(e){var t=x(e);return y.find((function(e){return(null==e?void 0:e.family)===(null==t?void 0:t.family)}))||null},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1024x1024",n=S(e);if("image"===(null==n?void 0:n.type)&&null!=n&&n.resolutions){var r=n.resolutions.find((function(e){return e.name===t}));return(null==r?void 0:r.price)||null}return(null==n?void 0:n.price)||null};return{allModels:h,model:o,models:v,completionModels:w,imageModels:g,visionModels:b,coreModels:y,embeddingsModels:E,audioModels:R,jsonModels:O,realtimeModels:_,setModel:i,isFineTunedModel:function(e){var t=x(e);return(null==t?void 0:t.finetuned)||!1},getModelName:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=x(e);return n?t&&n?n.rawName:(null==n?void 0:n.name)||(null==n?void 0:n.model)||e:e},getFamilyName:function(e){var t=x(e);return(null==t?void 0:t.family)||null},getPrice:T,getModel:x,calculatePrice:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1024x1024",a=S(e),o=T(e,r),i=o,l=o;return"object"===Je(o)&&null!==o&&(i=o.in,l=o.out),i&&l?i*t*a.unit+l*n*a.unit:0}}},dt=function(){var e=Qe(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/vectors/remote_list"),{nonce:A,method:"POST",json:t});case 2:return n=e.sent,e.abrupt("return",n?{total:n.total,vectors:n.vectors}:{total:0,vectors:[]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=Qe(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/vectors/add_from_remote"),{nonce:A,method:"POST",json:t,signal:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pt=function(){var e=Qe(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.offset=(t.page-1)*t.limit,e.next=3,(0,O.IU)("".concat(T,"/discussions/list"),{nonce:A,method:"POST",json:t});case 3:return n=e.sent,e.abrupt("return",n?{total:n.total,chats:n.chats}:{total:0,chats:[]});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=Qe(Xe().mark((function e(t){var n,r,a,o,i,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(null==t||null===(n=t.filters)||void 0===n?void 0:n.search),""!==(null==t||null===(r=t.filters)||void 0===r?void 0:r.search)){e.next=3;break}return e.abrupt("return",[]);case 3:if(t.filters.envId){e.next=5;break}return e.abrupt("return",{total:0,vectors:[]});case 5:return e.next=7,(0,O.IU)("".concat(T,"/vectors/list"),{nonce:A,method:"POST",json:t});case 7:return i=e.sent,o&&null!=i&&null!==(a=i.vectors)&&void 0!==a&&a.length&&(l=i.vectors.sort((function(e,n){var r;return"asc"===(null==t||null===(r=t.sort)||void 0===r?void 0:r.by)?e.score-n.score:n.score-e.score})),i.vectors=l),e.abrupt("return",i?{total:i.total,vectors:i.vectors}:{total:0,vectors:[]});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=Qe(Xe().mark((function e(t){var n,r,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"publish",e.next=3,(0,O.IU)("".concat(T,"/helpers/count_posts?postType=").concat(t,"&postStatus=").concat(n),{nonce:A});case 3:return r=e.sent,e.abrupt("return",null!=r&&r.count?parseInt(null==r?void 0:r.count):null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=Qe(Xe().mark((function e(t){var n,r,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"publish",e.next=3,(0,O.IU)("".concat(T,"/helpers/posts_ids?postType=").concat(t,"&postStatus=").concat(n),{nonce:A});case 3:return r=e.sent,e.abrupt("return",null!=r&&r.postIds?r.postIds:[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=Qe(Xe().mark((function e(t){var n,r,a,o,i=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2&&void 0!==i[2]?i[2]:0,a=i.length>3&&void 0!==i[3]?i[3]:"publish",e.next=5,(0,O.IU)("".concat(T,"/helpers/post_content?postType=").concat(t,"&postStatus=").concat(a,"&offset=").concat(n,"&postId=").concat(r),{nonce:A});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et=function(){var e=Qe(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/helpers/run_tasks"),{nonce:A,method:"POST"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=Qe(Xe().mark((function e(t){var n,r,a,o,i,l=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.vectorId,r=t.postId,a=t.envId,o=l.length>1&&void 0!==l[1]?l[1]:null,e.next=4,(0,O.IU)("".concat(T,"/vectors/sync"),{nonce:A,method:"POST",json:{vectorId:n,postId:r,envId:a},signal:o});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function wt(e){var t=new Date(e),n=(t=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),r=t.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return React.createElement(React.Fragment,null,n,React.createElement("br",null),React.createElement("small",null,r))}function Rt(e,t){var n,r=t?(n=t.substring(0,16)).length<t.length?(n.endsWith(".")&&(n=n.slice(0,-1)),n+"~"):n:"";return React.createElement(React.Fragment,null,!e&&React.createElement(React.Fragment,null,He.COMMON.GUEST),e&&React.createElement(React.Fragment,null,React.createElement("a",{target:"_blank",href:"/wp-admin/user-edit.php?user_id=".concat(e),rel:"noreferrer"},He.COMMON.USER," #",e)),React.createElement("br",null),React.createElement("small",null,r))}var Ot=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(36*Math.random())];return t},_t=function(e){var t=e.size,n=void 0===t?14:t,r=e.disabled,a=void 0!==r&&r,o=e.style,i=qe(e,Ye),l=et(et({},{position:"relative",top:2,borderRadius:2,filter:a?"grayscale(100%)":"none"}),o);return React.createElement("img",Ke({width:n,height:n},i,{style:l,alt:"OpenAI",src:N+"/images/chat-openai.svg"}))},xt=function(e){var t=e.size,n=void 0===t?14:t,r=e.disabled,a=void 0!==r&&r,o=e.style,i=qe(e,ze),l=et(et({},{position:"relative",top:2,borderRadius:2,filter:a?"grayscale(100%)":"none"}),o);return React.createElement("img",Ke({width:n,height:n},i,{style:l,alt:"Anthropic",src:N+"/images/chat-anthropic.svg"}))},St=function(e){var t=e.size,n=void 0===t?14:t,r=e.disabled,a=void 0!==r&&r,o=e.style,i=qe(e,We),l=et(et({},{position:"relative",top:2,borderRadius:2,filter:a?"grayscale(100%)":"none"}),o);return React.createElement("img",Ke({width:n,height:n},i,{style:l,alt:"JavaScript",src:N+"/images/code-js.svg"}))},Tt=function(e){var t=e.size,n=void 0===t?14:t,r=e.disabled,a=void 0!==r&&r,o=e.style,i=qe(e,Ve),l=et(et({},{position:"relative",top:2,borderRadius:2,filter:a?"grayscale(100%)":"none"}),o);return React.createElement("img",Ke({width:n,height:n},i,{style:l,alt:"PHP",src:N+"/images/code-php.svg"}))},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=wp.data.select("core/block-editor"),n=t.getBlocks,r=t.getSelectedBlockClientId,a=wp.data.select("core/editor").getEditedPostAttribute,o=n(),i=a("title"),l=r(),c=i+"\n\n";return o.forEach((function(t,n){e&&t.clientId===l?c+=e+"\n\n":c+=(t.attributes.content||"")+"\n\n"})),c.trim()};function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=Ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==Ct(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At=wp.element,Lt=(At.useState,At.useEffect,At.useMemo),Mt=React.createElement("g",null,React.createElement("g",null,React.createElement("path",{d:"m391 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#39326c"}),React.createElement("path",{d:"m331 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#39326c"}),React.createElement("path",{d:"m271 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#39326c"}),React.createElement("path",{d:"m211 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#5f55af"}),React.createElement("path",{d:"m151 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#5f55af"}),React.createElement("path",{d:"m91 81h30v-66c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15z",fill:"#5f55af"}),React.createElement("path",{d:"m406 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z",fill:"#39326c"}),React.createElement("path",{d:"m346 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z",fill:"#39326c"}),React.createElement("path",{d:"m286 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z",fill:"#39326c"}),React.createElement("g",{fill:"#5f55af"},React.createElement("path",{d:"m226 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m166 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m106 512c8.284 0 15-6.716 15-15v-66h-30v66c0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 121h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 181h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 241h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 301h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 361h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"}),React.createElement("path",{d:"m15 421h66v-30h-66c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15z"})),React.createElement("path",{d:"m431 91v30h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15z",fill:"#39326c"}),React.createElement("path",{d:"m431 181h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15h-66z",fill:"#39326c"}),React.createElement("path",{d:"m431 241h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15h-66z",fill:"#39326c"}),React.createElement("path",{d:"m431 301h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15h-66z",fill:"#39326c"}),React.createElement("path",{d:"m431 361h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15h-66z",fill:"#39326c"}),React.createElement("path",{d:"m431 421h66c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15h-66z",fill:"#39326c"})),React.createElement("g",null,React.createElement("path",{d:"m446 51h-380c-8.284 0-15 6.716-15 15v380c0 8.284 6.716 15 15 15h380c8.284 0 15-6.716 15-15v-380c0-8.284-6.716-15-15-15z",fill:"#aed0ff"}),React.createElement("g",null,React.createElement("path",{d:"m461 446v-380c0-8.284-6.716-15-15-15h-190v410h190c8.284 0 15-6.716 15-15z",fill:"#7c84e8"})),React.createElement("path",{d:"m386 111h-260c-8.284 0-15 6.716-15 15v260c0 8.284 6.716 15 15 15h260c8.284 0 15-6.716 15-15v-260c0-8.284-6.716-15-15-15z",fill:"#5f55af"}),React.createElement("g",null,React.createElement("path",{d:"m401 386v-260c0-8.284-6.716-15-15-15h-130v290h130c8.284 0 15-6.716 15-15z",fill:"#39326c"}))),React.createElement("g",null,React.createElement("path",{d:"m247.626 192.389c-.052-.138-.106-.274-.162-.411-2.744-6.671-9.175-10.978-16.387-10.978-.006 0-.012 0-.018 0-7.219.007-13.65 4.329-16.383 11.01-.046.113-.091.227-.134.341l-45.06 118.31c-2.949 7.742.937 16.408 8.679 19.356 7.742 2.95 16.408-.937 19.356-8.679l7.543-19.804h51.691l7.458 19.762c2.267 6.007 7.974 9.708 14.036 9.708 1.76 0 3.55-.312 5.294-.97 7.75-2.925 11.663-11.579 8.737-19.33zm-31.14 79.146 14.538-38.171 14.406 38.171z",fill:"#f9f9f9"}),React.createElement("g",{fill:"#e2dff4"},React.createElement("path",{d:"m264.209 321.296c2.267 6.007 7.974 9.708 14.036 9.708 1.76 0 3.55-.312 5.294-.97 7.75-2.925 11.663-11.579 8.737-19.33l-36.276-96.126v86.956h.751z"}),React.createElement("path",{d:"m328.5 181c-8.284 0-15 6.716-15 15v120c0 8.284 6.716 15 15 15s15-6.716 15-15v-120c0-8.284-6.716-15-15-15z"})))),Pt=React.createElement("g",null,React.createElement("path",{d:"m213.46 341.461-139.26 156.08c-16.17 18.48-44.53 19.33-61.8 2.06-17.32-17.32-16.37-45.67 2.06-61.8l156.08-139.26s13.46-2.54 29.46 13.46 13.46 29.46 13.46 29.46z",fill:"#0052be"}),React.createElement("path",{d:"m213.46 341.461-139.26 156.08c-16.17 18.48-44.53 19.33-61.8 2.06l187.6-187.6c16 16 13.46 29.46 13.46 29.46z",fill:"#00429b"}),React.createElement("path",{d:"m304 240.001-90.54 101.46c-14.997-14.997-27.922-27.922-42.92-42.92l101.46-90.54z",fill:"#00429b"}),React.createElement("path",{d:"m304 240.001-90.54 101.46-21.46-21.46 96-96z",fill:"#00337a"}),React.createElement("path",{d:"m400 279.001h-64.4l-42.47 57.87c-7.88 10.735-24.824 6.606-26.91-6.52l-11.56-73.01-73.01-11.56c-13.139-2.087-17.244-19.042-6.52-26.91l57.87-42.47v-64.4c0-12.176 13.797-19.289 23.72-12.21l50.15 35.83 70.92-19.9c11.25-3.168 21.656 7.245 18.49 18.49l-19.9 70.92 35.83 50.15c7.071 9.913-.02 23.72-12.21 23.72z",fill:"#ffdd54"}),React.createElement("path",{d:"m412.21 255.281c7.071 9.913-.02 23.72-12.21 23.72h-64.4l-42.47 57.87c-7.875 10.728-24.823 6.616-26.91-6.52l-11.56-73.01 137.79-137.79c3.83 3.84 5.3 9.44 3.83 14.66l-19.9 70.92z",fill:"#ffb454"}),React.createElement("path",{d:"m512 39.001c0 8.28-6.72 15-15 15h-9v9c0 8.28-6.72 15-15 15s-15-6.72-15-15v-9h-9c-8.28 0-15-6.72-15-15s6.72-15 15-15h9v-9c0-8.28 6.72-15 15-15s15 6.72 15 15v9h9c8.28 0 15 6.719 15 15z",fill:"#bee75e"}),React.createElement("path",{d:"m512 39.001c0 8.28-6.72 15-15 15h-9v9c0 8.28-6.72 15-15 15s-15-6.72-15-15v-9l30-30h9c8.28 0 15 6.719 15 15z",fill:"#00cb75"}),React.createElement("path",{d:"m336 41.001h-9v-9c0-8.284-6.716-15-15-15s-15 6.716-15 15v9h-9c-8.284 0-15 6.716-15 15s6.716 15 15 15h9v9c0 8.284 6.716 15 15 15s15-6.716 15-15v-9h9c8.284 0 15-6.716 15-15s-6.716-15-15-15z",fill:"#f6f9f9"}),React.createElement("path",{d:"m441 224.001c0 8.284 6.716 15 15 15s15-6.716 15-15v-9h9c8.284 0 15-6.716 15-15s-6.716-15-15-15h-9v-9c0-8.284-6.716-15-15-15s-15 6.716-15 15v9h-9c-8.284 0-15 6.716-15 15s6.716 15 15 15h9z",fill:"#e2dff4"}),React.createElement("path",{d:"m497 329.001h-9v-9c0-8.284-6.716-15-15-15s-15 6.716-15 15v9h-9c-8.284 0-15 6.716-15 15s6.716 15 15 15h9v9c0 8.284 6.716 15 15 15s15-6.716 15-15v-9h9c8.284 0 15-6.716 15-15s-6.716-15-15-15z",fill:"#ff4a4a"}),React.createElement("path",{d:"m192 24.001h-9v-9c0-8.284-6.716-15-15-15s-15 6.716-15 15v9h-9c-8.284 0-15 6.716-15 15s6.716 15 15 15h9v9c0 8.284 6.716 15 15 15s15-6.716 15-15v-9h9c8.284 0 15-6.716 15-15s-6.716-15-15-15z",fill:"#ff8659"}),React.createElement("path",{d:"m159.442 122.977-56-32c-7.191-4.109-16.355-1.611-20.466 5.581-4.11 7.193-1.611 16.355 5.581 20.466l56 32c7.16 4.093 16.337 1.644 20.466-5.581 4.111-7.193 1.612-16.355-5.581-20.466z",fill:"#f6f9f9"}),React.createElement("path",{d:"m118.14 169.117-64 8c-8.221 1.027-14.052 8.524-13.023 16.744 1.027 8.218 8.523 14.054 16.744 13.023l64-8c8.221-1.027 14.052-8.524 13.023-16.744-1.028-8.22-8.527-14.062-16.744-13.023z",fill:"#acceff"}),React.createElement("path",{d:"m389.023 352.558c-4.111-7.193-13.274-9.693-20.466-5.581-7.192 4.11-9.691 13.272-5.581 20.466l32 56c2.769 4.845 7.83 7.561 13.037 7.561 11.319 0 18.784-12.341 13.01-22.445z",fill:"#e2dff4"}),React.createElement("path",{d:"m329.86 377.117c-8.222-1.031-15.717 4.804-16.744 13.023l-8 64c-1.117 8.925 5.834 16.862 14.902 16.862 7.455 0 13.917-5.553 14.865-13.142l8-64c1.029-8.219-4.802-15.716-13.023-16.743z",fill:"#6ba7ff"}));const jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.icon,n=void 0===t?"ai":t,r=e.size,a=void 0===r?20:r,o=e.style,i=void 0===o?{}:o,l=Lt((function(){switch(n){case"ai":default:return Mt;case"wand":return Pt}}),[n]);return React.createElement("svg",{style:kt({width:a,height:a,marginRight:5},i),"enable-background":"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg"},l)};var Ft,Dt,Ut;function Gt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Bt=function(e){var t=e.title,n=void 0===t?He.COMMON.SETTINGS:t,r=e.options,a=void 0===r?L:r,o=null==a?void 0:a.module_playground,i=null==a?void 0:a.module_generator_content,l=null==a?void 0:a.module_generator_images;return React.createElement(g.n,{title:"AI Engine | ".concat(n)},React.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i&&React.createElement(w.M,{className:"header",onClick:function(){return location.href="edit.php?page=mwai_content_generator"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}}),He.COMMON.CONTENT),l&&React.createElement(w.M,{className:"header",icon:"",onClick:function(){return location.href="edit.php?page=mwai_images_generator"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}}),He.COMMON.IMAGES),o&&React.createElement(w.M,{className:"header",icon:"",onClick:function(){return location.href="tools.php?page=mwai_dashboard"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}}),He.COMMON.PLAYGROUND),React.createElement(w.M,{className:"header",icon:"tools",onClick:function(){return location.href="admin.php?page=mwai_settings"}})))},Ht=((0,U.Ay)(w.M)(Ft||(Ft=Gt(["\n"]))),U.Ay.div(Dt||(Dt=Gt(["\n  display: flex;\n  justify-content: unset;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 0 2px 0;\n\n  h2 {\n    margin: 7px 0 0 0;\n    padding: 0;\n  }\n"])))),Yt=U.Ay.div(Ut||(Ut=Gt(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(30%, 1fr));\n  grid-template-rows: repeat(auto-fit, minmax(30%, 1fr));\n  grid-gap: 10px;\n  margin-top: 20px;\n\n  img, div {\n    width: 100%;\n    cursor: pointer;\n  }\n  .empty-image {\n    width: 100%;\n    padding-bottom: 100%;\n    background-color: #f5f5f5;\n  }\n"]))),zt=n(4809),Wt=n.n(zt),Vt=n(3896),Kt=n(1843),qt=n(5900),Xt=n(7494),$t=n(8482),Qt=n(209),Jt=n(520),Zt=n(851),en=n(6897);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(){nn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==tn(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(tn(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function rn(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function an(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){rn(o,r,a,i,l,"next",e)}function l(e){rn(o,r,a,i,l,"throw",e)}i(void 0)}))}}var on=function(){var e=an(nn().mark((function e(){var t;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/helpers/post_types"),{nonce:A});case 2:if((t=e.sent).success){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.postTypes);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ln=function(){var e=an(nn().mark((function e(t){var n;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/helpers/count_posts?postType=").concat(t),{nonce:A});case 2:return n=e.sent,e.abrupt("return",null!=n&&n.count?parseInt(null==n?void 0:n.count):null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cn=function(){var e=an(nn().mark((function e(t){var n,r,a,o=arguments;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2&&void 0!==o[2]?o[2]:0,e.next=4,(0,O.IU)("".concat(T,"/helpers/post_content?postType=").concat(t,"&offset=").concat(n,"&postId=").concat(r),{nonce:A});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=an(nn().mark((function e(t){var n;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(S,"/mwai-ui/v1/files/delete"),{nonce:A,method:"POST",json:{files:t}});case 2:if((n=e.sent).success){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sn=function(){var e=an(nn().mark((function e(){var t,n,r,a,o,i=arguments;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,r=i.length>1&&void 0!==i[1]?i[1]:null,a="".concat(T,"/openai/files/list?envId=").concat(n),r&&(a+="&purpose=".concat(r)),e.next=6,(0,O.IU)(a,{nonce:A});case 6:if((o=e.sent).success){e.next=9;break}throw new Error(o.message);case 9:return e.abrupt("return",null==o||null===(t=o.files)||void 0===t?void 0:t.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fn=function(){var e=an(nn().mark((function e(t){var n,r,a,o,i,l,c,u,s,f,d,m,p;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=void 0===n?null:n,a=t.purpose,o=void 0===a?null:a,i=t.metadata,l=void 0===i?null:i,c=t.envId,u=void 0===c?null:c,s=t.limit,f=void 0===s?10:s,d=t.page,m=void 0===d?0:d,e.next=3,(0,O.IU)("".concat(S,"/mwai-ui/v1/files/list"),{nonce:A,method:"POST",json:{userId:r,purpose:o,metadata:l,envId:u,limit:f,page:m}});case 3:if((p=e.sent).success){e.next=6;break}throw new Error(p.message);case 6:return e.abrupt("return",null==p?void 0:p.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dn=function(){var e=an(nn().mark((function e(){var t,n,r,a=arguments;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,n=a.length>1&&void 0!==a[1]&&a[1],e.next=4,(0,O.IU)("".concat(T,"/openai/finetunes/list_deleted?envId=").concat(t,"&legacy=").concat(n),{nonce:A});case 4:if((r=e.sent).success){e.next=7;break}throw new Error(r.message);case 7:return e.abrupt("return",null==r?void 0:r.finetunes);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mn=function(){var e=an(nn().mark((function e(){var t;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/settings/themes"),{method:"GET",nonce:A});case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.themes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pn=function(){var e=an(nn().mark((function e(t){var n,r,a,o,i;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++){if(a=t[r].themeId,n.includes(a)){for(o=1;n.includes(a+"-"+o);)o++;a=a+"-"+o}n.push(a),t[r].themeId=a}return e.next=4,(0,O.IU)("".concat(T,"/settings/themes"),{method:"POST",nonce:A,json:{themes:t}});case 4:return i=e.sent,e.abrupt("return",null==i?void 0:i.themes);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hn=function(){var e=an(nn().mark((function e(){var t,n,r,a=arguments;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,n=a.length>1&&void 0!==a[1]&&a[1],e.next=4,(0,O.IU)("".concat(T,"/openai/finetunes/list?envId=").concat(t,"&legacy=").concat(n),{nonce:A});case 4:if((r=e.sent).success){e.next=7;break}throw new Error(r.message);case 7:return e.abrupt("return",null==r?void 0:r.finetunes);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vn=function(){var e=an(nn().mark((function e(){var t;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/settings/chatbots"),{method:"GET",nonce:A});case 2:if((t=e.sent).success){e.next=5;break}throw new Error(null==t?void 0:t.message);case 5:return e.abrupt("return",null==t?void 0:t.chatbots);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yn=function(){var e=an(nn().mark((function e(t){var n;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/settings/chatbots"),{method:"POST",nonce:A,json:{chatbots:t}});case 2:if((n=e.sent).success){e.next=5;break}throw new Error(null==n?void 0:n.message);case 5:return e.abrupt("return",null==n?void 0:n.chatbots);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gn=function(){var e=an(nn().mark((function e(t){var n;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/openai/assistants/list?envId=").concat(t),{nonce:A});case 2:if((n=e.sent).success){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",null==n?void 0:n.assistants);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),En=function(){var e=an(nn().mark((function e(t,n,r){var a;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/openai/assistants/set_functions"),{method:"POST",nonce:A,json:{envId:t,assistantId:n,functions:r}});case 2:if((a=e.sent).success){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),bn=function(){var e=an(nn().mark((function e(){var t;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/settings/options"),{method:"GET",nonce:A});case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.options);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wn=function(){var e=an(nn().mark((function e(){var t;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.IU)("".concat(T,"/get_logs"),{nonce:A,method:"GET"});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Rn=function(){var e=an(nn().mark((function e(){return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.IU)("".concat(T,"/clear_logs"),{nonce:A});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function _n(){_n=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==On(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(On(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function xn(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Sn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xn(o,r,a,i,l,"next",e)}function l(e){xn(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Tn(e){return function(e){if(Array.isArray(e))return In(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Cn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){if(e){if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=wp.element.useState;const An=function(e){var t=e.instructions,n=e.setMessages,r=Nn(kn("post"),2),a=r[0],o=r[1],i=Nn(kn(0),2),l=i[0],c=i[1],u=Nn(kn(!1),2),s=u[0],d=u[1],m=Nn(kn("Generate 30 questions and answers from this text. Questions use a neutral tone. Answers use the same tone as the text."),2),p=m[0],h=m[1],v=(0,f.I)({queryKey:["postTypes"],queryFn:on}),y=v.isLoading,g=v.data,E=(0,f.I)({queryKey:["postsCount-"+a],queryFn:function(){return ln(a)}}),b=E.isLoading,R=E.data,_=(0,en.XS)({i18n:He,onStop:function(){d(),_.reset()}}),x=s||_.busy||b||y,S=function(e){if(!e)return[];for(var n=e.split("\n").filter((function(e){return""!==e.trim()})),r=[],a=[],o=0;o<n.length;o++)n[o].startsWith("Q:")?(a.length&&(r.push({messages:Tn(a)}),a=[]),a.push({role:"system",content:t}),a.push({role:"user",content:n[o].slice(2).trim()})):n[o].startsWith("A:")&&(a.push({role:"assistant",content:n[o].slice(2).trim()}),r.push({messages:Tn(a)}),a=[]);return a.length&&r.push({messages:a}),r},N=function(){var e=Sn(_n().mark((function e(){var t,n,r,o,i,l,u,s,f,d,m,h,v,y,g,E,b,w=arguments;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:0,n=w.length>1&&void 0!==w[1]?w[1]:void 0,r=w.length>2&&void 0!==w[2]?w[2]:void 0,o=p+"\n\nUse this format:\n\nQ: Question?\nA: Answer.\n\nQ: Question?\nA: Answer.\nText:\n\n{CONTENT}",e.next=6,cn(a,t,n||void 0);case 6:if(i=e.sent,l=null,u=null,s=null==i?void 0:i.content,f=null==i?void 0:i.url,d=null==i?void 0:i.title,m=0,i.success){e.next=18;break}alert(i.message),l=i.message,e.next=35;break;case 18:if(!(s.length<64)){e.next=22;break}console.log("Issue: Content is too short! Skipped.",{content:s}),e.next=35;break;case 22:return o=(o=(o=o.replace("{CONTENT}",s)).replace("{URL}",f)).replace("{TITLE}",d),e.next=27,(0,O.IU)("".concat(T,"/ai/completions"),{method:"POST",json:{scope:"admin-tools",session:M,message:o},signal:r,nonce:A});case 27:if((v=e.sent).success){e.next=33;break}if(null===(y=v.error)||void 0===y||!y.cancelledByUser){e.next=31;break}return e.abrupt("return",null);case 31:throw console.error(v),new Error(null!==(g=v.message)&&void 0!==g?g:"Unknown error, check your console logs.");case 33:u=null==v?void 0:v.data,null!=v&&null!==(h=v.usage)&&void 0!==h&&h.total_tokens&&(m=v.usage.total_tokens,c((function(e){return e+v.usage.total_tokens})));case 35:return null!=r&&r.aborted&&C(),E=S(u),b={content:s,prompt:o,rawData:u,entries:E,error:l,tokens:m},console.log("Result:",b),e.abrupt("return",b);case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){console.log("User aborted."),setBusy(!1),_.reset()},I=function(){var e=Sn(_n().mark((function e(){var t,r,a;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(0),t=Array.from(Array(R).keys()),r=prompt("There are "+t.length+" entries. If you want to start from a certain entry offset, type it here. Otherwise, just press OK, and everything will be processed."),a=t.map((function(e){return function(){var t=Sn(_n().mark((function t(a){var o,i;return _n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Task "+e),!(r&&e<r)){t.next=3;break}return t.abrupt("return",{success:!0});case 3:return t.next=5,N(e,null,a);case 5:return(null==(i=t.sent)||null===(o=i.entries)||void 0===o?void 0:o.length)>0&&n((function(e){return[].concat(Tn(e),Tn(i.entries))})),t.abrupt("return",{success:!0});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),e.next=6,_.start(a);case 6:d(!1),alert("All done!"),_.reset();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Sn(_n().mark((function e(){var t,r;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(0),null!==(t=prompt("Enter the ID of a post (leave blank to use the very first one)."))){e.next=5;break}return e.abrupt("return");case 5:return d("singleGenerate"),e.next=8,N(0,t);case 8:(r=e.sent).entries.length?confirm("Got ".concat(r.entries.length," entries! Do you want to add them to your data? If not, they will be displayed in your console."))&&n((function(e){return[].concat(Tn(e),Tn(r.entries))})):alert("No entries were generated. Check the console for more information."),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 16:return e.prev=16,d(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",width:"100%"}},React.createElement(w.M,{disabled:x,onClick:k,isBusy:"singleGenerate"===s},He.COMMON.SINGLE_GENERATE),React.createElement("span",{style:{color:"#d1e8f2",fontSize:"22px",padding:5}},"|"),React.createElement(w.M,{disabled:x,onClick:function(){return I()}},"Bulk Generate"),React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:10}},"Based on ",b&&"...",!b&&R),React.createElement(we.u,{id:"postType",scrolldown:!0,disabled:x,name:"postType",style:{width:100,marginLeft:10},onChange:o,value:a},null==g?void 0:g.map((function(e){return React.createElement(we.j,{key:e.type,value:e.type,label:e.name})}))),React.createElement(Zt.j,{busy:_.busy,style:{marginLeft:10,flex:"auto"},value:_.value,max:_.max,onStopClick:_.stop}),React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:10}},"Tokens: ",l)),React.createElement("div",{style:{width:"100%"}},React.createElement(Vt.m,{id:"generatePrompt",name:"generatePrompt",rows:2,style:{marginTop:10,marginBottom:5},value:p,onBlur:h,disabled:x})),_.TasksErrorModal)};function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e){return function(e){if(Array.isArray(e))return Yn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(){Pn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ln(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ln(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){var r;return r=function(e,t){if("object"!=Ln(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ln(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Un(o,r,a,i,l,"next",e)}function l(e){Un(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Hn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e,t){if(e){if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yn(e,t):void 0}}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zn=wp.element,Wn=zn.useState,Vn=zn.useMemo,Kn=zn.useRef,qn=zn.useEffect,Xn=function(e){var t=e.createdOn,n=e.estimatedOn;if(!t||!n)return null;var r=new Date;t=new Date(t),n=new Date(n);var a,o,i,l=function(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return React.createElement("div",null,"Start: ",l(t),".",React.createElement("br",null),"Finish: ",l(n),".",React.createElement("br",null),"Time Left: ",React.createElement("b",null,(a=n-r,o=Math.floor(a/6e4),(i=Math.floor(o/60))>0?"".concat(i," hour").concat(i>1?"s":""," and ").concat(o%60," minute").concat(o%60!=1?"s":""):"".concat(o," minute").concat(1!==o?"s":""))),".",React.createElement("br",null),React.createElement("br",null),React.createElement("small",null,"Use Refresh Models to update the status."))},$n=[{accessor:"row",title:"#",width:25,verticalAlign:"top"},{accessor:"question",title:"Question",verticalAlign:"top"},{accessor:"answer",title:"Answer",verticalAlign:"top"},{accessor:"actions",title:"",width:36,align:"center"}],Qn=[{accessor:"row",title:"#",width:25,verticalAlign:"top"},{accessor:"messages",title:"Messages",verticalAlign:"top"},{accessor:"actions",title:"",width:68,align:"top"}],Jn=[{accessor:"status",title:"Status",sortable:!0,width:"120px"},{accessor:"id",title:"ID",width:"120px"},{accessor:"filename",title:"File"},{accessor:"purpose",title:"Purpose"},{accessor:"filesize",title:"Size",sortable:!0},{accessor:"createdOn",title:"Date",sortable:!0,width:"80px"},{accessor:"actions",title:"",width:"190px"}],Zn=[{accessor:"status",title:"Status",sortable:!0,width:"120px"},{accessor:"id",title:"ID",width:"120px"},{accessor:"suffix",title:"Suffix"},{accessor:"model",title:"Model"},{accessor:"base_model",title:"Based On",width:"200px"},{accessor:"createdOn",title:"Date",sortable:!0,width:"80px"},{accessor:"actions",title:""}],er=function(e){var t=e.status,n=e.includeText,r=void 0!==n&&n,a=(0,s.z)().colors,o=a.orange,i=a.green,l=a.red,c=null;switch(t){case"pending":case"running":c=React.createElement(Oe.z,{title:t,icon:"replay",spinning:!0,width:24,color:o});break;case"succeeded":case"processed":c=React.createElement(Oe.z,{title:t,icon:"check-circle",width:24,color:i});break;case"failed":c=React.createElement(Oe.z,{title:t,icon:"close",width:24,color:l});break;case"cancelled":c=React.createElement(Oe.z,{title:t,icon:"close",width:24,color:o});break;default:c=React.createElement(Oe.z,{title:t,icon:"alert",width:24,color:o})}return r?React.createElement("div",{style:{display:"flex",alignItems:"center"}},c,React.createElement("span",{style:{textTransform:"uppercase",fontSize:9,marginLeft:3}},t)):c},tr=function(e){var t=e.children,n=e.data,r=e.onChange,a=void 0===r?function(){}:r,o=Bn(Wn(!1),2),i=o[0],l=o[1],c=function(e){l(!1),e!==n&&a(e)};return i?React.createElement("div",{onKeyUp:function(e){"Escape"===e.key&&c(n)},style:{height:"100%",display:"flex",flexDirection:"column",width:"100%"}},React.createElement(Vt.m,{onBlurForce:!0,autoFocus:!0,fullHeight:!0,rows:3,style:{height:"100%",width:"100%"},onEnter:c,onBlur:c,value:n}),React.createElement(w.M,{onClick:c,fullWidth:!0,style:{marginTop:2,height:35}},"Save")):React.createElement("pre",{style:{width:"100%",height:"100%",whiteSpace:"break-spaces",margin:0,padding:0,fontSize:13,fontFamily:"inherit"},onClick:function(){return l(!0)}},t)};const nr=function(e){var t,n=e.options,r=e.updateOption,a=e.refreshOptions,o=(0,s.z)().colors,i=(0,u.jE)(),l=Bn(Wn(!1),2),c=l[0],d=l[1],m=Bn(Wn(),2),p=m[0],h=m[1],y=Bn(Wn(!1),2),g=y[0],R=y[1],_=Bn(Wn("finetunes"),2),x=_[0],S=_[1],N=Bn(Wn("current"),2),C=N[0],I=N[1],k=Bn(Wn("fine-tune"),2),L=k[0],M=k[1],P=Bn(Wn("meow"),2),j=P[0],F=P[1],D=Bn(Wn(!1),2),U=D[0],G=D[1],B=Bn(Wn(4),2),H=B[0],Y=B[1],z=Bn(Wn(4),2),W=z[0],V=z[1],K=Bn(Wn(.1),2),q=K[0],X=K[1],$=Bn(Wn(.01),2),Q=$[0],J=$[1],Z=Bn(Wn(!1),2),ee=Z[0],te=Z[1],ne=Bn(Wn(null==n||null===(t=n.ai_envs)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id),2),re=ne[0],ae=ne[1],oe=Vn((function(){return(null==n?void 0:n.ai_envs)||[]}),[n]),ie=Vn((function(){return null==oe?void 0:oe.find((function(e){return e.id===re}))}),[re,oe]),le=(null==ie?void 0:ie.finetunes_deleted)||[],ce=(null==ie?void 0:ie.finetunes)||[],ue=(0,f.I)({queryKey:["datasets-"+re+"-"+L],enabled:ee,queryFn:function(){return sn(re,L)}}),se=ue.isFetching,fe=ue.error,de=ue.data,me=Bn(Wn("gpt-4o-mini-2024-07-18"),2),pe=me[0],he=me[1],ve=function(){var e=Gn(Pn().mark((function e(t,n){var a;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe.map((function(e){return e.id===re?Fn(Fn({},e),{},Dn({},t,n)):e})),e.abrupt("return",r(a,"ai_envs"));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();qn((function(){"files"!==x||ee||te(!0)}),[x]),qn((function(){fe&&!c&&d(fe)}),[fe]);var ye=10,ge=Bn(Wn(!0),2),Ee=ge[0],be=ge[1],Oe=Bn(Wn(1),2),Ce=Oe[0],Ie=Oe[1],ke=Bn(Wn([]),2),Ae=ke[0],Le=ke[1],Me=Bn(Wn(!1),2),Pe=Me[0],je=Me[1],Fe=Bn(Wn("You are Chihiro, an AI Assistant. Your primary objective is to assist website visitors by directing them to the appropriate page or succinctly answering their questions with precision."),2),De=Fe[0],Ue=Fe[1],Ge=Bn(Wn(""),2),Be=Ge[0],Ye=Ge[1],ze=Bn(Wn(!1),2),We=ze[0],Ve=ze[1],Ke=Bn(Wn([]),2),qe=Ke[0],Xe=Ke[1],$e=Vn((function(){return Ae.length}),[Ae]);qn((function(){if(0!==Ae.length){var e=Ae.map((function(e,t){if(!e.messages||e.messages.length<3)return t+1;if("system"!==e.messages[0].role||"user"!==e.messages[1].role||"assistant"!==e.messages[2].role)return t+1;for(var n=3;n<e.messages.length;n++)if(e.messages[n].role===e.messages[n-1].role)return t+1;return null})).filter((function(e){return null!==e}));Xe(e),Ve(0===e.length)}else Ve(!1)}),[Ae]);var Qe=function(e){var t=e.messages,n=e.currentRow,r=e.onUpdateDataRow,a=e.onDeleteDataRow;return React.createElement(React.Fragment,null,t.map((function(e,t){return React.createElement("div",{key:t,style:{display:"flex"}},React.createElement(w.M,{rounded:!0,icon:"trash",onClick:function(){return a(n,t+1)}}),React.createElement("div",{style:{width:120,paddingLeft:5,paddingTop:0,paddingBottom:4,marginRight:10}},React.createElement(we.u,{scrolldown:!0,name:"role",value:e.role,style:{width:120},onChange:function(a){return r(n,a,e.content,t+1)}},React.createElement(we.j,{value:"assistant",label:"Assistant"}),React.createElement(we.j,{value:"user",label:"User"}),React.createElement(we.j,{value:"system",label:"System"}))),React.createElement(tr,{data:e.content,style:{flex:"auto"},onChange:function(a){return r(n,e.role,a,t+1)}},e.content))})))},Je=function(){var e=Gn(Pn().mark((function e(){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.invalidateQueries("datasets");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Gn(Pn().mark((function e(){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,Je();case 3:R(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Gn(Pn().mark((function e(){var t,n,r,a;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,n=j,R(!0),r={envId:re,fileId:t,model:pe,suffix:n},U&&(r=Fn(Fn({},r),{},{nEpochs:H,batchSize:W,learningRateMultiplier:q,promptLossWeight:Q})),e.prev=5,e.next=8,(0,O.IU)("".concat(T,"/openai/files/finetune"),{method:"POST",nonce:A,json:r});case 8:(a=e.sent).success?(tt(),alert(He.ALERTS.FINETUNING_STARTED),S("finetunes"),h()):alert(a.message),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0.message),alert(e.t0.message);case 16:R(!1);case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Gn(Pn().mark((function e(){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R("finetunes"),ce.length){e.next=6;break}return e.next=4,dn(re);case 4:e.next=8;break;case 6:return e.next=8,hn(re);case 8:return e.next=10,a();case 10:R(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Gn(Pn().mark((function e(){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R("clean"),e.next=3,dn(re);case 3:return e.next=5,a();case 5:R(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!confirm(He.ALERTS.RESET_BUILDER)||(Le([]),it({instructions:De,entries:[]}))};qn((function(){if(!Ae||0===Ae.length){var e=localStorage.getItem("mwai_builder_data_v2");if(e){var t=JSON.parse(e);Le(t.entries),t.instructions&&Ue(t.instructions)}}}),[]);var at=function(e){for(var t,n=!1,r=!1,a=function(){var t=Ae[o].messages;if(t&&t.length>0)if("system"===t[0].role){if(t[0].content!==e){if(!n){if(!confirm("The instructions in your data do not match the ones in your entries. Do you want to replace it for every entry?"))return{v:void 0};n=!0}var a=Mn(Ae);a[o].messages[0].content=e,Le((function(){return a}))}}else{if(!r){if(!confirm("Some entries are missing the system role as the first message. Do you want to add it for every entry where it's missing?"))return{v:void 0};r=!0}var i=Mn(Ae);i[o].messages.unshift({role:"system",content:e}),Le((function(){return i}))}else{if(!r){if(!confirm("Some entries are missing the system role as the first message. Do you want to add it for every entry where it's missing?"))return{v:void 0};r=!0}var l=Mn(Ae);l[o].messages=[{role:"system",content:e}].concat(Mn(t)),Le((function(){return l}))}},o=0;o<Ae.length;o++)if(t=a())return t.v},ot=function(e){Ue(e),Pe||at(e)},it=function(e){!function(){var e=new Date,t=e.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"});t=t.replace(/\//g,"."),t+="-"+e.getHours().toString().padStart(2,"0")+"."+e.getMinutes().toString().padStart(2,"0"),Ye("MEOW-".concat(t,".jsonl"))}();try{e?localStorage.setItem("mwai_builder_data_v2",(0,O.F1)(e)):localStorage.removeItem("mwai_builder_data_v2"),be(!0)}catch(e){localStorage.removeItem("mwai_builder_data_v2"),be(!1)}};qn((function(){Ae&&(null==Ae?void 0:Ae.length)>0&&it({instructions:De,entries:Ae})}),[Ae]),qn((function(){De&&(null==De?void 0:De.length)>0&&it({instructions:De,entries:Ae})}),[De]);var lt=function(e,t){var n=Mn(Ae);n[e-1].messages.splice(t-1,1),Le(n)},ct=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=Ae.map((function(a,o){if(o===e-1){if(r)return Fn(Fn({},a),{},{messages:a.messages.map((function(e,a){return a===r-1?Fn(Fn({},e),{},{role:t,content:n}):e}))});if("assistant"===t)return Fn(Fn({},a),{},{messages:a.messages.map((function(e){return"assistant"===e.role?Fn(Fn({},e),{},{content:n}):e}))});if("user"===t)return Fn(Fn({},a),{},{messages:a.messages.map((function(e){return"user"===e.role?Fn(Fn({},e),{},{content:n}):e}))})}return a}));Le(a)},ut=Vn((function(){var e=(Ce-1)*ye,t=null==Ae?void 0:Ae.slice((Ce-1)*ye,(Ce-1)*ye+ye);return null==t?void 0:t.map((function(t){var n=++e,r="",a="",o=[];if(Pe)o=t.messages;else{var i=t.messages.find((function(e){return"user"===e.role}));i&&(r=i.content);var l=t.messages.find((function(e){return"assistant"===e.role}));l&&(a=l.content)}return{row:n,messages:React.createElement(Qe,{entries:Ae,messages:o,currentRow:n,onUpdateDataRow:ct,onDeleteDataRow:lt}),question:React.createElement(tr,{data:r,onChange:function(e){return ct(n,"user",e)}},r),answer:React.createElement(tr,{data:a,onChange:function(e){return ct(n,"assistant",e)}},a),actions:React.createElement(React.Fragment,null,Pe&&React.createElement(w.M,{rounded:!0,icon:"plus",onClick:function(){return _t(n)}}),React.createElement(w.M,{rounded:!0,icon:"trash",onClick:function(){return e=n,t=Ae.filter((function(t,n){return n!==e-1})),Le(t),void(0===t.length&&it({instructions:De,entries:[]}));var e,t}}))}}))}),[Ae,Ce,ye,Pe,ct,lt]),st=function(){var e=Gn(Pn().mark((function e(t){var n;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(T,"/openai/files/delete"),{method:"POST",nonce:A,json:{envId:re,fileId:t}});case 4:if(!(n=e.sent).success){e.next=10;break}return e.next=8,Je();case 8:e.next=11;break;case 10:alert(n.message);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 17:R(!1);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Gn(Pn().mark((function e(t){var n;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(T,"/openai/finetunes/cancel"),{method:"POST",nonce:A,json:{envId:re,finetuneId:t}});case 4:(n=e.sent).success?tt():alert(n.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 12:R(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=Gn(Pn().mark((function e(t){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm(He.ALERTS.DELETE_FINETUNE)){e.next=2;break}return e.abrupt("return");case 2:return R(!0),e.prev=3,e.next=6,ve("finetunes_deleted",[].concat(Mn(le),[t]));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 12:R(!1);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=Gn(Pn().mark((function e(t){var n;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm(He.ALERTS.DELETE_FINETUNE)){e.next=2;break}return e.abrupt("return");case 2:return R(!0),e.prev=3,e.next=6,(0,O.IU)("".concat(T,"/openai/finetunes/delete"),{method:"POST",nonce:A,json:{envId:re,modelId:t}});case 6:if(!(n=e.sent).success){e.next=12;break}return e.next=10,ve("finetunes_deleted",[].concat(Mn(le),[t]));case 10:e.next=19;break;case 12:if(!(n.message.indexOf("does not exist")>-1)){e.next=18;break}return alert(He.ALERTS.FINETUNE_ALREADY_DELETED),e.next=16,ve("finetunes_deleted",[].concat(Mn(le),[t]));case 16:e.next=19;break;case 18:alert(n.message);case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 25:R(!1);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Gn(Pn().mark((function e(t,n){var r,a,o,i;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(T,"/openai/files/download"),{method:"POST",nonce:A,json:{envId:re,fileId:t}});case 4:(r=e.sent).success?(a=new Blob([r.data],{type:"text/plain"}),o=window.URL.createObjectURL(a),(i=document.createElement("a")).setAttribute("href",o),i.setAttribute("download","".concat(n)),document.body.appendChild(i),i.click(),i.remove()):alert(r.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 12:R(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ht=Vn((function(){return null==de?void 0:de.sort((function(e,t){return t.created_at-e.created_at})).map((function(e){var t=e.id,n=e.filename,r=new Date(1e3*e.created_at),a="fine-tune"===e.purpose;return{status:React.createElement(er,{status:e.status,includeText:!0}),id:t,filename:n,purpose:e.purpose,filesize:(0,O.z3)(e.bytes),createdOn:React.createElement(React.Fragment,null,r.toLocaleDateString(),React.createElement("br",null),r.toLocaleTimeString()),actions:React.createElement(React.Fragment,null,React.createElement(w.M,{disabled:!a,icon:"wand",onClick:function(){return h(t)}},"Train Model"),React.createElement(w.M,{rounded:!0,icon:"arrow-down",onClick:function(){return pt(t,n)}}),React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",onClick:function(){return st(t)}}))}}))}),[de]),vt=function(e){return le.includes(e.model)||le.includes(e.id)},yt=function(e){return"failed"===e.status||"cancelled"===e.status},gt=function(e){return!yt(e)&&!vt(e)},Et=Vn((function(){if(!ce)return[];var e=ce;return"current"===C?e=e.filter(gt):"deleted"===C?e=e.filter(vt):"failed"===C&&(e=e.filter(yt)),e.map((function(e){var t=new Date(e.createdOn);return Fn(Fn({},e),{},{model:e.model?e.model:React.createElement(Xn,{createdOn:e.createdOn,estimatedOn:e.estimatedOn}),status:React.createElement(er,{status:e.status,includeText:!0}),createdOn:React.createElement(React.Fragment,null,t.toLocaleDateString(),React.createElement("br",null),t.toLocaleTimeString()),actions:React.createElement(React.Fragment,null,"succeeded"===e.status&&React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",onClick:function(){return mt(e.model)}}),"cancelled"===e.status&&React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",onClick:function(){return dt(e.id)}}),"failed"===e.status&&React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",onClick:function(){return dt(e.id)}}),"pending"===e.status&&React.createElement(w.M,{className:"danger",rounded:!0,icon:"close",onClick:function(){return ft(e.id)}}))})}))}),[C,le,ce]),bt=se||g,wt=function(){var e=Gn(Pn().mark((function e(){var t,n;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,t=Ae.map((function(e){return(0,O.F1)(e)})).join("\n"),e.next=5,(0,O.IU)("".concat(T,"/openai/files/upload"),{method:"POST",nonce:A,json:{envId:re,filename:Be,data:t}});case 5:return n=e.sent,e.next=8,Je();case 8:n.success?(rt(!1),alert(He.ALERTS.DATASET_UPLOADED),S("files")):alert(n.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),alert(He.ALERTS.CHECK_CONSOLE);case 15:R(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),Rt=Vn((function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),o=e.getMinutes(),i=e.getSeconds();return"".concat(pe,":ft-your-org:").concat(j,"-").concat(t,"-").concat(n<10?"0"+n:n,"-").concat(r<10?"0"+r:r,"-").concat(a<10?"0"+a:a,"-").concat(o<10?"0"+o:o,"-").concat(i<10?"0"+i:i)}),[j,pe]),Ot=function(){var e=Gn(Pn().mark((function e(t){var n,r;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pn().mark((function e(){var n,a,o,i,l,c;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[r],a=new FileReader,o=n.name.endsWith(".json"),i=n.name.endsWith(".jsonl"),l=n.name.endsWith(".csv"),c=!1,o||i||l){e.next=10;break}return alert(He.ALERTS.ONLY_SUPPORTS_FILES),console.warn(n),e.abrupt("return",1);case 10:a.onload=function(){var e=Gn(Pn().mark((function e(t){var n,r,a,u;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.result,r=[],!o){e.next=14;break}e.prev=3,r=JSON.parse(n),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(3),console.error(e.t0),alert(He.ALERTS.ONLY_SUPPORTS_FILES),e.abrupt("return");case 12:e.next=15;break;case 14:i?(a=n.split("\n"),r=a.map((function(e){e=e.trim();try{return JSON.parse(e)}catch(t){return console.error(t,e),null}})),r.every((function(e){return e.messages}))||(c=!0)):l&&(u=Wt().parse(n,{header:!0,skipEmptyLines:!0}),r=u.data,console.log("The CSV was loaded!",r),c=!0);case 15:if(c&&(r=r.map((function(e){var t=Object.keys(e).reduce((function(t,n){return t[n.toLowerCase()]=e[n],t}),{});c=!0;var n=["prompt","question","q"].find((function(e){return t[e]})),r=["completion","reply","a"].find((function(e){return t[e]})),a=t[n],o=t[r],i=null==o?void 0:o.replace(/\n\n$/g,""),l=null==a?void 0:a.replace(/\n\n###\n\n$/g,"");return a&&o?{messages:[{role:"system",content:De},{role:"user",content:l.trim()},{role:"assistant",content:i.trim()}]}:null}))),(r=r.filter((function(e){return e}))).every((function(e){return null==e?void 0:e.messages}))){e.next=21;break}return alert(He.ALERTS.ONLY_SUPPORTS_FILES),e.abrupt("return");case 21:Le(r);case 22:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(n);case 12:case"end":return e.stop()}}),e)})),r=0;case 2:if(!(r<t.length)){e.next=9;break}return e.delegateYield(n(),"t0",4);case 4:if(!e.t0){e.next=6;break}return e.abrupt("continue",6);case 6:r++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Hello!",r=Ae.map((function(r,a){return a===e-1?Fn(Fn({},r),{},{messages:[].concat(Mn(r.messages),[{role:t,content:n}])}):r}));Le(r)},xt=Kn(null),St=null==ce?void 0:ce.filter(gt).length,Tt=null==ce?void 0:ce.filter(yt).length,Nt=null==ce?void 0:ce.filter(vt).length,Ct=Vn((function(){return React.createElement(we.u,{scrolldown:!0,value:re,onChange:ae,style:{marginLeft:5}},oe.filter((function(e){return"openai"===e.type})).map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})))}),[re,oe]),It=Vn((function(){if(0===qe.length)return null;var e=qe.slice(0,10).map((function(e,t){return React.createElement("span",{key:e,style:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return function(e){var t=Math.floor(e/ye);Ie(t+1)}(e)}},e,t<qe.slice(0,10).length-1?", ":"")}));return qe.length>10?React.createElement(React.Fragment,null,"Some entries are invalid, for example those ones: ",e,", and ",qe.length-10," more."):React.createElement(React.Fragment,null,"Some entries are invalid, for example those ones: ",e)}),[qe,ye]);return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0,minimal:!0,style:{margin:8}},React.createElement(b._,{inversed:!0,currentTab:x,onChange:function(e,t){S(t.key)},action:React.createElement(React.Fragment,null,React.createElement("div",{style:{flex:"auto"}}),"finetunes"===x&&React.createElement(React.Fragment,null,React.createElement(w.M,{disabled:g,busy:"finetunes"===g,onClick:tt,className:"secondary"},He.COMMON.REFRESH_MODELS),Ct),"files"===x&&React.createElement(React.Fragment,null,React.createElement(w.M,{disabled:g,onClick:Ze,className:"secondary"},"Refresh Files"),Ct),"editor"===x&&React.createElement(React.Fragment,null,React.createElement("label",{style:{marginRight:10}},"Filename:"),React.createElement(Re.A,{disabled:!$e||g,value:$e?Be:"",onChange:Ye,style:{width:220,marginRight:5}}),React.createElement(w.M,{className:"secondary",disabled:!We||g,icon:"upload",onClick:wt},"Upload to OpenAI"),Ct))},React.createElement(b.V,{title:He.COMMON.MODELS,key:"finetunes"},React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},React.createElement("div",null,(0,O.FE)(He.FINETUNING.MODELS_INTRO)),React.createElement(Kt.o,{value:C,onChange:function(e){I(e)}},React.createElement(Kt.K,{title:"Current",value:"current",count:null!=St?St:"-"}),React.createElement(Kt.K,{title:"Failed",value:"failed",count:null!=Tt?Tt:"-"}),React.createElement(Kt.K,{title:"Deleted",value:"deleted",count:null!=Nt?Nt:"-"}))),React.createElement(_e.g,null),React.createElement(qt.o,{busy:bt,data:Et,columns:Zn,emptyMessage:He.FINETUNING.NO_FINETUNES_YET}),React.createElement("div",{style:{marginTop:5,display:"flex",justifyContent:"end",lineHeight:"12px",alignItems:"center"}},React.createElement(w.M,{small:!0,disabled:g,busy:"clean"===g,onClick:nt,className:"primary"},He.FINETUNING.CLEAN_MODELS_LIST),React.createElement("small",{style:{marginLeft:5}},He.FINETUNING.DELETED_FINETUNE_ISSUE))),React.createElement(b.V,{title:He.COMMON.FILES,key:"files"},React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},React.createElement("div",null,(0,O.FE)(He.FINETUNING.FILES_INTRO)),React.createElement(Kt.o,{value:L,onChange:function(e){M(e)}},React.createElement(Kt.K,{title:"Datasets",value:"fine-tune"}),React.createElement(Kt.K,{title:"All",value:null}))),React.createElement(_e.g,null),React.createElement(qt.o,{busy:bt,data:ht,columns:Jn,emptyMessage:React.createElement(React.Fragment,null,"You do not have any dataset files yet.")})),React.createElement(b.V,{title:He.FINETUNING.DATASET_EDITOR,key:"editor"},!Ee&&React.createElement("p",{style:{color:"red"}},He.FINETUNING.HUGE_DATASET_WARNING),React.createElement(Xt.V,{style:{display:"flex"}},React.createElement(w.M,{icon:"plus",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Question?",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Answer.";Le([].concat(Mn(Ae),[{messages:[{role:"system",content:De},{role:"user",content:e},{role:"assistant",content:t}]}]))}()},disabled:g},"Add Entry"),Pe&&React.createElement(w.M,{onClick:function(){return at(De)},disabled:g},"Rewrite Instructions"),React.createElement("div",{style:{flex:"auto"}}),React.createElement($t.S,{style:{marginLeft:5},onLabel:"Expert",offLabel:"Easy",width:90,onBackgroundColor:o.purple,offBackgroundColor:o.green,onChange:je,checked:Pe}),React.createElement(Qt.Z,{ref:xt,onSelectFiles:Ot,accept:"",style:{paddingLeft:5}},React.createElement(w.M,{className:"secondary",onClick:function(){return xt.current.click()}},"Import")),React.createElement(w.M,{disabled:!$e,onClick:rt,className:"secondary"},"Clear")),React.createElement(_e.g,null),Ae.length>0&&(null==qe?void 0:qe.length)>0&&React.createElement(React.Fragment,null,React.createElement(Ne.X,{variant:"danger"},It),React.createElement(_e.g,null)),React.createElement(Se.a,{keepState:"datasetEditor"},React.createElement(Se.Y,{title:"Dataset"},React.createElement(_e.g,{tiny:!0}),React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{flex:"auto"}}),React.createElement(Jt.Q,{currentPage:Ce,limit:ye,total:$e,onCurrentPageChanged:Ie,onClick:Ie})),React.createElement(_e.g,{tiny:!0}),React.createElement(qt.o,{busy:g,data:ut,columns:Pe?Qn:$n,emptyMessage:React.createElement(React.Fragment,null,"You can import a file, or create manually each entry by clicking ",React.createElement("b",null,"Add"),".")}),React.createElement(_e.g,{tiny:!0}),React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{flex:"auto"}}),React.createElement(Jt.Q,{currentPage:Ce,limit:ye,total:$e,onCurrentPageChanged:Ie,onClick:Ie}),React.createElement(w.M,{disabled:!$e,style:{marginLeft:5},onClick:function(){var e=(0,O.F1)(Ae,2),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n;var a=new Date,o="".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate(),"-WP.json");r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},"Export as JSON"))),React.createElement(Se.Y,{title:He.COMMON.CONTEXT},React.createElement(_e.g,null),React.createElement("span",null,"The instructions are the same for all entries. It is used as the ",React.createElement("i",null,"system")," (and first) message in each conversation. More information ",React.createElement("a",{href:"https://platform.openai.com/docs/guides/fine-tuning/preparing-your-dataset",target:"_blank",rel:"noreferrer"},"here"),"."),React.createElement(_e.g,null),React.createElement(Vt.m,{id:"instructions",name:"instructions",rows:2,value:De,onBlur:ot,onEnter:ot})),React.createElement(Se.Y,{title:"Generator"},React.createElement(_e.g,null),React.createElement(An,{options:n,instructions:De,setMessages:Le}),React.createElement(Ne.X,{variant:"danger"},"Use this feature with caution. The AI will generate questions and answers for each of your post based on the given prompt, and they will be added to your dataset. Keep in mind that this process may be ",React.createElement("u",null,"extremely slow")," and require a ",React.createElement("u",null,"significant number of API calls"),", resulting in a ",React.createElement("u",null,"high cost"),".")),React.createElement(Se.Y,{title:"Instructions"},React.createElement("p",null,"You can create your dataset by importing a file (two columns, in the CSV, JSON or JSONL format) or manually by clicking ",React.createElement("b",null,"Add Entry"),". For the format, check this ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://gist.github.com/jordymeow/a855df4a1f644bb3df8c78ea87c1a2ca"},"JSON Example")," (more complex) or this ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://gist.github.com/jordymeow/e0c80ebeefe4d4d07ae39995c561ba4a"},"CSV Example")," (simpler). ",React.createElement("b",null,"Writing datasets is actually complex.")," Please have a look at OpenAI's ",React.createElement("a",{href:"https://platform.openai.com/docs/guides/fine-tuning/conditional-generation",target:"_blank",rel:"noreferrer"},"tutorials"),". And here is Meow Apps' ",React.createElement("a",{href:"https://meowapps.com/wordpress-chatbot-finetuned-model-ai/",target:"_blank",rel:"noreferrer"},"simplified tutorial"),". Is your dataset ready? Modify the filename to your liking and click ",React.createElement("b",null,"Upload to OpenAI"),"."),React.createElement("p",null,"To avoid losing your work, this data is kept in your browser's local storage."))))))),React.createElement(xe.L,{style:{margin:10}},React.createElement(Te.n,{isOpen:c,title:"Error",onRequestClose:function(){return d()},okButton:{label:"Ok",onClick:function(){return d()}},content:React.createElement(React.Fragment,null,React.createElement("p",null,null==c?void 0:c.message))}),React.createElement(Te.n,{isOpen:p,title:"Train a new model",onRequestClose:function(){return h()},okButton:{label:"Start",disabled:g,onClick:et},cancelButton:{label:"Close",disabled:g,onClick:function(){return h()}},content:React.createElement(React.Fragment,null,React.createElement("p",null,"Exciting!  You are about to create your own new model, based on your dataset. You simply need to select a base model, and optionally, to modify the ",React.createElement("a",{href:"https://beta.openai.com/docs/guides/fine-tuning/hyperparameters",target:"_blank",rel:"noreferrer"},"hyperparameters"),". Before starting the process, make sure that:"),React.createElement("ul",null,React.createElement("li",null," The dataset is well-defined."),React.createElement("li",null," You understand ",React.createElement("a",{href:"https://openai.com/api/pricing/#faq-fine-tuning-pricing-calculation",target:"_blank",rel:"noreferrer"},"OpenAI pricing")," about fine-tuning.")),React.createElement("label",null,"Base model:"),React.createElement(_e.g,{height:5}),React.createElement(Re.A,{value:pe,onChange:he,description:React.createElement(React.Fragment,null,"As of August 2024, you can use ",React.createElement("a",{href:"#",onClick:function(){return he("gpt-4o-mini-2024-07-18")}},"gpt-4o-mini-2024-07-18"),", ",React.createElement("a",{href:"#",onClick:function(){return he("gpt-3.5-turbo-0125")}},"gpt-3.5-turbo-0125"),", or any of your previously fine-tuned models. Check all the available models ",React.createElement("a",{href:"https://platform.openai.com/docs/guides/fine-tuning/which-models-can-be-fine-tuned",target:"_blank",rel:"noreferrer"},"here"),".")}),React.createElement(_e.g,{height:10}),React.createElement("label",null,"Suffix (for new model name):"),React.createElement(_e.g,{height:5}),React.createElement(Re.A,{value:j,onChange:F}),React.createElement(_e.g,{height:5}),React.createElement("small",null,"The name of the new model name will be decided by OpenAI. You can customize it a bit with a ",React.createElement("a",{href:"https://platform.openai.com/docs/guides/fine-tuning/create-a-fine-tuned-model",target:"_blank",rel:"noreferrer"},"suffix"),". Preview: ",React.createElement("b",null,Rt),"."),React.createElement(_e.g,{line:!0,height:20}),React.createElement(v.R,{label:"Enable HyperParams",checked:U,onChange:G}),U&&React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},React.createElement("label",{style:{marginRight:5}},"Number of Epochs:"),React.createElement(Re.A,{style:{marginRight:5},value:H,onChange:Y,type:"number"}),React.createElement("label",{style:{marginRight:5}},"Batch Size:"),React.createElement(Re.A,{value:W,onChange:V,type:"number"})),React.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},React.createElement("label",{style:{marginRight:5}},"Learning Rate Multiplier:"),React.createElement(Re.A,{style:{marginRight:5},value:q,onChange:X,type:"number"}),React.createElement("label",{style:{marginRight:5}},"Prompt Loss Weight:"),React.createElement(Re.A,{value:Q,onChange:J,type:"number"}))))})))};var rr;wp.element.useMemo;var ar,or,ir=U.Ay.div(rr||(ar=["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-height: 290px;\n  overflow: auto;\n  box-sizing: border-box;\n  padding: 15px;\n\n  h3 {\n    margin-top: 20px;\n    padding-bottom: 5px;\n    font-size: 14px;\n    border-bottom: 1px solid black;\n  }\n\n  .description {\n    border-radius: 5px;\n\n    p {\n      small {\n        color: var(--neko-blue);\n        font-size: 12px;\n      }\n    }\n\n    p:first-child {\n      margin-top: 0;\n    }\n\n    p:last-child {\n      margin-bottom: 0;\n    }\n  }\n"],or||(or=ar.slice(0)),rr=Object.freeze(Object.defineProperties(ar,{raw:{value:Object.freeze(or)}}))));const lr=function(e){var t,n,r=e.incidents,a=e.isLoading,o=(t=new Date,n=new Date(t.toLocaleString("en-US",{timeZone:"America/Los_Angeles"})),((t-n)/36e5).toFixed(0));return React.createElement(ir,null,React.createElement(m.s,null,"Only the incidents which occured ",React.createElement("b",null,"less than a week ago")," are displayed. The time difference between the PST time used by OpenAI and your local time is ",o," hours."),!a&&null==r&&React.createElement("p",null,React.createElement("i",null,"Could not load the incidents.")),!a&&0===(null==r?void 0:r.length)&&React.createElement("p",null,React.createElement("i",null,"Currently no incidents.")),r&&r.map((function(e){return React.createElement("div",{key:e.guid},React.createElement("h3",null,e.date,": ",e.title),React.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:e.description}}))})))};function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function ur(){ur=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==cr(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(cr(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function sr(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mr=wp.element.useState;const pr=function(e){var t=e.options,n=e.updateOption,r=e.busy,a=fr(mr("I would love to live on a tropical island with beautiful and sexy felines, where we could bask in the sun on the sandy beaches, sip on refreshing coconut milk, and enjoy each other's company. While we might occasionally fight in the trees, our days would mostly be spent in peaceful slumber. However, I am not sure of how we would handle any potential disruptions to our idyllic existence if human were to come..."),2),o=a[0],i=a[1],l=fr(mr([]),2),c=l[0],u=l[1],s=fr(mr(""),2),f=(s[0],s[1]),d=fr(mr(!1),2),m=d[0],h=d[1],y=null==t?void 0:t.chatbot_moderation,g=m||r,b=function(){var e,t=(e=ur().mark((function e(){var t,n;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,(0,O.IU)("".concat(T,"/ai/moderate"),{method:"POST",nonce:A,json:{text:o}});case 3:(t=e.sent).success?(n=t.results,u(null==n?void 0:n.results)):f(t.message),h(!1);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sr(o,r,a,i,l,"next",e)}function l(e){sr(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),_=React.createElement(p.d,{title:He.COMMON.CHATBOT},React.createElement(v.R,{name:"chatbot_moderation",label:He.COMMON.ENABLE,value:"1",checked:y,description:He.SETTINGS.CHATBOT_MODERATION_HELP,onChange:n}));return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{busy:g,title:He.COMMON.SETTINGS,className:"primary"},React.createElement("p",null,"You can enable moderation various parts of WordPress. It will slow down the processing a little."),_)),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{busy:g,title:"AI Moderation Tester",className:"primary"},React.createElement("p",null,"Paste a text below, and check if it is safe for your website. ",React.createElement("b",null,"OpenAI Moderation Model is free!")," Learn more about it ",React.createElement("a",{href:"https://platform.openai.com/docs/guides/moderation/overview",target:"_blank"},"here"),"."),React.createElement(Vt.m,{name:"context",rows:8,value:o,onChange:i}),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,onClick:b},"Moderation Check"),React.createElement(_e.g,null),React.createElement("label",null,"Results:"),React.createElement("pre",null,(0,O.F1)(c,2))))))};function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=hr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==hr(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gr(){gr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==hr(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(hr(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Er(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function br(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Er(o,r,a,i,l,"next",e)}function l(e){Er(o,r,a,i,l,"throw",e)}i(void 0)}))}}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rr=wp.element,Or=Rr.useState,_r=Rr.useEffect,xr=Rr.useMemo;const Sr=function(e){var t,n,r=e.modal,a=e.busy,o=e.setModal,i=e.onAddEmbedding,l=e.onModifyEmbedding,c=(t=Or(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],f=a;_r((function(){"edit"!==(null==r?void 0:r.type)&&"add"!==(null==r?void 0:r.type)||s((null==r?void 0:r.data)||{})}),[r]);var d=xr((function(){var e,t,n,a,o;return null==r||!r.data||(null==r||null===(e=r.data)||void 0===e?void 0:e.title)!==(null==u?void 0:u.title)||(null==r||null===(t=r.data)||void 0===t?void 0:t.content)!==(null==u?void 0:u.content)||(null==r||null===(n=r.data)||void 0===n?void 0:n.behavior)!==(null==u?void 0:u.behavior)||(null==r||null===(a=r.data)||void 0===a?void 0:a.type)!==(null==u?void 0:u.type)||(null==r||null===(o=r.data)||void 0===o?void 0:o.refId)!==(null==u?void 0:u.refId)}),[r,u]),m=function(){var e=br(gr().mark((function e(){return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(u);case 3:o(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=br(gr().mark((function e(){return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(u);case 3:o(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement(Te.n,{isOpen:"edit"===(null==r?void 0:r.type)||"add"===(null==r?void 0:r.type),title:"edit"===(null==r?void 0:r.type)?He.COMMON.MODIFY_EMBEDDING:He.COMMON.ADD_EMBEDDING,okButton:{label:"edit"===(null==r?void 0:r.type)?He.COMMON.MODIFY_EMBEDDING:He.COMMON.ADD_EMBEDDING,disabled:!d||a,isBusy:"addEmbedding"===a,onClick:function(){"edit"===r.type?m():p()}},cancelButton:{disabled:a,onClick:function(){return o(null)}},onRequestClose:function(){return o(null)},content:React.createElement(React.Fragment,null,React.createElement("p",null,"A custom embedding can be a sentence, a paragraph or a whole article. When an user input is made, the AI will search for the best embedding that matches the user input and will be able to reply with more accuracy."),React.createElement(_e.g,null),React.createElement("label",null,"Title:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Re.A,{value:null==u?void 0:u.title,placeholder:'Title, like "My Website Information"',description:"This is for your convenience only, it's not used anywhere.",onChange:function(e){return s(yr(yr({},u),{},{title:e}))}}),React.createElement(_e.g,null),React.createElement("label",null,"Content:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{countable:"chars",maxLength:64e3,description:"The content of your embeddings that will be used by the AI if it matches the user input.",value:null==u?void 0:u.content,onChange:function(e){return s(yr(yr({},u),{},{content:e}))}}),React.createElement(_e.g,null),React.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},React.createElement("div",{style:{flex:3}},React.createElement("label",null,"Behavior:"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"behavior",disabled:f||!0,value:null==u?void 0:u.behavior,onChange:function(e){s(yr(yr({},u),{},{behavior:e}))}},React.createElement(we.j,{value:"context",label:"Context"}),React.createElement(we.j,{value:"reply",label:"Reply"}))),React.createElement("div",{style:{flex:3,marginLeft:5}},React.createElement("label",null,"Type:"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"type",disabled:f||!0,value:null==u?void 0:u.type,onChange:function(e){s(yr(yr({},u),{},{type:e}))}},React.createElement(we.j,{value:"manual",label:"Manual"}),React.createElement(we.j,{value:"postId",label:"Related to Post"}))),"postId"===(null==u?void 0:u.type)&&React.createElement("div",{style:{flex:1,marginLeft:5}},React.createElement("label",null,"Post ID:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Re.A,{value:null==u?void 0:u.refId,disabled:!0,onChange:function(e){return s(yr(yr({},u),{},{refId:e}))}}))))}))};function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Nr(){Nr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Tr(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Tr(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Cr(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ir(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Cr(o,r,a,i,l,"next",e)}function l(e){Cr(o,r,a,i,l,"throw",e)}i(void 0)}))}}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lr=wp.element.useState;function Mr(e,t){var n=new Blob([e],{type:"text/plain;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}const Pr=function(e){var t=e.modal,n=e.setModal,r=kr(Lr(!1),2),a=r[0],o=r[1],i=kr(Lr(0),2),l=i[0],c=i[1],u=kr(Lr(0),2),s=u[0],f=u[1],d=null==t?void 0:t.data,m=function(){var e=Ir(Nr().mark((function e(){var t,n,r,a,i,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,h();case 4:t=e.sent,n=(0,O.F1)(t,2),r=new Date,a=r.getFullYear(),i=r.getMonth()+1,l=r.getDate(),Mr(n,"vectors-".concat(a,"-").concat(i,"-").concat(l,".json")),setTimeout((function(){c(0)}),1e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while exporting vectors. Check your console.");case 18:return e.prev=18,o(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Ir(Nr().mark((function e(){var t,n,r,a,i,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,h();case 4:t=e.sent,n=Wt().unparse(t),r=new Date,a=r.getFullYear(),i=r.getMonth()+1,l=r.getDate(),Mr(n,"vectors-".concat(a,"-").concat(i,"-").concat(l,".csv")),setTimeout((function(){c(0)}),1e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while exporting vectors. Check your console.");case 18:return e.prev=18,o(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Ir(Nr().mark((function e(){var t,n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n={page:1,limit:20,filters:{envId:d.envId,dbIndex:d.dbIndex,dbNS:d.dbNS}},r=[],a=Nr().mark((function e(){var a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(n);case 2:(a=e.sent).vectors.length<2&&(t=!0),c((function(){return a.total})),r=r.concat(a.vectors),f((function(){return r.length})),n.page++;case 8:case"end":return e.stop()}}),e)}));case 4:if(t){e.next=8;break}return e.delegateYield(a(),"t0",6);case 6:e.next=4;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement(Te.n,{isOpen:"export"===(null==t?void 0:t.type),title:"Export Embeddings",onRequestClose:function(){return n(null)},okButton:{label:"Close",disabled:a,onClick:function(){return n(null)}},customButtons:React.createElement(React.Fragment,null,React.createElement(w.M,{onClick:p,disabled:a},"Export CSV"),React.createElement(w.M,{onClick:m,disabled:a},"Export JSON")),content:React.createElement(React.Fragment,null,React.createElement(Zt.j,{busy:a,style:{flex:"auto"},value:s,max:l}))}))};function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Fr(){Fr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==jr(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(jr(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=jr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==jr(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Br(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Br(o,r,a,i,l,"next",e)}function l(e){Br(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||zr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vr=wp.element.useState;const Kr=function(e){var t,n,r=e.modal,a=e.setModal,o=e.onAddEmbedding,i=e.onModifyEmbedding,l=Yr(Vr(!1),2),c=l[0],u=l[1],s=Yr(Vr(0),2),f=s[0],d=s[1],m=Yr(Vr(0),2),p=m[0],h=m[1],y=Yr(Vr({add:[],modify:[],same:[],total:0,isReady:!1}),2),g=y[0],E=y[1],b=null!==(t=null==r||null===(n=r.data)||void 0===n?void 0:n.importVectors)&&void 0!==t?t:[],R=Yr(Vr({envId:!1,dbId:!1,dbIndex:!1,dbNS:!1,title:!0,refId:!0}),2),O=R[0],_=R[1],x=null==r?void 0:r.data,S=function(e){var t,n,r,a,o,i,l,c,u,s;return{id:null!==(t=e.id)&&void 0!==t?t:null,type:null!==(n=e.type)&&void 0!==n?n:"manual",title:null!==(r=e.title)&&void 0!==r?r:"N/A",behavior:null!==(a=e.behavior)&&void 0!==a?a:"context",envId:null!==(o=null==x?void 0:x.envId)&&void 0!==o?o:null,dbId:null!==(i=e.dbId)&&void 0!==i?i:null,dbIndex:null!==(l=x.dbIndex)&&void 0!==l?l:null,dbNS:null!==(c=x.dbNS)&&void 0!==c?c:null,content:null!==(u=e.content)&&void 0!==u?u:"",refId:null!==(s=e.refId)&&void 0!==s?s:null}},T=function(e,t,n){return Object.keys(n).every((function(r){return!n[r]||e[r]===t[r]}))},N=function(){var e=Hr(Fr().mark((function e(t,n){var r,a,o,i,l,c,u;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],o=[],console.log("Calculate Diff",{currentVectors:t,importVectors:n}),i=Gr(n),e.prev=5,c=Fr().mark((function e(){var n,i,c,u;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value,i=S(n),c=t.find((function(e){return T(e,i,O)})),console.log("Matched Vector",{cleanVector:Ur({},i),matchedVector:Ur({},c)}),c?i.id=c.id:delete i.id,(u=t.find((function(e){return e.id===i.id})))&&i.content===u.content&&i.title===u.title?o.push(i):i.id?a.push(i):r.push(i);case 7:case"end":return e.stop()}}),e)})),i.s();case 8:if((l=i.n()).done){e.next=12;break}return e.delegateYield(c(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:u=r.length+a.length,E({add:r,modify:a,same:o,total:u,isReady:!0}),console.log("Embeddings Diff",{add:r,modify:a,same:o,total:u});case 23:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Hr(Fr().mark((function e(){var t,n,r,a;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=!1,n={page:1,limit:20,filters:{envId:x.envId,dbIndex:x.dbIndex,dbNS:x.dbNS}},r=[],u("stepOne"),a=Fr().mark((function e(){var a;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(n);case 2:(a=e.sent).vectors.length<2&&(t=!0),d((function(){return a.total})),r=r.concat(a.vectors),h((function(){return r.length})),n.page++;case 8:case"end":return e.stop()}}),e)}));case 6:if(t){e.next=10;break}return e.delegateYield(a(),"t0",8);case 8:e.next=6;break;case 10:N(r,b),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(0),console.error(e.t1),alert("An error occured while retrieving your current embeddings. Check your console.");case 17:return e.prev=17,u(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Hr(Fr().mark((function e(){var t,n,r,a,l,c;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,d(g.add.length+g.modify.length),h(0),u("stepTwo"),t=Gr(g.add),e.prev=5,t.s();case 7:if((n=t.n()).done){e.next=14;break}return r=n.value,e.next=11,o(r,!0);case 11:h((function(e){return e+1}));case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:a=Gr(g.modify),e.prev=23,a.s();case 25:if((l=a.n()).done){e.next=32;break}return c=l.value,e.next=29,i(c,!0);case 29:h((function(e){return e+1}));case 30:e.next=25;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(23),a.e(e.t1);case 37:return e.prev=37,a.f(),e.finish(37);case 40:alert("All embeddings have been updated."),E({add:[],modify:[],same:[],total:0,isReady:!1}),k(),e.next=49;break;case 45:e.prev=45,e.t2=e.catch(0),console.error(e.t2),alert("An error occured while updating embeddings. Check your console.");case 49:return e.prev=49,u(!1),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[0,45,49,52],[5,16,19,22],[23,34,37,40]])})));return function(){return e.apply(this,arguments)}}(),k=function(){a(null),u(!1),d(0),h(0),E({add:[],modify:[],same:[],total:0,isReady:!1})};return React.createElement(React.Fragment,null,React.createElement(Te.n,{isOpen:"import"===(null==r?void 0:r.type),title:"Import Embeddings",onRequestClose:k,okButton:{label:"Close",onClick:k,disabled:c},customButtons:React.createElement(React.Fragment,null,React.createElement(w.M,{onClick:C,disabled:c},"Check Differences"),React.createElement(w.M,{onClick:I,disabled:c||0===g.total},"Apply Changes")),content:React.createElement(React.Fragment,null,React.createElement("p",null,"There are ",React.createElement("b",null,b.length," embeddings")," in the file."),React.createElement(_e.g,null),React.createElement(Se.Y,{title:"1 - Check Differences"}),React.createElement("p",null,"Calculates the differences between the embeddings in your file and the ones currently registered in AI Engine. Based on that, a list of changes will be created. Please note that the environment, index and namespace that might be set in the file will be ignored."),React.createElement("p",{style:{marginTop:10}},"An embedding will be considered the same entry based on:"),React.createElement(_e.g,null),React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{marginLeft:15}},React.createElement(v.R,{small:!0,label:"DB ID",disabled:!1,checked:O.dbId,onChange:function(){return _(Ur(Ur({},O),{},{dbId:!O.dbId}))}})),React.createElement("div",{style:{marginLeft:15}},React.createElement(v.R,{small:!0,label:"Title",disabled:!1,checked:O.title,onChange:function(){return _(Ur(Ur({},O),{},{title:!O.title}))}})),React.createElement("div",{style:{marginLeft:15}},React.createElement(v.R,{small:!0,label:"Ref (Post ID)",disabled:!1,checked:O.refId,onChange:function(){return _(Ur(Ur({},O),{},{refId:!O.refId}))}}))),"stepOne"===c&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Zt.j,{busy:c,style:{flex:"auto"},value:p,max:f})),React.createElement(_e.g,null),React.createElement(Se.Y,{title:"2 - Apply Changes"}),!g.isReady&&React.createElement("i",null,"Waiting for diff..."),g.isReady&&React.createElement(React.Fragment,null,React.createElement("p",null,"There are ",g.same.length>=1&&React.createElement("span",null,React.createElement("b",null,g.same.length," identical embeddings")," (with the same title and content). They will be ignored."),React.createElement("span",null,"Changes to apply:")),React.createElement("ul",null,React.createElement("li",null," Add: ",React.createElement("b",null,g.add.length)),React.createElement("li",null," Modify: ",React.createElement("b",null,g.modify.length)))),"stepTwo"===c&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Zt.j,{busy:c,style:{flex:"auto"},value:p,max:f})),React.createElement(_e.g,null))}))};function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Xr(e){return function(e){if(Array.isArray(e))return ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||na(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(){$r=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==qr(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(qr(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=qr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==qr(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zr(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ea(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zr(o,r,a,i,l,"next",e)}function l(e){Zr(o,r,a,i,l,"throw",e)}i(void 0)}))}}function ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||na(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){if(e){if("string"==typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ra(e,t):void 0}}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aa=wp.element,oa=aa.useState,ia=aa.useMemo,la=aa.useEffect,ca=aa.useRef,ua=[{accessor:"status",title:"Status",width:"80px"},{accessor:"title",title:"Title / Model",sortable:!1},{accessor:"type",title:"Ref",sortable:!1,width:"75px"},{accessor:"score",title:"Score",sortable:!0,width:"65px"},{accessor:"updated",title:"Updated",sortable:!1,width:"80px"},{accessor:"actions",title:"",width:"100px"}],sa=[{accessor:"status",title:"Status",sortable:!0,width:"80px"},{accessor:"title",title:"Title / Model",sortable:!1},{accessor:"type",title:"Ref",sortable:!0,width:"75px"},{accessor:"updated",title:"Updated",sortable:!0,width:"80px"},{accessor:"actions",title:"",width:"100px"}],fa=function(e){var t=e.embedding,n=e.envName,r=(0,s.z)().colors,a=t.status,o=t.content,i=t.error,l=ia((function(){if("ok"===a){if(!n)return"env_issue";if(!o)return"empty"}return a}),[a,n,o]),c=ia((function(){return"orphan"===l?"This embedding was retrieved from the Vector DB, but it has no content. Add some, or delete it.":"env_issue"===l?"This embedding is not related to any Embeddings Environment. Make sure you have an Embeddings Environment selected, and Sync/Refresh it; it will be linked to the current environment. You can also delete it.":"empty"===l?"This embedding has no content.":i||null}),[l,i]),u=ia((function(){var e={outdated:{icon:"alert",color:r.orange},ok:{icon:"check-circle",color:r.green},error:{icon:"alert",color:r.red},orphan:{icon:"pencil",color:r.orange},env_issue:{icon:"database",color:r.red},empty:{icon:"alert",color:r.orange},default:{icon:"alert",color:r.orange}};return e[l]||e.default}),[l,r]),f=u.icon,d=u.color;return React.createElement("div",{style:{display:"flex",alignItems:"center"},title:c},React.createElement(Oe.z,{icon:f,width:24,color:d,title:c}),React.createElement("span",{style:{textTransform:"uppercase",fontSize:9,marginLeft:3}},l))};const da=function(e){var t,n=e.options,r=e.updateOption,a=(0,u.jE)(),o=(0,s.z)().colors,i=ta(oa("post"),2),l=i[0],c=i[1],d=ta(oa(!1),2),p=d[0],h=d[1],y=ta(oa("edit"),2),g=y[0],_=y[1],x=ta(oa(null),2),S=x[0],N=x[1],C=ta(oa(!1),2),I=C[0],k=C[1],L=ta(oa([]),2),M=L[0],P=L[1],j=ta(oa({type:null,data:null}),2),F=j[0],D=j[1],U=ta(oa(null),2),G=U[0],B=U[1],H=n.embeddings||{},Y=ca(null),z=ft(n,!1,!0),W=n.embeddings_envs||[],V=ta(oa(function(){var e=localStorage.getItem("mwai-admin-embeddings");try{var t=JSON.parse(e);return{environmentId:(null==t?void 0:t.environmentId)||null}}catch(e){return{environmentId:null}}}().environmentId),2),K=V[0],q=V[1],X=ia((function(){return W.find((function(e){return e.id===K}))||null}),[W,K]),$=(null==X?void 0:X.min_score)>=0?X.min_score:35,Q=(null==X?void 0:X.max_select)>=0?X.max_select:10,J=ia((function(){return null!=X&&X.ai_embeddings_override&&null!=X&&X.ai_embeddings_env&&null!=X&&X.ai_embeddings_model?z.getModel(X.ai_embeddings_model):z.getModel(n.ai_embeddings_default_model)}),[X,H.model]),Z=(0,f.I)({queryKey:["postTypes"],queryFn:on}),ee=Z.isLoading,te=Z.data,ne=(0,f.I)({queryKey:[null!==(t="postsCount-"+l+"-"+(null==H?void 0:H.syncPostStatus))&&void 0!==t?t:"publish"],queryFn:function(){var e;return vt(l,null!==(e=null==H?void 0:H.syncPostStatus)&&void 0!==e?e:"publish")}}),re=ne.isLoading,ae=ne.data,oe=ta(oa({filters:{envId:K,search:S,debugMode:!1},sort:{accessor:"updated",by:"desc"},page:1,limit:20}),2),ie=oe[0],le=oe[1],ce=(0,f.I)({queryKey:["vectors",ie],queryFn:function(){return ht(ie)}}),ue=ce.isFetching,se=ce.data,fe=ce.error,de=ue||"searchVectors"===p,me="search"===g?ua:sa,pe=(0,en.XS)({i18n:He,onStop:function(){h(),pe.reset()}}),he=p||de||pe.isBusy||ee,ve=function(){var e=ea($r().mark((function e(t){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("updateSettings"),e.next=3,r(Jr({},t),"embeddings");case 3:h(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=ia((function(){return H.syncPosts&&(null==H?void 0:H.syncPostsEnvId)!==K}),[K,H]);la((function(){!H.syncPosts&&H.syncPostsEnvId&&ve(Jr(Jr({},H),{},{syncPostsEnvId:null}))}),[H.syncPosts]);var ge=ia((function(){return W.find((function(e){return e.id===H.syncPostsEnvId}))||null}),[H.syncPostsEnvId]);la((function(){var e;le(Jr(Jr({},ie),{},{filters:{envId:K,search:S,debugMode:G}})),e={environmentId:K||null},localStorage.setItem("mwai-admin-embeddings",(0,O.F1)(e))}),[K,G]),la((function(){var e="edit"===g?null:"";N("edit"===g?null:""),le(Jr(Jr({},ie),{},{filters:Jr(Jr({},ie.filters),{},{search:e}),sort:{accessor:"edit"===g?"created":"score",by:"desc"},page:1,limit:20}))}),[g]),la((function(){var e,t;null!=H&&null!==(e=H.syncPostTypes)&&void 0!==e&&e.length&&null!=H&&null!==(t=H.syncPostStatus)&&void 0!==t&&t.length||ve(Jr(Jr({},H),{},{syncPostTypes:["post","page","product"],syncPostStatus:["publish"]}))}),[H.syncPostTypes]);var Ee=ia((function(){var e={padding:"8px 15px",textAlign:"center"};return H.syncPosts&&!ge?React.createElement(Ne.X,{variant:"danger",style:e},"Pick a valid environment for the sync."):H.syncPosts?React.createElement(Ne.X,{variant:"special",style:e},"Enabled on ",React.createElement("b",null,null==ge?void 0:ge.name)):React.createElement(Ne.X,{variant:"info",style:e},"Disabled")}),[H]),be=function(){var e=ea($r().mark((function e(){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S!==ie.filters.search){e.next=3;break}return a.invalidateQueries({queryKey:["vectors"]}),e.abrupt("return");case 3:le(Jr(Jr({},ie),{},{filters:Jr(Jr({},ie.filters),{},{search:S})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=ea($r().mark((function e(){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(""),le(Jr(Jr({},ie),{},{filters:Jr(Jr({},ie.filters),{},{search:""})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=ea($r().mark((function e(){var t,n,r,a,o,i=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:I,(n=i.length>1&&void 0!==i[1]&&i[1])||h("addEmbedding"),e.prev=3,(r=Jr({},t)).envId||(r.envId=X.id),e.next=8,(0,O.IU)("".concat(T,"/vectors/add"),{nonce:A,method:"POST",json:{vector:r}});case 8:a=e.sent,Me(null==a?void 0:a.vector,!0),k(!1),console.log("Embedding Added",t),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(3),console.error(e.t0),new Error(null!==(o=e.t0.message)&&void 0!==o?o:"Unknown error, check your console logs.");case 18:return e.prev=18,n||h(!1),e.finish(18);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,null,[[3,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=ea($r().mark((function e(){var t,n,r,a,o,i=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:I,(n=i.length>1?i[1]:void 0)||h("addEmbedding"),e.prev=3,(r=Jr({},t)).envId=X.id,e.next=8,(0,O.IU)("".concat(T,"/vectors/update"),{nonce:A,method:"POST",json:{vector:r}});case 8:a=e.sent,Me(null==a?void 0:a.vector),k(!1),console.log("Embeddings updated.",a),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(3),console.error(e.t0),new Error(null!==(o=e.t0.message)&&void 0!==o?o:"Unknown error, check your console logs.");case 18:return e.prev=18,n||h(!1),e.finish(18);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,null,[[3,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=ea($r().mark((function e(t,n){var r;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||h("deleteEmbedding"),e.prev=1,e.next=4,(0,O.IU)("".concat(T,"/vectors/delete"),{nonce:A,method:"POST",json:{envId:X.id,ids:t}});case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),console.error(e.t0),confirm("Got an error from the vector database:\n\n".concat(e.t0.message,"\n\nDo you want to force the deletion locally?"))){e.next=11;break}throw new Error(null!==(r=e.t0.message)&&void 0!==r?r:"Unknown error, check your console logs.");case 11:return e.next=13,(0,O.IU)("".concat(T,"/vectors/delete"),{nonce:A,method:"POST",json:{envId:X.id,ids:t,force:!0}});case 13:return e.prev=13,n||h(!1),e.finish(13);case 16:console.log("Embeddings deleted.",{ids:t}),a.invalidateQueries({queryKey:["vectors"]}),"search"===g&&console.error("We should update the vectors data with the deleted embeddings.");case 19:case"end":return e.stop()}}),e,null,[[1,6,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=ea($r().mark((function e(t){var n,r;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$r().mark((function e(){var n,a,o,i,l;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[r],a=new FileReader,o=n.name.endsWith(".json"),i=n.name.endsWith(".jsonl"),l=n.name.endsWith(".csv"),o||i||l){e.next=8;break}return alert(He.ALERTS.ONLY_SUPPORTS_FILES),e.abrupt("return",1);case 8:a.onload=function(){var e=ea($r().mark((function e(t){var n,r,a,c,u,s,f;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,r=[],o?r=JSON.parse(n):i?(a=n.split("\n"),r=a.map((function(e){e=e.trim();try{return JSON.parse(e)}catch(e){return console.error(e),null}}))):l&&(c=Wt().parse(n,{header:!0,skipEmptyLines:!0}),r=c.data,console.log("The CSV for Embeddings Import was loaded.",r)),s=(u=r).filter((function(e){return e.title&&e.content})),u.length!==s.length&&(alert(He.ALERTS.EMPTY_LINES_EMBEDDINGS),f=u.find((function(e){return!e.prompt||!e.completion})),console.warn("Empty line: ",f)),D({type:"import",data:{importVectors:s,envId:K}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(n);case 10:case"end":return e.stop()}}),e)})),r=0;case 2:if(!(r<t.length)){e.next=9;break}return e.delegateYield(n(),"t0",4);case 4:if(!e.t0){e.next=6;break}return e.abrupt("continue",6);case 6:r++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=ea($r().mark((function e(){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to delete the selected embeddings?")){e.next=2;break}return e.abrupt("return");case 2:return h("deleteEmbeddings"),e.next=5,Te(M);case 5:P([]),h(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=ia((function(){return(null==se?void 0:se.total)||0}),[se]),Ae=ia((function(){var e=se;return null!=e&&e.vectors?null==e?void 0:e.vectors.map((function(e){var t,n,r,a=new Date(e.updated),i=(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),l=a.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=React.createElement("span",null,i,React.createElement("br",null),l),u=new Date(e.created),s=(u=new Date(u.getTime()-60*u.getTimezoneOffset()*1e3)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),f=e.score?React.createElement("span",{style:{color:e.score>$/100?"var(--neko-green)":"inherit"}},(100*e.score.toFixed(4)).toFixed(2)):"-",d=null;e.subType&&"string"==typeof e.subType&&(d=e.subType.toUpperCase());var m=null!==(t=null===(n=z.getModel(e.model))||void 0===n?void 0:n.name)&&void 0!==t?t:e.model,p=e.model&&e.model!==(null==J?void 0:J.model),h=e.envId!==K,v=null===(r=W.find((function(t){return t.id===e.envId})))||void 0===r?void 0:r.name,y="ok"!==e.status||p||h,g=null;return p&&(g=React.createElement("b",{style:{color:o.red}},"[MODEL MISMATCH] "),console.error("Embeddings Model Mismatch for #".concat(e.id,': "').concat(e.title,'". Should be "').concat(null==J?void 0:J.model,'" but "').concat(e.model,'" was found. Sync will fix this.'))),h&&v&&(g=React.createElement("b",{style:{color:o.green}},"[ENV: ",v,"] ")),{id:e.id,type:React.createElement("small",null,e.refId?React.createElement(React.Fragment,null,"ID ",React.createElement("a",{href:"/wp-admin/post.php?post=".concat(e.refId,"&action=edit"),target:"_blank",rel:"noreferrer"},"#",e.refId),React.createElement("br",null),React.createElement("div",{style:{fontSize:"80%",marginTop:-5}},d)):"MANUAL"),score:f,title:React.createElement(React.Fragment,null,React.createElement("span",null,e.title),React.createElement("br",null),React.createElement("small",{style:{color:p?o.red:"inherit"}},g,m," ",e.dimensions&&React.createElement(React.Fragment,null," (",e.dimensions,")"))),status:React.createElement(fa,{embedding:e,envName:v}),updated:c,created:s,actions:React.createElement(React.Fragment,null,React.createElement(w.M,{className:"primary",rounded:!0,icon:"pencil",disabled:he,onClick:function(){return D({type:"edit",data:e})}}),React.createElement(w.M,{className:"primary",rounded:!0,icon:"replay",disabled:he||!y,onClick:function(){return Le(e.id)}}),React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",disabled:he,onClick:function(){return Te([e.id])}}))}})):[]}),[g,se,he]),Le=function(){var e=ea($r().mark((function e(t){var n;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("syncEmbedding"),e.prev=1,e.next=4,Pe(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),alert(null!==(n=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==n?n:e.t0);case 10:h(!1);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),Me=function(e){a.invalidateQueries({queryKey:["vectors"]})},Pe=function(){var e=ea($r().mark((function e(){var t,n,r,a,o=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:void 0,e.next=5,bt({vectorId:t,postId:n,envId:K},r);case 5:(a=e.sent).success&&Me(a.vector);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=ea($r().mark((function e(){var t,n,r,o,i,l,c,u;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("bulkPullAll"),t={page:1,limit:1e4,filters:{envId:K}},n=[],r=[],o=!1;case 5:if(o){e.next=14;break}return e.next=8,dt(t);case 8:(i=e.sent).vectors.length<t.limit&&(o=!0),n=n.concat(i.vectors),t.page++,e.next=5;break;case 14:console.log("Remote vectors retrieved.",{remoteVectors:n}),o=!1,t.limit=20,t.page=0;case 18:if(o){e.next=27;break}return e.next=21,ht(t);case 21:(l=e.sent).vectors.length<t.limit&&(o=!0),r=r.concat(l.vectors),t.page++,e.next=18;break;case 27:if(r=r.map((function(e){return e.dbId})),console.log("Local vectors retrieved.",{vectors:r}),c=n.filter((function(e){return!r.includes(e)})),console.log("Vectors to pull from Vector DB to AI Engine.",{vectorsToPull:c}),c.length){e.next=35;break}return h(!1),alert("".concat(n.length," vectors were pulled from the remote database. They are already synchronized with the local database.")),e.abrupt("return");case 35:return u=c.map((function(e){return function(){var t=ea($r().mark((function t(n){return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt({envId:K,dbId:e},n);case 2:return t.next=4,a.invalidateQueries({queryKey:["vectors"]});case 4:return t.abrupt("return",{success:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),e.next=38,pe.start(u);case 38:h(!1),alert("All done! For more information, check the console (Chrome Developer Tools)."),pe.reset();case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=ea($r().mark((function e(){var t,n,r,a,o=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],h("bulkPushAll"),n=[],!t&&0!==M.length){e.next=10;break}return e.next=6,yt(l,H.syncPostStatus);case 6:r=e.sent,n=r.map((function(e){return function(){var t=ea($r().mark((function t(n){return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe(null,e,n);case 2:return t.abrupt("return",{success:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),e.next=12;break;case 10:a=se.vectors.filter((function(e){return M.includes(e.id)})),n=a.map((function(e){return function(){var t=ea($r().mark((function t(n){return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("postId"!==e.type){t.next=5;break}return t.next=3,Pe(e.id,null,n);case 3:t.next=8;break;case 5:if("manual"!==e.type){t.next=8;break}return t.next=8,Se(e,n);case 8:return t.abrupt("return",{success:!0});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}));case 12:return e.next=14,pe.start(n);case 14:h(!1),alert("All done! For more information, check the console (Chrome Developer Tools). Posts with very short content (or content that could not be retrieved) are skipped."),pe.reset();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=ea($r().mark((function e(){var t,n;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=prompt("Enter the Post ID to synchronize with:")){e.next=3;break}return e.abrupt("return");case 3:return h("singleRun"),e.prev=4,e.next=7,Pe(null,t);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0),alert(null!==(n=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==n?n:e.t0);case 13:h(!1);case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),Ue=ia((function(){var e;return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex"}},React.createElement(we.u,{scrolldown:!0,name:"environment",style:{flex:1,marginBottom:5},disabled:he,value:null!==(e=null==X?void 0:X.id)&&void 0!==e?e:null,onChange:function(e){q(e)}},W.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),!(null!=W&&W.length)&&React.createElement(we.j,{value:null,label:"None"}))))}),[X,W,he]),Ge=ia((function(){return null!=fe&&fe.message?React.createElement(Ne.X,{variant:"danger",style:{margin:"5px 5px"}},React.createElement("b",null,fe.message),React.createElement("br",null),React.createElement("small",null,"Check your Console Logs and PHP Error Logs for more information.")):"search"===g?He.HELP.NO_EMBEDDINGS_RESULTS:He.HELP.NO_EMBEDDINGS_ROWS}),[g,fe]);return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0,minimal:!0,style:{margin:10}},React.createElement("div",{style:{display:"flex"}},React.createElement(Xt.V,{style:{flex:1,marginRight:15}},React.createElement($t.S,{style:{marginRight:10},disabled:he,onLabel:He.EMBEDDINGS.AI_SEARCH,offLabel:He.EMBEDDINGS.EDIT,width:110,onValue:"search",offValue:"edit",checked:"search"===g,onChange:_,onBackgroundColor:o.purple,offBackgroundColor:o.green}),"edit"===g&&React.createElement(React.Fragment,null,React.createElement(w.M,{className:"primary",disabled:!X||he,onClick:function(){return D({type:"add",data:ut})}},"Add"))),React.createElement(Xt.V,{style:{flex:"auto"}},"edit"===g&&React.createElement(React.Fragment,null,M.length>0&&React.createElement(React.Fragment,null,React.createElement(w.M,{className:"primary",disabled:he,isBusy:"bulkPushAll"===p,onClick:function(){return Fe(!1)}},"Sync Selected"),React.createElement(w.M,{className:"danger",disabled:he,onClick:Ie},He.COMMON.DELETE_SELECTED)),M.length>0&&React.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:10,marginRight:10}},M.length," selected"),React.createElement(Zt.j,{busy:pe.busy,style:{flex:"auto"},value:pe.value,max:pe.max,onStopClick:pe.stop})),"search"===g&&React.createElement("div",{style:{flex:"auto",display:"flex"}},React.createElement(Re.A,{style:{flex:"auto",marginRight:5},placeholder:"Search",disabled:!X||he,value:S,onChange:N,onEnter:be,onReset:Oe}),React.createElement(w.M,{className:"primary",onClick:be,disabled:!X||he||!S,isBusy:"searchVectors"===p},"Search"))))),React.createElement(E.Y,{minimal:!0,style:{flex:3}},React.createElement(R.z,{className:"primary",title:"Embeddings",action:React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(we.u,{scrolldown:!0,name:"debugMode",style:{width:180},disabled:he,value:G||null,onChange:B},React.createElement(we.j,{value:null,label:"Current Environment"}),React.createElement(we.j,{value:"includeOrphans",label:"With Orphans"}),React.createElement(we.j,{value:"includeAll",label:"All Envs & Orphans"})),React.createElement(w.M,{className:"secondary",style:{marginLeft:5},disabled:!X||de,onClick:function(){a.invalidateQueries({queryKey:["vectors"]})}},He.COMMON.REFRESH)))},React.createElement(qt.o,{busy:he,sort:ie.sort,onSortChange:function(e,t){le(Jr(Jr({},ie),{},{sort:{accessor:e,by:t}}))},emptyMessage:Ge,data:Ae,columns:me,onSelectRow:function(e){1===M.length&&M[0]===e&&P([]),P([e])},onSelect:function(e){P([].concat(Xr(M),Xr(e)))},onUnselect:function(e){P(Xr(M.filter((function(t){return!e.includes(t)}))))},selectedItems:M}),React.createElement(_e.g,null),"search"!==g&&React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{flex:"auto"}}),React.createElement(Jt.Q,{currentPage:ie.page,limit:ie.limit,onCurrentPageChanged:function(e){return le(Jr(Jr({},ie),{},{page:e}))},total:ke,onClick:function(e){le(Jr(Jr({},ie),{},{page:e}))}}),React.createElement(w.M,{className:"primary",style:{marginLeft:5},disabled:!X,onClick:function(){D({type:"export",data:{envId:K}})}},He.COMMON.EXPORT))),React.createElement(R.z,{className:"primary",title:"Information"},React.createElement("p",null,React.createElement("b",null,"If want to discuss embeddings with other users, visit the ",React.createElement("a",{href:"https://discord.gg/bHDGh38",target:"_blank",rel:"noreferrer"},"Meow Apps Discord Server"),".")),React.createElement("p",null,"An embedding is a textual piece of data (sentence, paragraph, a whole article) that has been converted by OpenAI into a vector. Vectors can then be used to find the most relevant data for a given query. In this dashboard, you can create embeddings, and they will be synchronized with ",React.createElement("a",{target:"_blank",href:"https://www.pinecone.io/",rel:"noreferrer"},"Pinecone"),", a very fast and affordable vector database."),React.createElement("p",null,"You can switch from EDIT to AI SEARCH and you will be able to query the database, and get your content, with a score. You can edit the content and it will be synchronized with Pinecone. Then make your content perfect so that the results are satisfying! You can use Sync and Sync One, it will go through your posts and create the embeddings if they don't exist yet, or update them if they do."),React.createElement("p",null,"Both the chatbots and the AI Forms can use embeddings to enrich their answers."))),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{className:"primary"},Ue,React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{flex:1,marginRight:5}},React.createElement("label",null,"Minimum Score:"),React.createElement("br",null),React.createElement("span",{style:{color:"var(--neko-green)"}},$,"%")),React.createElement("div",{style:{flex:1,marginLeft:5}},React.createElement("label",null,"Max Embedding(s):"),React.createElement("br",null),React.createElement("span",{style:{color:"var(--neko-green)"}},Q))),React.createElement("p",null,"The best ",Q," embedding(s) with a score of ",$," or more will provide additional context.")),"search"!==g&&React.createElement("div",{style:{margin:8}},React.createElement(m.s,{h2:!0,style:{color:"white",marginBottom:10}},He.EMBEDDINGS.SYNC_POSTS),React.createElement(b._,{inversed:!0},React.createElement(b.V,{title:"Push",inversed:!0},React.createElement(Qt.Z,{ref:Y,onSelectFiles:Ce,accept:""},React.createElement(w.M,{fullWidth:!0,className:"secondary",disabled:!X||he,onClick:function(){return Y.current.click()}},"Import CSV or JSON")),React.createElement(_e.g,{line:!0}),React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(we.u,{id:"postType",scrolldown:!0,disabled:he,name:"postType",style:{width:100},onChange:c,value:l},null==te?void 0:te.map((function(e){return React.createElement(we.j,{key:e.type,value:e.type,label:e.name})}))),React.createElement(w.M,{fullWidth:!0,className:"primary",style:{marginLeft:10},disabled:!X||he,isBusy:"bulkPushAll"===p,onClick:function(){return Fe(!0)}},He.EMBEDDINGS.SYNC_ALL," ",!re&&React.createElement(React.Fragment,null,"(","".concat(ae),")"))),React.createElement(_e.g,{tiny:!0}),React.createElement(w.M,{fullWidth:!0,className:"primary",disabled:!X||he,isBusy:"singleRun"===p,onClick:De},He.EMBEDDINGS.SYNC_ONE)),React.createElement(b.V,{title:"Pull",inversed:!0},React.createElement(w.M,{fullWidth:!0,className:"primary",disabled:!X||he,isBusy:"bulkPullAll"===p,onClick:function(){return je()}},He.EMBEDDINGS.SYNC_ALL)),React.createElement(b.V,{title:"Settings",inversed:!0},React.createElement(v.R,{label:He.EMBEDDINGS.REWRITE_CONTENT,disabled:p,checked:H.rewriteContent,onChange:function(e){ve(Jr(Jr({},H),{},{rewriteContent:e}))},description:He.EMBEDDINGS.REWRITE_CONTENT_DESCRIPTION}),H.rewriteContent&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Vt.m,{value:H.rewritePrompt,rows:5,disabled:p,onBlur:function(e){ve(Jr(Jr({},H),{},{rewritePrompt:e}))},description:He.EMBEDDINGS.REWRITE_PROMPT_DESCRIPTION}),React.createElement(_e.g,null)),React.createElement(v.R,{label:He.EMBEDDINGS.FORCE_RECREATE,checked:H.forceRecreate,disabled:p,onChange:function(e){ve(Jr(Jr({},H),{},{forceRecreate:e}))},description:He.EMBEDDINGS.FORCE_RECREATE_DESCRIPTION})))),"search"!==g&&React.createElement("div",{style:{margin:"20px 8px 8px 8px"}},React.createElement(m.s,{h2:!0,style:{color:"white",marginBottom:10}},He.EMBEDDINGS.AUTO_SYNC_POSTS),React.createElement(b._,{inversed:!0},React.createElement(b.V,{title:"Status",inversed:!0},Ee),React.createElement(b.V,{title:"Settings",inversed:!0},Ee,X&&ye&&React.createElement(React.Fragment,null,React.createElement(_e.g,{tiny:!0}),React.createElement(Ne.X,{variant:"danger",style:{padding:"10px 20px",marginBottom:5}},"The currently selected environment is not used for Auto-Sync. Do you want to use this one?"),React.createElement(w.M,{fullWidth:!0,className:"primary",disabled:he,onClick:function(){return ve(Jr(Jr({},H),{},{syncPostsEnvId:K}))},style:{flex:1}},"Use Current Environment"),React.createElement(_e.g,{tiny:!0})),React.createElement(_e.g,{tiny:!0}),React.createElement(v.R,{label:He.EMBEDDINGS.AUTO_SYNC_POSTS,checked:H.syncPosts,disabled:p,onChange:function(e){ve(Jr(Jr({},H),{},{syncPosts:e}))},description:He.EMBEDDINGS.AUTO_SYNC_POSTS_DESCRIPTION}),H.syncPosts&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Re.A,{name:"syncPostTypes",value:H.syncPostTypes,isCommaSeparatedArray:!0,description:He.HELP.POST_TYPES,onBlur:function(e){ve(Jr(Jr({},H),{},{syncPostTypes:e}))}}),React.createElement(_e.g,null),React.createElement(Re.A,{name:"syncPostStatus",value:H.syncPostStatus||"publish",isCommaSeparatedArray:!0,description:He.HELP.POST_STATUS,onBlur:function(e){ve(Jr(Jr({},H),{},{syncPostStatus:e}))}}),React.createElement(_e.g,null),React.createElement(Re.A,{name:"syncPostCategories",value:H.syncPostCategories||"publish",isCommaSeparatedArray:!0,description:He.HELP.POST_CATEGORIES,onBlur:function(e){ve(Jr(Jr({},H),{},{syncPostCategories:e}))}}))))))),React.createElement(Sr,{modal:F,setModal:D,busy:p,onAddEmbedding:xe,onModifyEmbedding:Se}),React.createElement(Pr,{modal:F,setModal:D,busy:p}),React.createElement(Kr,{modal:F,setModal:D,busy:p,onAddEmbedding:xe,onModifyEmbedding:Se}),pe.TasksErrorModal)};var ma=n(2262),pa=n(4731);function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?va(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ya=wp.element,ga=ya.useState,Ea=ya.useMemo;ma.t1.register(ma.PP,ma.kc,ma.E8,ma.m_,ma.s$);var ba=function(e){var t=e.month,n=e.usageData;return 0===n[t].length?React.createElement("div",{style:{width:"calc(100% - 36px)",margin:"5px 18px 0px 18px",fontStyle:"italic"}},"No data available."):React.createElement("table",{style:{width:"calc(100% - 36px)",margin:"5px 18px 0px 18px",borderCollapse:"collapse"}},React.createElement("tbody",null,n[t].map((function(e,t){var n=e.isImage?"images":e.isAudio?"seconds":"tokens",r=e.units.toLocaleString();return React.createElement("tr",{key:t},React.createElement("td",{style:{paddingRight:10}},"Unknown Model"===e.name?" ".concat(e.rawName):e.name),React.createElement("td",{style:{textAlign:"right",paddingRight:10}},r),React.createElement("td",{style:{paddingRight:10}},n),React.createElement("td",{style:{textAlign:"right"}},e.price>0?"".concat(e.price.toFixed(4),"$"):"-"))}))))};const wa=function(e){var t=e.options,n=ft(t,null,!0),r=n.models,a=n.getModel,o=n.calculatePrice,i=null==t?void 0:t.ai_models_usage,l=(0,s.z)().colors,c=ha(ga("model"),2),u=c[0],f=c[1],d=ha(ga("tokens"),2),m=d[0],p=d[1],h=Ea((function(){var e={};return Object.keys(i).forEach((function(t){var n=i[t];e[t]||(e[t]=[]);var r={};Object.keys(n).forEach((function(e){var t=n[e],i=a(e),l=null,c=null,u=!1,s=!1;i?"image"===i.type?(c=(null==t?void 0:t.images)||0,s=!0):"second"===i.type?(c=(null==t?void 0:t.seconds)||0,u=!0):(l=(null==t?void 0:t.prompt_tokens)||0,c=(null==t?void 0:t.completion_tokens)||0):(l=(null==t?void 0:t.prompt_tokens)||0,c=(null==t?void 0:t.completion_tokens)||0);var f=i?o(e,l,c):0,d=i?i.rawName:"Unknown Model",m=e;r[d]||(r[d]={name:d,rawName:m,units:0,price:0,isImage:s,isAudio:u,family:i?i.family:null}),r[d].units+=s?c:l+c,r[d].price+=f})),e[t]=Object.values(r),e[t].sort((function(e,t){return t.price-e.price}))})),e}),[i,r]),v=Ea((function(){var e=Object.keys(h),t=[],n=[l.blue,l.green,l.yellow,l.orange,l.red,l.purple];if("model"===u){r.forEach((function(r,a){var o=r.rawName,i=e.map((function(e){var t,n=null===(t=h[e])||void 0===t?void 0:t.find((function(e){return e.name===o||e.rawName===o}));return"tokens"===m?n?Math.max(n.units,1):0:n?Math.max(n.price,.01):0}));i.some((function(e){return e>0}))&&t.push({label:o,data:i,backgroundColor:n[a%n.length]})}));var a=e.map((function(e){var t;return(null===(t=h[e])||void 0===t?void 0:t.filter((function(e){return"Unknown Model"===e.name}))).reduce((function(e,t){return e+("tokens"===m?Math.max(t.units,1):Math.max(t.price,.01))}),0)}));a.some((function(e){return e>0}))&&t.push({label:"Unknown Model",data:a,backgroundColor:"rgba(128, 128, 128, 0.5)"})}else if("family"===u){var o={};e.forEach((function(t){h[t].forEach((function(n){var r=n.family;if(r){o[r]||(o[r]=Array(e.length).fill(0));var a="tokens"===m?Math.max(n.units,1):Math.max(n.price,.01),i=e.indexOf(t);o[r][i]+=a}}))})),Object.keys(o).forEach((function(e,r){t.push({label:e,data:o[e],backgroundColor:n[r%n.length]})}))}return{labels:e,datasets:t}}),[h,r,u,m,l]),y=Ea((function(){var e={};v.datasets.forEach((function(t){var n=t.label;e[n]||(e[n]=0),t.data.forEach((function(t){e[n]+=t}))}));var t=Object.entries(e).sort((function(e,t){var n=ha(e,2)[1];return ha(t,2)[1]-n})).slice(0,8).map((function(e){return ha(e,1)[0]}));return v.datasets.filter((function(e){return t.includes(e.label)}))}),[v]),g={plugins:{legend:{position:"bottom",labels:{filter:function(e){return y.some((function(t){return t.label===e.text}))}}}},responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}}};return React.createElement(React.Fragment,null,i&&0===Object.keys(i).length&&React.createElement("div",{style:{fontStyle:"italic"}},"No data available."),i&&Object.keys(i).length>0&&React.createElement(React.Fragment,null,React.createElement(Kt.o,{name:"groupBy",value:"".concat(u,"-").concat(m),onChange:function(e){var t=ha(e.split("-"),2),n=t[0],r=t[1];f(n),p(r)}},React.createElement(Kt.K,{title:"Units by Model",value:"model-tokens"}),React.createElement(Kt.K,{title:"Price by Model",value:"model-price"}),React.createElement(Kt.K,{title:"Units by Family",value:"family-tokens"}),React.createElement(Kt.K,{title:"Price by Family",value:"family-price"})),React.createElement(_e.g,{size:"medium"}),React.createElement(pa.yP,{options:g,data:v}),React.createElement(_e.g,{size:"medium"}),React.createElement(Se.a,{keepState:"monthlyUsageCategories"},Object.keys(h).reverse().map((function(e,t){return React.createElement(Se.Y,{key:t,title:" ".concat(e," (").concat(h[e].reduce((function(e,t){return e+t.price}),0).toFixed(2),"$)")},React.createElement(ba,{month:e,usageData:h}))})))))};var Ra=n(6841);function Oa(e){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(e)}function _a(){_a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Oa(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Oa(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function xa(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Sa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xa(o,r,a,i,l,"next",e)}function l(e){xa(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ca=wp.element.useState;function Ia(e,t){var n=new Blob([e],{type:"text/plain;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}const ka=function(e){var t=e.modal,n=e.setModal,r=Ta(Ca(!1),2),a=r[0],o=r[1],i=Ta(Ca(0),2),l=i[0],c=i[1],u=Ta(Ca(0),2),s=u[0],f=u[1],d=function(){var e=Sa(_a().mark((function e(){var t,n,r,a,i,l;return _a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,m();case 4:t=e.sent,n=(0,O.F1)(t,2),r=new Date,a=r.getFullYear(),i=r.getMonth()+1,l=r.getDate(),Ia(n,"discussions-".concat(a,"-").concat(i,"-").concat(l,".json")),setTimeout((function(){c(0)}),1e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),alert("An error occured while exporting discussions. Check your console.");case 18:return e.prev=18,o(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Sa(_a().mark((function e(){var t,n,r,a;return _a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n={page:1,limit:20,filters:{}},r=[],a=_a().mark((function e(){var a;return _a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt(n);case 2:(a=e.sent).chats.length<2&&(t=!0),c((function(){return a.total})),a.chats.forEach((function(e){e.messages=JSON.parse(e.messages),e.extra=JSON.parse(e.extra)})),r=r.concat(a.chats),f((function(){return r.length})),n.page++;case 9:case"end":return e.stop()}}),e)}));case 4:if(t){e.next=8;break}return e.delegateYield(a(),"t0",6);case 6:e.next=4;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement(Te.n,{isOpen:"export"===(null==t?void 0:t.type),title:"Export Discussions",onRequestClose:function(){return n(null)},okButton:{label:"Close",disabled:a,onClick:function(){return n(null)}},customButtons:React.createElement(React.Fragment,null,React.createElement(w.M,{onClick:d,disabled:a},"Export JSON")),content:React.createElement(React.Fragment,null,React.createElement(Zt.j,{busy:a,style:{flex:"auto"},value:s,max:l}))}))};function Aa(e){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(e)}var La,Ma,Pa,ja,Fa=["children"],Da=["children"],Ua=["children"];function Ga(e){return function(e){if(Array.isArray(e))return qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ka(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=Aa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==Aa(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ya(){Ya=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Aa(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Aa(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function za(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Wa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){za(o,r,a,i,l,"next",e)}function l(e){za(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Ka(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,t){if(e){if("string"==typeof e)return qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qa(e,t):void 0}}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Qa=wp.element,Ja=Qa.useMemo,Za=Qa.useState,eo=Qa.useEffect,to=Qa.useCallback,no=U.Ay.div(La||(La=$a(["\n  font-size: 12px;\n  border-bottom: 1px solid black;\n"]))),ro=U.Ay.span(Ma||(Ma=$a(["\n  font-weight: bold;\n  text-transform: uppercase;\n"]))),ao=U.Ay.div(Pa||(Pa=$a(["\n  font-size: 12px;\n  color: #bdb8b8;\n  background: #eeeeee;\n  padding: 2px 8px;\n"]))),oo=U.Ay.div(ja||(ja=$a(["\n  font-size: 14px;\n  padding: 10px;\n  border: 1px solid #eaeaea;\n  background: #f5f5f5;\n  color: #333333;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  hyphens: auto;\n\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  a {\n    color: #333333;\n    text-decoration: underline;\n  }\n\n  a:hover {\n    color: #333333;\n    text-decoration: none;\n  }\n\n  blockquote {\n    border-left: 4px solid #dddddd;\n    padding-left: 10px;\n    margin-left: 0;\n    font-style: italic;\n  }\n\n  pre {\n    background: #eeeeee;\n    padding: 10px;\n    border-radius: 5px;\n    overflow-x: auto;\n    text-wrap: pretty;\n  }\n\n  code {\n    background: #eeeeee;\n    padding: 2px 5px;\n    border-radius: 5px;\n  }\n\n  table {\n    border-collapse: collapse;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  \n  table td, table th {\n    border: 1px solid #dddddd;\n    text-align: left;\n    padding: 5px;\n  }\n\n  table tr:nth-child(even) {\n    background-color: #dddddd;\n  }\n\n  .mwai-dead-image {\n    color: #ab5252;\n    background: #ffd2d2;\n    padding: 8px 8px;\n    text-align: center;\n  }\n"]))),io={overrides:{object:{component:function(e){var t=e.children,n=Xa(e,Fa);return"<object ".concat(Object.keys(n).map((function(e){return"".concat(e,'="').concat(n[e],'"')})).join(" "),">").concat(t,"</object>")}},script:{component:function(e){var t=e.children,n=Xa(e,Da);return"<script ".concat(Object.keys(n).map((function(e){return"".concat(e,'="').concat(n[e],'"')})).join(" "),">").concat(t,"<\/script>")}},iframe:{component:function(e){var t=e.children,n=Xa(e,Ua);return"<iframe ".concat(Object.keys(n).map((function(e){return"".concat(e,'="').concat(n[e],'"')})).join(" "),">").concat(t,"</iframe>")}}}},lo=function(e){var t=e.content,n=Va(Za(t||""),2),r=n[0],a=n[1],o=function(e){return new Promise((function(t){var n=new Image;n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)},n.src=e}))},i=function(){var e=Wa(Ya().mark((function e(t){var n,r,i,l;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=/!\[.*?\]\((.*?)\)/g,r=t;case 2:if(null===(i=n.exec(t))){e.next=10;break}return l=i[1],e.next=6,o(l);case 6:e.sent||(r=r.replace(i[0],'<div class="mwai-dead-image">Image not available</div>')),e.next=2;break;case 10:a(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();eo((function(){t&&i(t)}),[t]);var l=Ja((function(){var e="";try{e=(0,Ra.cx)(r,io)}catch(t){console.error("Crash in markdown-to-jsx! Reverting to plain text.",{e:t,processedContent:r}),e=r}return e}),[r]);return React.createElement(oo,null,l)},co=function(e){var t,n,r,a,o=e.message,i=null!=o&&null!==(t=o.extra)&&void 0!==t&&t.embeddings?null==o||null===(n=o.extra)||void 0===n?void 0:n.embeddings:null!=o&&null!==(r=o.extra)&&void 0!==r&&r.embedding?[null==o||null===(a=o.extra)||void 0===a?void 0:a.embedding]:[];return React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement(no,null,React.createElement(ro,null,o.role||o.type)),(null==i?void 0:i.length)>0&&React.createElement(ao,null,i.map((function(e){return React.createElement("div",{key:i.id},React.createElement("span",null,e.title)," (",React.createElement("span",null,(100*e.score.toFixed(4)).toFixed(2)),")")}))),React.createElement(lo,{content:o.content||o.text}))},uo=function(){var e=Wa(Ya().mark((function e(){var t,n,r=arguments;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,(0,O.IU)("".concat(T,"/discussions/delete"),{nonce:A,method:"POST",json:{chatIds:t}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const so=function(){var e,t,n,r,a,o,i,l,c,s,d,m=(0,u.jE)(),p=Va(Za({type:null,data:null}),2),h=p[0],y=p[1],g=Va(Za(!1),2),b=g[0],O=g[1],_=Va(Za(!1),2),x=_[0],S=_[1],T=(0,f.I)({queryKey:["chatbots"],queryFn:vn,initialData:F}).data,N=Ja((function(){return[{accessor:"updated",title:"Time",width:"80px",sortable:!0},{accessor:"user",title:"User",width:"85px",filters:{type:"text",description:He.HELP.USER_FILTER}},{accessor:"botId",title:"Chatbot",width:"85px",filters:{type:"select",options:T.map((function(e){return{value:e.botId,label:e.name}}))}},{accessor:"preview",title:He.COMMON.PREVIEW,filters:{type:"text"}},{accessor:"messages",title:"#",width:"45px"}]}),[T]),C=Va(Za((function(){return N.filter((function(e){return e.filters})).map((function(e){return{accessor:e.accessor,value:null}}))})),2),I=C[0],k=C[1],A=Va(Za([]),2),L=A[0],M=A[1],P=Va(Za({filters:I,sort:{accessor:"created",by:"desc"},page:1,limit:10}),2),j=P[0],D=P[1],U=to(Wa(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.hidden){e.next=7;break}return e.next=4,pt(j);case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",new Promise((function(){})));case 8:case"end":return e.stop()}}),e)}))),[j]),G=(0,f.I)({queryKey:["chats",j],queryFn:U,refetchInterval:x?5e3:null}),B=G.isFetching,H=G.data,Y=G.error;eo((function(){D(Ha(Ha({},j),{},{filters:I}))}),[I]);var z=Ja((function(){return(null==H?void 0:H.total)||0}),[H]),W=Ja((function(){return null!=H&&H.chats?H.chats.sort((function(e,t){return t.created_at-e.created_at})).map((function(e){var t,n,r,a,o=JSON.parse(e.messages),i=JSON.parse(e.extra),l=wt(e.created),c=wt(e.updated),u=Rt(null!==(t=e.userId)&&void 0!==t?t:null==i?void 0:i.userId,null!==(n=e.ip)&&void 0!==n?n:null==i?void 0:i.ip),s=null==o?void 0:o.filter((function(e){return"user"===e.role||"user"===e.type})),f=null!=s&&s.length?s[0].content||s[0].text:"",d=null!=s&&s.length?s[s.length-1].content||s[s.length-1].text:"",m=T.find((function(t){return t.botId===e.botId})),p=null==i?void 0:i.parentBotId,h=p?T.find((function(e){return e.botId===p})):null,v=null;m?a=m.name:h?(a=h.name,v=React.createElement(Oe.z,{icon:"tools",height:"14",style:{position:"relative",top:2,marginRight:2},tooltip:"Overriden Bot"})):a=React.createElement(React.Fragment,null,React.createElement(Oe.z,{icon:"cog",height:"14",style:{position:"relative",top:2,marginRight:2},tooltip:"Custom Bot"}),"Custom");var y=e.title?React.createElement(React.Fragment,null,React.createElement("div",null,e.title),React.createElement("small",null,React.createElement("i",null,f))):React.createElement(React.Fragment,null,React.createElement("div",null,f),React.createElement("small",null,d));return{id:e.id,botId:React.createElement(React.Fragment,null,React.createElement("div",null,v,a),React.createElement("div",null,React.createElement("small",null,e.botId))),user:u,messages:null!==(r=null==o?void 0:o.length)&&void 0!==r?r:0,preview:y,extra:i.model,created:React.createElement("div",{style:{textAlign:"right"}},l),updated:React.createElement("div",{style:{textAlign:"right"}},c)}})):[]}),[H,T]),V=Ja((function(){if(1!==(null==L?void 0:L.length))return null;var e=null==H?void 0:H.chats.find((function(e){return e.id===L[0]}));if(!e)return null;var t=[],n={};try{t=JSON.parse(e.messages),n=JSON.parse(e.extra)}catch(t){console.error("Could not parse discussion messages or extra.",{e:t,currentDiscussion:e})}return{id:e.id,chatId:e.chatId,botId:e.botId,messages:t,extra:n,created:e.created,updated:e.updated}}),[L,H]),K=function(){var e=Wa(Ya().mark((function e(){var t,n;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),L.length){e.next=9;break}if(window.confirm(He.ALERTS.ARE_YOU_SURE)){e.next=5;break}return O(!1),e.abrupt("return");case 5:return e.next=7,uo();case 7:e.next=14;break;case 9:return t=null==H?void 0:H.chats.filter((function(e){return L.includes(e.id)})),n=t.map((function(e){return e.chatId})),e.next=13,uo(n);case 13:M([]);case 14:return e.next=16,m.invalidateQueries({queryKey:["chats"]});case 16:m.refetchQueries({queryKey:["chats"]}),O(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Ja((function(){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",flexDirection:"row"}},React.createElement(Jt.Q,{currentPage:j.page,limit:j.limit,onCurrentPageChanged:function(e){return D(Ha(Ha({},j),{},{page:e}))},total:z,onClick:function(e){D(Ha(Ha({},j),{},{page:e}))}}),React.createElement(w.M,{className:"primary",style:{marginLeft:5},onClick:function(){y({type:"export",data:{}})}},He.COMMON.EXPORT)))}),[j,z]),X=Ja((function(){return null!=Y&&Y.message?React.createElement(Ne.X,{variant:"danger",style:{margin:"5px 5px"}},React.createElement("b",null,Y.message),React.createElement("br",null),React.createElement("small",null,"Check your Console Logs and PHP Error Logs for more information.")):null}),[Y]),$=wt(null==V?void 0:V.created),Q=wt(null==V?void 0:V.updated);return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0,style:{flex:2}},React.createElement(R.z,{className:"primary",title:He.COMMON.DISCUSSIONS,action:React.createElement(React.Fragment,null,React.createElement("div",null,!x&&React.createElement(w.M,{className:"secondary",style:{marginLeft:5},disabled:B,onClick:Wa(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.invalidateQueries({queryKey:["chats"]});case 2:m.refetchQueries({queryKey:["chats"]});case 3:case"end":return e.stop()}}),e)})))},He.COMMON.REFRESH),L.length>0&&React.createElement(React.Fragment,null,React.createElement(w.M,{className:"danger",disabled:!1,onClick:K},He.COMMON.DELETE))))},React.createElement(qt.o,{busy:!x&&B||b,sort:j.sort,onSortChange:function(e,t){D(Ha(Ha({},j),{},{sort:{accessor:e,by:t}}))},emptyMessage:X,filters:I,onFilterChange:function(e,t){var n=[].concat(Ga(I.filter((function(t){return t.accessor!==e}))),[{accessor:e,value:t}]);k(n)},data:W,columns:N,selectedItems:L,onSelectRow:function(e){1!==L.length||L[0]!==e?M([e]):M([])},onSelect:function(e){M([].concat(Ga(L),Ga(e)))},onUnselect:function(e){M(Ga(L.filter((function(t){return!e.includes(t)}))))}}),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10}},React.createElement(w.M,{className:"danger",disabled:L.length,style:{marginRight:10},onClick:K},He.COMMON.DELETE_ALL),React.createElement(v.R,{name:"auto-refresh",label:"Auto Refresh",value:"1",checked:x,style:{width:180},onChange:function(){return S(!x)}}),React.createElement("div",{style:{flex:"auto"}}),q))),React.createElement(E.Y,{minimal:!0,style:{flex:1}},React.createElement(R.z,{className:"primary",title:"Selected Discussion",action:React.createElement(React.Fragment,null)},!V&&React.createElement("div",{style:{textAlign:"center",padding:10}},"No discussion selected."),null==V||null===(e=V.messages)||void 0===e?void 0:e.map((function(e,t){return React.createElement(co,{key:t,message:e})}))),!!V&&React.createElement(R.z,{className:"primary",title:"Information"},React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Model"),React.createElement("div",null,null==V||null===(t=V.extra)||void 0===t?void 0:t.model)),React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Bot ID (or Custom ID)"),React.createElement("div",null,null==V?void 0:V.botId)),(null==V||null===(n=V.extra)||void 0===n?void 0:n.parentBotId)&&React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Parent Bot ID"),React.createElement("div",null,null==V||null===(r=V.extra)||void 0===r?void 0:r.parentBotId)),(null==V||null===(a=V.extra)||void 0===a?void 0:a.context)&&React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Context"),React.createElement("div",null,null==V||null===(o=V.extra)||void 0===o?void 0:o.context)),(null==V||null===(i=V.extra)||void 0===i?void 0:i.assistantId)&&React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Assistant ID"),React.createElement("div",null,null==V||null===(l=V.extra)||void 0===l?void 0:l.assistantId)),(null==V||null===(c=V.extra)||void 0===c?void 0:c.threadId)&&React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Thread ID"),React.createElement("div",null,null==V||null===(s=V.extra)||void 0===s?void 0:s.threadId)),React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Chat ID"),React.createElement("div",null,null==V?void 0:V.chatId)),React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Session"),React.createElement("div",null,null==V||null===(d=V.extra)||void 0===d?void 0:d.session)),React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Created"),React.createElement("div",null,$)),React.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:5}},React.createElement("div",{style:{fontWeight:"bold"}},"Updated"),React.createElement("div",null,Q))))),React.createElement(ka,{modal:h,setModal:y,busy:b}))};var fo,mo,po;function ho(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vo=U.Ay.div(fo||(fo=ho(["\n  background: white;\n  padding: 15px;\n  border-radius: 5px;\n\n  h2 {\n    margin-bottom: 8px;\n  }\n  \n  h2:first-child, h3:first-child {\n    margin-top: 0;\n  }\n\n  label {\n    display: block;\n    margin-bottom: 5px;\n  }\n\n  label {\n    margin-top: 10px;\n  }\n\n  ul {\n    margin: 20px 0 0 0;\n  }\n\n  li {\n    margin-bottom: 5px;\n    border: 1px solid #e5e5e5;\n    padding: 8px;\n    background: #f5f5f5;\n    border-radius: 5px;\n    cursor: pointer;\n    position: relative;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    &:hover {\n      background: #e5e5e5;\n    }\n\n    &.active {\n      background: #007cba;\n      color: white;\n      border-color: #007cba;\n\n      &.modified {\n        background: #ff8c00;\n        border-color: #ff8c00;\n      }\n    }\n  }\n\n  .information {\n    color: #a3a3a3;\n    margin-top: 5px;\n    font-size: 12px;\n    line-height: 100%;\n  }\n"]))),yo=(0,U.Ay)(Re.A)(mo||(mo=ho(["\n  flex: auto !important;\n\n  input {\n    height: 50px !important;\n    font-size: 13px !important;\n    font-family: monospace !important;\n    padding: 20px !important;\n    border-color: #333d4e !important;\n    background: #333d4e !important;\n    color: white !important;\n  }\n"]))),go=U.Ay.div(po||(po=ho(["\n  display: flex;\n  flex-direction: column;\n\n  label {\n    margin-bottom: 3px;\n  }\n\n  .mwai-builder-row {\n    margin-top: 10px;\n    display: flex;\n    flex-direction: row;\n\n    .neko-color-picker {\n      margin-left: 5px;\n    }\n  }\n\n  .mwai-builder-col {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    margin-right: 5px;\n  }\n\n  .mwai-builder-col:last-child {\n    margin-right: 0;\n  }\n\n  pre {\n    white-space: pre-wrap;\n    background: #d4f0ff;\n    color: #037cba;\n    padding: 10px;\n    font-size: 13px;\n    font-weight: bold;\n    margin: 10px 0 10px 0;\n  }\n\n  .neko-spacer {\n    margin-bottom: 0 !important;\n  }\n\n  .neko-input {\n  }\n\n  .nui-select-option {\n  }\n\n\n"]))),Eo=["model","maxTokens","onRecommendedClick"];var bo=wp.element.useMemo;const wo=function(e){var t=e.model,n=e.maxTokens,r=e.onRecommendedClick,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Eo),o=null==t?void 0:t.maxContextualTokens,i=null==t?void 0:t.maxCompletionTokens,l=null==t?void 0:t.maxTokens,c=!!r;n=Math.floor(parseInt(n),0);var u=bo((function(){return t?i||(o?Math.floor(o/2):l?Math.floor(l/2):null):null}),[i,o,l]),s=bo((function(){return t?u===n?"var(--neko-green)":n>i?"var(--neko-red)":"var(--neko-yellow)":null}),[i,n,u]);return React.createElement("span",a,!(null==t||!t.maxContextualTokens)&&React.createElement(React.Fragment,null,"Contextual: ",null==t?void 0:t.maxContextualTokens,React.createElement("br",null)),!(null==t||!t.maxCompletionTokens)&&React.createElement(React.Fragment,null,"Completion: ",null==t?void 0:t.maxCompletionTokens,React.createElement("br",null)),!(null!=t&&t.maxCompletionTokens)&&!(null==t||!t.maxTokens)&&React.createElement(React.Fragment,null,"Total Max Tokens: ",null==t?void 0:t.maxTokens,React.createElement("br",null)),!!u&&React.createElement(React.Fragment,null,"Recommended: ",React.createElement("b",{onClick:c?function(){return r(u)}:null,style:{color:s,cursor:c?"pointer":"inherit"}},u,n>i&&React.createElement(React.Fragment,null,"")),React.createElement("br",null)))};var Ro,Oo=["currentChatbot","isCustom","defaultChatbot"];function _o(){_o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==So(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(So(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function xo(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function To(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?No(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Co=wp.element,Io=Co.useState,ko=Co.useMemo,Ao=U.Ay.div(Ro||(Ro=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  pre {\n    display: flex;\n    align-items: center;\n    background: #f8fcff;\n    color: #779bb8;\n    margin: 0px;\n    padding: 3px 8px;\n    font-size: 13px;\n    border: 2px solid rgb(210 228 243);\n    border-radius: 5px;\n    font-family: system-ui;\n    cursor: pointer;\n    font-weight: 500;\n  }\n\n  .mwai-name {\n    font-style: italic;\n  }\n\n  .mwai-value {\n    color: var(--neko-green);\n  }\n\n  .skipped-params {\n    margin-top: 10px;\n    color: #ff4d4f;\n  }\n"]))),Lo=function(e){return"string"!=typeof e?e:e.replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"\\n").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")};const Mo=function(e){var t,n=e.currentChatbot,r=e.isCustom,a=void 0!==r&&r,o=e.defaultChatbot,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Oo),l=To(Io(null),2),c=l[0],u=l[1],s=ko((function(){if(!n)return{shortcodeHtml:null,shortcodeText:null,skipped:[]};var e,t=[],r=[];if(a){for(var i in n){var l=n[i];if(null==l||"botId"===i||"name"===i||""===l||o&&o[i]===l||"object"===So(l)||Array.isArray(l)&&0===l.length)"object"===So(l)&&Array.isArray(l)&&0!==l.length&&r.push(i);else{var c=Lo(l),u=i.replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}));t.push("".concat(u,'="').concat(c,'"'))}}e="[mwai_chatbot"+(t.length?" ".concat(t.join(" ")):"")+"]"}else{var s,f=null!==(s=n.botId)&&void 0!==s?s:"default";t.push('id="'.concat(f,'"')),e='[mwai_chatbot id="'.concat(f,'"]')}var d=React.createElement("span",null,"[mwai_chatbot"," ",t.map((function(e,n){var r=To(e.split("="),2),a=r[0],o=r[1];return React.createElement("span",{key:n},React.createElement("span",{className:"mwai-name"},a),"=",React.createElement("span",{className:"mwai-value"},o),n<t.length-1?" ":"")})),"]");return{shortcodeHtml:d,shortcodeText:e,skipped:r}}),[n,a,o]),f=null!==(t=null==s?void 0:s.skipped)&&void 0!==t?t:[],d=function(){var e,t=(e=_o().mark((function e(){return _o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.clipboard){e.next=3;break}return alert("Clipboard is not enabled (only works with https)."),e.abrupt("return");case 3:return e.next=5,navigator.clipboard.writeText(s.shortcodeText);case 5:u("Copied!"),setTimeout((function(){u(null)}),2e3);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xo(o,r,a,i,l,"next",e)}function l(e){xo(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return n?React.createElement(Ao,i,React.createElement("pre",{onClick:d},!c&&s.shortcodeHtml,c&&React.createElement("span",null,c)),f.length>0&&React.createElement("div",{className:"skipped-params"},"Skipped parameters: ",f.join(", "))):null};var Po=n(7678);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}var Fo=["themes","shortcodeParams","updateShortcodeParams","defaultChatbot","blockMode","deleteCurrentChatbot","resetCurrentChatbot","duplicateCurrentChatbot","options"];function Do(){return Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Do.apply(this,arguments)}function Uo(){Uo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==jo(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(jo(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Go(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ho=wp.element,Yo=Ho.useMemo,zo=Ho.useState,Wo=Ho.useEffect,Vo="drop-shadow(0 0 5px rgba(0,0,0,0.1))",Ko=["alloy","ash","ballad","coral","echo","sage","shimmer","verse"],qo=["chat-openai.svg","chat-robot-1.svg","chat-robot-2.svg","chat-nyao-1.svg","chat-nyao-2.svg","chat-nyao-3.svg","chat-color-blue.svg","chat-color-green.svg","chat-color-red.svg","chat-traditional-1.svg","chat-traditional-2.svg","avatar-user.svg","avatar-woman-blond.svg","avatar-woman-indian.svg","avatar-woman-asian.svg","avatar-woman-doctor.svg","avatar-man-blond.svg","avatar-man-black.svg","avatar-man-sunglasses.svg","avatar-man-pirate.svg"],Xo=function(e){var t=e.label,n=e.valueName,r=e.updateShortcodeParams,a=e.icon||"chat-color-green.svg",o=(0,Po.Ve)(a),i=o||(null==a?void 0:a.startsWith("https://"))||(null==a?void 0:a.startsWith("http://")),l=i?a:"".concat(N,"/images/").concat(a);return React.createElement(React.Fragment,null,React.createElement("div",{className:"mwai-builder-row"},React.createElement("label",null,t,":")),React.createElement("div",{style:{marginTop:0,border:"1.5px solid #d2e4f3",borderRadius:5,padding:"10px 10px 10px 10px",background:"#f5fcff"}},React.createElement("div",{className:"mwai-builder-row",style:{marginTop:0}},React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"}},qo.map((function(e){return React.createElement("img",{key:e,style:{marginRight:2,marginBottom:2,cursor:"pointer",filter:Vo},width:24,height:24,src:"".concat(N,"/images/").concat(e),onClick:function(){r(e,n)}})})),React.createElement("div",{style:{width:24,height:24,border:"1px solid #d2e4f3",background:"#f5fcff",borderRadius:5,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){r("".concat(N,"/images/chat-traditional-1.svg"),n)}},"..."))),React.createElement("div",{className:"mwai-builder-col",style:{width:48,display:"flex",alignItems:"end"}},o?React.createElement("div",{style:{fontSize:48,lineHeight:"48px",marginRight:0,paddingTop:0}},a):React.createElement("img",{style:{marginRight:0,paddingTop:0,filter:Vo},width:48,height:48,src:"".concat(l)}))),i&&React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.CUSTOM_ICON,":"),React.createElement(Re.A,{name:"icon",value:a,onBlur:function(e){return r(e,n)},onEnter:function(e){return r(e,n)}})))))};const $o=function(e){var t,n,r,a,o,i,l,c,u,s=e.themes,f=e.shortcodeParams,d=e.updateShortcodeParams,m=e.defaultChatbot,p=e.blockMode,h=e.deleteCurrentChatbot,y=e.resetCurrentChatbot,g=e.duplicateCurrentChatbot,b=e.options,R=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Fo),_=ft(b,f.envId||null),x=_.completionModels,S=_.imageModels,T=_.realtimeModels,N=_.getModel,C=null!==(t="chat"===f.mode)&&void 0!==t?t:"chat",I=null!==(n="assistant"===f.mode)&&void 0!==n&&n,A=null!==(r="images"===f.mode)&&void 0!==r&&r,L=null!==(a="realtime"===f.mode)&&void 0!==a&&a,M=f.contentAware,P=Yo((function(){return(null==b?void 0:b.ai_envs)||[]}),[b.ai_envs]),j=null==b?void 0:b.module_embeddings,F=(null==b?void 0:b.functions)||[],D=f.functions||[],U=(c=zo(!1),u=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(c,u)||function(e,t){if(e){if("string"==typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bo(e,t):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),G=U[0],B=U[1],H=Yo((function(){return f.instructions&&f.instructions.includes("{CONTENT}")}),[f.instructions]),Y=Yo((function(){return P.find((function(e){return e.id===f.envId}))||null}),[P,f.envId]),z=Yo((function(){return(null==Y?void 0:Y.assistants)||[]}),[Y]),W=Yo((function(){return z.find((function(e){return e.id===f.assistantId}))||null}),[z,f.assistantId]),V=N(W?W.model:f.model),K=b.embeddings_envs||[],q=Yo((function(){var e;return null==V||null===(e=V.tags)||void 0===e?void 0:e.includes("functions")}),[V]),X=Yo((function(){var e;return null==V||null===(e=V.tags)||void 0===e?void 0:e.includes("vision")}),[V]),$=Yo((function(){var e;return null==V||null===(e=V.tags)||void 0===e?void 0:e.includes("files")}),[V]),Q=Yo((function(){var e;return null==V||null===(e=V.tags)||void 0===e?void 0:e.includes("image")}),[V]);Wo((function(){var e=D.filter((function(e){return F.some((function(t){return t.id===e.id}))}));if(e.length!==D.length)console.warn("Update Params: Functions has been updated."),d(e,"functions");else if(Q&&!f.resolution){if(console.warn("Update Params: Resolution has been set."),null!=V&&V.resolutions){var t=V.resolutions.map((function(e){return e.name})),n=t.includes("1024x1024")?"1024x1024":t[0];d(n,"resolution")}}else!Q&&f.resolution?(console.warn("Update Params: Resolution has been removed."),d(null,"resolution")):Q&&C||I&&f.model?(console.warn("Update Params: Model has been removed."),d(null,"model")):!I&&f.assistantId?(console.warn("Update Params: Assistant has been removed."),d(null,"assistantId")):f.imageUpload&&!X?(console.warn("Update Params: Vision has been removed."),d(null,"imageUpload")):f.fileSearch&&!I?(console.warn("Update Params: File search has been removed."),d(null,"fileSearch")):f.model&&!f.envId?(console.warn("Update Params: Model has been removed."),d(null,"model")):f.envId&&!Y?(console.warn("Update Params: Environment has been removed."),d(null,"envId")):!j&&f.embeddingsEnvId?(console.warn("Update Params: Embeddings environment has been removed."),d(null,"embeddingsEnvId")):!q&&D.length?(console.warn("Update Params: Functions have been removed."),d([],"functions")):!I||!f.fileSearch||null!=W&&W.has_file_search?f.aiAvatar||f.aiName?f.userAvatar||f.userName?f.guestAvatar||f.guestName||(console.warn("Update Params: Guest avatar has been set to true."),d(!0,"guestAvatar")):(console.warn("Update Params: User avatar has been set to true."),d(!0,"userAvatar")):(console.warn("Update Params: AI avatar has been set to true."),d(!0,"aiAvatar")):(console.warn("Update Params: File search has been removed."),d(null,"fileSearch"))}),[f]);var J=function(){var e,t=(e=Uo().mark((function e(){return Uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,e.next=4,En(f.envId,f.assistantId,D);case 4:alert("Functions have been set on the assistant."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.message);case 10:B(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Go(o,r,a,i,l,"next",e)}function l(e){Go(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),Z=Yo((function(){return Q&&V?V.resolutions?null==V?void 0:V.resolutions:(console.error("This image model does not have resolutions.",V),[]):[]}),[V,Q]),ee=Yo((function(){var e=[C?"Chat":I?"Assistant":"Images",(null==f?void 0:f.botId)||(null==m?void 0:m.id)||"default"].filter(Boolean).join(", ");return React.createElement("div",null,He.COMMON.CHATBOT,React.createElement("small",{style:{opacity:.5}}," ",e))}),[C,I,null==f?void 0:f.botId,null==m?void 0:m.id]),te=Yo((function(){var e=function(e,t){var n=P.find((function(t){return t.id===e}));if(!n)return null;var r=N(t);return[n.name,null==r?void 0:r.rawName].filter(Boolean).join(", ")};if(f.envId){var t=e(f.envId,f.model);if(t)return React.createElement("div",null,He.COMMON.AI_MODEL,React.createElement("small",{style:{opacity:.5}}," ",t))}else{var n=e(null==b?void 0:b.ai_default_env,null==b?void 0:b.ai_default_model);if(n)return React.createElement("div",null,He.COMMON.AI_MODEL,React.createElement("small",{style:{opacity:.5}}," ",n))}return He.COMMON.AI_MODEL}),[f.envId,f.model,P,N,null==b?void 0:b.ai_default_env,null==b?void 0:b.ai_default_model]),ne=Yo((function(){if(f.embeddingsEnvId){var e=K.find((function(e){return e.id===f.embeddingsEnvId}));if(e){var t=[e.name,M?"Content Aware":null].filter(Boolean).join(", ");return React.createElement("div",null,He.COMMON.CONTEXT,React.createElement("small",{style:{opacity:.5}}," ",t))}}return He.COMMON.CONTEXT}),[f.embeddingsEnvId,K,M]),re=Yo((function(){if(!D.length)return He.COMMON.FUNCTIONS;var e="Enabled: ".concat(D.length,", Total: ").concat(F.length);return React.createElement("div",null,He.COMMON.FUNCTIONS,React.createElement("small",{style:{opacity:.5}}," ",e))}),[D,F]),ae=Yo((function(){var e=f.contextMaxLength||(null==b?void 0:b.context_max_length),t=[f.maxMessages?"Messages: ".concat(f.maxMessages):null,e?"Context: ".concat(e):null].filter(Boolean).join(", ");return React.createElement("div",null,He.COMMON.THRESHOLDS,React.createElement("small",{style:{opacity:.5}}," ",t))}),[f.contextMaxLength,f.maxMessages,null==b?void 0:b.context_max_length]),oe=Yo((function(){var e=null==s?void 0:s.find((function(e){return e.themeId===f.themeId})),t=[(null==e?void 0:e.name)||f.themeId,f.window?"Popup":null].filter(Boolean).join(", ");return React.createElement("div",null,He.COMMON.APPEARANCE,React.createElement("small",{style:{opacity:.5}}," ",t))}),[f.themeId,f.window,s]);return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,Do({minimal:!0},R),React.createElement(go,null,React.createElement(Se.a,{keepState:"chatbotParams"},React.createElement(Se.Y,{title:ee},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.NAME,":"),React.createElement(Re.A,{name:"name","data-form-type":"other",disabled:"default"===f.botId,value:f.name,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("div",null,React.createElement("label",{style:{display:"block"}},He.COMMON.ID,":"),React.createElement(Re.A,{name:"botId",type:"text",placeholder:"Optional",disabled:"default"===f.botId,value:f.botId,onBlur:d,onEnter:d}))),!L&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.LOCAL_MEMORY,":"),React.createElement(v.R,{name:"localMemory",label:"Yes",checked:f.localMemory,value:"1",onChange:d}))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{height:"chat"===f.mode?76:"inherit"}},React.createElement("label",null,He.COMMON.MODE,":"),React.createElement(we.u,{scrolldown:!0,id:"mode",name:"mode",value:f.mode,onChange:d},React.createElement(we.j,{value:"chat",label:"Chat"}),React.createElement(we.j,{value:"images",label:"Images"}),React.createElement(we.j,{value:"assistant",label:"Assistant",isPro:!0,requirePro:!k}),React.createElement(we.j,{value:"realtime",label:"Realtime",isPro:!0,requirePro:!k}))),(C||I||L)&&React.createElement("div",{className:"mwai-builder-col",style:{flex:5}},React.createElement("label",null,He.COMMON.INSTRUCTIONS,":"),React.createElement(Vt.m,{name:"instructions",rows:10,textAreaStyle:{resize:"none"},value:f.instructions,onBlur:d,onEnter:d})))),React.createElement(Se.Y,{title:te},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.ENVIRONMENT,":"),React.createElement(we.u,{scrolldown:!0,name:"envId",value:null!==(o=f.envId)&&void 0!==o?o:"",onChange:d},P.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),React.createElement(we.j,{value:"",label:"Default"}))),(C||A||L)&&React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("label",null,He.COMMON.MODEL,":"),React.createElement(we.u,{scrolldown:!0,name:"model",disabled:!f.envId,value:f.model,onChange:d},React.createElement(we.j,{value:"",label:"Default"}),(null!==(i=A?S:L?T:x)&&void 0!==i?i:[]).map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),I&&React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("label",null,He.COMMON.ASSISTANT,":"),React.createElement(we.u,{scrolldown:!0,name:"assistantId",value:f.assistantId,onChange:d},React.createElement(we.j,{value:"",label:"None"}),z.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})))),Q&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.RESOLUTION,":"),React.createElement(we.u,{scrolldown:!0,name:"resolution",value:f.resolution,onChange:d},Z.map((function(e){return React.createElement(we.j,{key:e.name,value:e.name,label:e.label})})))),X&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.VISION,":"),React.createElement(v.R,{name:"imageUpload",label:He.COMMON.ENABLE,checked:f.imageUpload,value:"1",onChange:d})),$&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FILES,":"),React.createElement(v.R,{name:"fileUpload",label:He.COMMON.ENABLE,checked:f.fileUpload,value:"1",onChange:d}))),(C||L)&&React.createElement("div",{className:"mwai-builder-row"},L&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.VOICE,":"),React.createElement(we.u,{scrolldown:!0,name:"voice",value:f.voice,onChange:d},React.createElement(we.j,{value:"",label:"Default"}),Ko.map((function(e){return React.createElement(we.j,{key:e,value:e,label:e})})))),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.TEMPERATURE,":"),React.createElement(Re.A,{name:"temperature",type:"number",step:"0.1",min:"0",max:"1",value:f.temperature,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.MAX_TOKENS,":"),React.createElement(Re.A,{name:"maxTokens",type:"number",description:React.createElement(wo,{model:V,maxTokens:f.maxTokens,onRecommendedClick:function(e){d(e,"maxTokens")},style:{fontSize:11,lineHeight:"8px"}}),value:f.maxTokens,onBlur:d,onEnter:d})))),I&&React.createElement(Se.Y,{title:He.COMMON.ASSISTANT},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FILE_SEARCH,":"),React.createElement(we.u,{scrolldown:!0,name:"fileSearch",disabled:!(null!=W&&W.has_file_search),description:(0,O.FE)(null!=W&&W.has_file_search?He.SETTINGS.ASSISTANT_FILE_SEARCH:He.SETTINGS.ASSISTANT_NO_FILE_SEARCH),value:f.fileSearch,onChange:d},React.createElement(we.j,{value:"",label:"None"}),React.createElement(we.j,{value:"discussion",label:"For Discussion"}))))),(C||I)&&React.createElement(Se.Y,{title:ne},React.createElement("div",{style:{marginTop:15,fontWeight:"bold"}},He.COMMON.EMBEDDINGS),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.EMBEDDINGS_ENV,":"),React.createElement(we.u,{scrolldown:!0,name:"embeddingsEnvId",requirePro:!0,isPro:k,disabled:!j||!(null!=K&&K.length),value:f.embeddingsEnvId,onChange:d},K.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),React.createElement(we.j,{value:"",label:"None"})))),React.createElement("div",{style:{marginTop:15,fontWeight:"bold"}},He.COMMON.OTHERS),C&&React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.CONTENT_AWARE,":"),React.createElement(v.R,{name:"contentAware",label:"Yes",requirePro:!0,isPro:k,checked:f.contentAware,value:"1",onChange:d}))),M&&!H&&React.createElement(Ne.X,{variant:"danger",style:{marginTop:15,padding:"10px 15px"}},React.createElement("p",null,(0,O.FE)(He.SETTINGS.ALERT_CONTENTAWARE_BUT_NO_CONTENT)))),q&&!p&&React.createElement(Se.Y,{title:re},React.createElement("p",null,React.createElement(_t,{style:{marginRight:3}}),React.createElement(xt,{style:{marginRight:5}}),(0,O.FE)(He.HELP.FUNCTIONS)),!(null!=F&&F.length)&&React.createElement(Ne.X,{variant:"danger"},(0,O.FE)(He.HELP.FUNCTIONS_UNAVAILABLE)),!(null==F||!F.length)&&React.createElement("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid #d1e3f2",marginTop:10,padding:"5px 6px",borderRadius:5}},null==F?void 0:F.map((function(e){return React.createElement(v.R,{key:e.id,name:"functions",label:React.createElement(React.Fragment,null,"js"===e.target&&React.createElement(St,{style:{marginRight:5}}),"js"!==e.target&&React.createElement(Tt,{style:{marginRight:5}}),React.createElement("span",null,e.name)),description:e.desc,checked:D.some((function(t){return t.id===e.id})),value:e.id,onChange:function(t){var n=D.filter((function(t){return t.id!==e.id}));t&&n.push({type:e.type,id:e.id}),d(n,"functions")}})}))),I&&React.createElement(React.Fragment,null,React.createElement("p",null,"Assistant needs to be updated with the set of functions every time you modify them (including their names, arguments, descriptions, etc)."),React.createElement(w.M,{className:"primary",fullWidth:!0,onClick:J,isBusy:G},"Set Functions on Assistant"))),React.createElement(Se.Y,{title:ae},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.INPUT_MAX_LENGTH,":"),React.createElement(Re.A,{name:"textInputMaxLength",type:"number",description:He.HELP.INPUT_MAX_LENGTH,step:"1",min:"8",value:f.textInputMaxLength,onBlur:d,onEnter:d})),!L&&React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.MAX_MESSAGES,":"),React.createElement(Re.A,{name:"maxMessages",type:"number",description:He.HELP.MAX_MESSAGES,step:"1",min:"1",max:"1024",value:f.maxMessages,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.CONTEXT_MAX_LENGTH,":"),React.createElement(Re.A,{name:"contextMaxLength",type:"number",step:"1",description:He.HELP.CONTEXT_MAX_LENGTH,value:f.contextMaxLength||(null==b?void 0:b.context_max_length),onBlur:d,onEnter:d})))),React.createElement(Se.Y,{title:oe},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:3}},React.createElement("label",null,He.COMMON.THEME,":"),React.createElement(we.u,{scrolldown:!0,name:"themeId",value:f.themeId,description:"",onChange:d},React.createElement(we.j,{value:"none",label:"None"}),React.createElement(we.j,{value:"chatgpt",label:"ChatGPT"}),React.createElement(we.j,{value:"timeless",label:"Timeless"}),React.createElement(we.j,{value:"messages",label:"Messages"}),null==s?void 0:s.filter((function(e){return"css"===e.type})).map((function(e){return React.createElement(we.j,{key:e.themeId,value:e.themeId,label:e.name})})))),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.POPUP,":"),React.createElement(v.R,{name:"window",label:"Yes",checked:f.window,value:"1",onChange:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FULL_SCREEN,":"),React.createElement(v.R,{name:"fullscreen",label:"Yes",checked:f.fullscreen,value:"1",onChange:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.COPY_BUTTON,":"),React.createElement(v.R,{name:"copyButton",label:"Yes",checked:f.copyButton,value:"1",onChange:d}))),"timeless"===f.themeId&&React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.HEADER_SUBTITLE,":"),React.createElement(Re.A,{name:"headerSubtitle","data-form-type":"other",value:f.headerSubtitle,onBlur:d,onEnter:d}))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.AVATAR,":"),React.createElement(v.R,{name:"aiAvatar",label:"Yes",checked:f.aiAvatar,value:"1",onChange:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:3}},React.createElement("label",null,He.COMMON.AI_NAME,":"),React.createElement(Re.A,{name:"aiName","data-form-type":"other",value:f.aiName,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:7}},React.createElement("label",null,He.COMMON.START_SENTENCE,":"),React.createElement(Vt.m,{name:"startSentence",rows:1,value:f.startSentence,onBlur:d,onEnter:d}))),f.aiAvatar&&React.createElement(Xo,{label:He.COMMON.AI_AVATAR,updateShortcodeParams:d,valueName:"aiAvatarUrl",icon:f.aiAvatarUrl}),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.AVATAR,":"),React.createElement(v.R,{name:"userAvatar",label:"Yes",checked:f.userAvatar,value:"1",onChange:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:3}},React.createElement("label",null,He.COMMON.USER_NAME,":"),React.createElement(Re.A,{name:"userName","data-form-type":"other",value:f.userName,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:3}},React.createElement("label",null,He.COMMON.PLACEHOLDER,":"),React.createElement(Re.A,{name:"textInputPlaceholder",value:f.textInputPlaceholder,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("label",null,He.COMMON.SEND,":"),React.createElement(Re.A,{name:"textSend",value:f.textSend,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("label",null,He.COMMON.CLEAR,":"),React.createElement(Re.A,{name:"textClear",value:f.textClear,onBlur:d,onEnter:d}))),f.userAvatar&&React.createElement("p",null,React.createElement("i",null,"The ",React.createElement("a",{href:"https://gravatar.com/",target:"_blank",rel:"noreferrer"},"gravatar")," of this user will be used as the avatar.")),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.AVATAR,":"),React.createElement(v.R,{name:"guestAvatar",label:"Yes",checked:f.guestAvatar,value:"1",onChange:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:3}},React.createElement("label",null,He.COMMON.GUEST_NAME,":"),React.createElement(Re.A,{name:"guestName",value:f.guestName,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:7}},React.createElement("label",null,He.COMMON.COMPLIANCE_TEXT,":"),React.createElement(Re.A,{name:"textCompliance",value:f.textCompliance,onBlur:d,onEnter:d}))),f.guestAvatar&&React.createElement(Xo,{label:He.COMMON.GUEST_AVATAR,updateShortcodeParams:d,valueName:"guestAvatarUrl",icon:f.guestAvatarUrl})),React.createElement(Se.Y,{title:He.COMMON.POPUP,hide:!f.window},React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:4}},React.createElement("label",null,He.COMMON.POSITION,":"),React.createElement(we.u,{scrolldown:!0,name:"iconPosition",value:f.iconPosition,onChange:d},React.createElement(we.j,{value:"bottom-right",label:"Bottom Right"}),React.createElement(we.j,{value:"bottom-left",label:"Bottom Left"}),React.createElement(we.j,{value:"top-right",label:"Top Right"}),React.createElement(we.j,{value:"top-left",label:"Top Left"}))),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.BUBBLE,":"),React.createElement(v.R,{name:"iconBubble",label:"Yes",checked:f.iconBubble,value:"1",onChange:d}))),React.createElement(Xo,{label:He.COMMON.ICON,updateShortcodeParams:d,valueName:"icon",icon:f.icon}),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:4}},React.createElement("label",null,He.COMMON.ICON_TEXT,":"),React.createElement(Re.A,{name:"iconText",description:He.HELP.ICON_TEXT,value:f.iconText,onBlur:d,onEnter:d})),React.createElement("div",{className:"mwai-builder-col",style:{flex:2}},React.createElement("label",null,He.COMMON.ICON_TEXT_DELAY,":"),React.createElement(Re.A,{name:"iconTextDelay",type:"number",description:null!==(l=He.HELP.ICON_TEXT_DELAY)&&void 0!==l?l:1,value:f.iconTextDelay,onBlur:d,onEnter:d})))),!p&&React.createElement(Se.Y,{title:He.COMMON.SHORTCODES},React.createElement(Mo,{currentChatbot:f,style:{marginTop:10}}),"default"!==f.botId&&React.createElement(React.Fragment,null,React.createElement("p",null,He.HELP.CUSTOM_SHORTCODE),React.createElement(Mo,{currentChatbot:f,isCustom:!0,defaultChatbot:m,style:{marginTop:10}}))),!p&&React.createElement(Se.Y,{title:He.COMMON.ACTIONS},React.createElement("div",{style:{display:"flex",marginTop:10}},React.createElement(w.M,{className:"primary",onClick:g},He.COMMON.DUPLICATE),React.createElement(w.M,{className:"secondary",onClick:y},He.COMMON.RESET),React.createElement("div",{style:{flex:"auto"}}),React.createElement(w.M,{className:"danger",disabled:"Default"===f.name,onClick:h},He.COMMON.DELETE))))))))};var Qo,Jo=n(7612);function Zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ei(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ti=wp.element,ni=ti.useState,ri=ti.useEffect,ai=ti.useRef,oi=ti.useCallback,ii=U.Ay.div(Qo||(Qo=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  position: relative;\n\n  .swatch {\n    width: 24px;\n    height: 24px;\n    border: 3px solid #fff;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n  }\n  \n  .popover {\n    position: absolute;\n    top: -210px;\n    left: -80px;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n    z-index: 9999;\n    border-radius: 8px;\n  }\n"]))),li=function(e){var t=e.name,n=e.value,r=e.onChange,a=ai(),o=Zo(ni(!1),2),i=o[0],l=o[1],c=Zo(ni(n),2),u=c[0],s=c[1];ri((function(){s(n)}),[n]);var f,d,m=oi((function(){u!==n&&r(u,t),l(!1)}),[u,n]);return ri((function(){var e=!1,t=!1,n=function(n){!e&&t&&f.current&&!f.current.contains(n.target)&&d(n)},r=function(n){t=f.current,e=f.current&&f.current.contains(n.target)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),document.addEventListener("click",n),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r),document.removeEventListener("click",n)}}),[f=a,d=m]),React.createElement(ii,{className:"neko-color-picker"},React.createElement("div",{className:"swatch",style:{backgroundColor:u},onClick:function(){return l(!0)}}),i&&React.createElement("div",{className:"popover",ref:a,style:{background:"white"}},React.createElement(Jo.jI,{color:u,onChange:s}),React.createElement("div",{style:{display:"flex",padding:5}},React.createElement(w.M,{style:{flex:1},onClick:function(){return r(u,t)}},"Apply"))))};const ci=function(e){var t,n,r,a,o,i,l,c,u,s,f,d,m,p,h,v,y,g,E,b,w,R=e.settings,O=e.onUpdateSettings;return React.createElement(React.Fragment,null,React.createElement(go,null,React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.SPACING,":"),React.createElement(Re.A,{id:"spacing",name:"spacing",value:null!==(t=null==R?void 0:R.spacing)&&void 0!==t?t:"15px",onBlur:O,onEnter:O})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.BORDER_RADIUS,":"),React.createElement(Re.A,{id:"borderRadius",name:"borderRadius",value:null!==(n=null==R?void 0:R.borderRadius)&&void 0!==n?n:"10px",onBlur:O,onEnter:O})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.FONT_SIZE,":"),React.createElement(Re.A,{id:"fontSize",name:"fontSize",value:null!==(r=null==R?void 0:R.fontSize)&&void 0!==r?r:"15px",onBlur:O,onEnter:O})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"fontColor",name:"fontColor",value:null!==(a=null==R?void 0:R.fontColor)&&void 0!==a?a:"#FFFFFF",onBlur:O,onEnter:O}),React.createElement(li,{id:"fontColor",name:"fontColor",value:null!==(o=null==R?void 0:R.fontColor)&&void 0!==o?o:"#FFFFFF",onChange:O})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_PRIMARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",style:{flex:1},value:null!==(i=null==R?void 0:R.backgroundPrimaryColor)&&void 0!==i?i:"#454654",onBlur:O,onEnter:O}),React.createElement(li,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",value:null!==(l=null==R?void 0:R.backgroundPrimaryColor)&&void 0!==l?l:"#454654",onChange:O,onEnter:O}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_SECONDARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundSecondaryColor",name:"backgroundSecondaryColor",style:{flex:1},value:null!==(c=null==R?void 0:R.backgroundSecondaryColor)&&void 0!==c?c:"#343541",onBlur:O,onEnter:O}),React.createElement(li,{id:"backgroundSecondaryColor",name:"backgroundSecondaryColor",value:null!==(u=null==R?void 0:R.backgroundSecondaryColor)&&void 0!==u?u:"#343541",onChange:O,onEnter:O})))),React.createElement(_e.g,null),React.createElement(Se.Y,{title:He.COMMON.POPUP,isCollapsed:!1}),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.WIDTH,":"),React.createElement(Re.A,{id:"width",name:"width",value:null!==(s=null==R?void 0:R.width)&&void 0!==s?s:"460px",onBlur:O,onEnter:O})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.MAX_HEIGHT,":"),React.createElement(Re.A,{id:"maxHeight",name:"maxHeight",value:null!==(f=null==R?void 0:R.maxHeight)&&void 0!==f?f:"40vh",onBlur:O,onEnter:O})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(d=null==R?void 0:R.iconTextBackgroundColor)&&void 0!==d?d:"#343541",onBlur:O,onEnter:O}),React.createElement(li,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(m=null==R?void 0:R.iconTextBackgroundColor)&&void 0!==m?m:"#343541",onChange:O,onEnter:O}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextColor",name:"iconTextColor",value:null!==(p=null==R?void 0:R.iconTextColor)&&void 0!==p?p:"#FFFFFF",onBlur:O,onEnter:O}),React.createElement(li,{id:"iconTextColor",name:"iconTextColor",value:null!==(h=null==R?void 0:R.iconTextColor)&&void 0!==h?h:"#FFFFFF",onChange:O,onEnter:O})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BUBBLE_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"bubbleColor",name:"bubbleColor",style:{flex:1},value:null!==(v=null==R?void 0:R.bubbleColor)&&void 0!==v?v:"#343541",onBlur:O,onEnter:O}),React.createElement(li,{id:"bubbleColor",name:"bubbleColor",value:null!==(y=null==R?void 0:R.bubbleColor)&&void 0!==y?y:"#343541",onChange:O,onEnter:O}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",style:{flex:1},value:null!==(g=null==R?void 0:R.backgroundHeaderColor)&&void 0!==g?g:"#343541",onBlur:O,onEnter:O}),React.createElement(li,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",value:null!==(E=null==R?void 0:R.backgroundHeaderColor)&&void 0!==E?E:"#343541",onChange:O,onEnter:O}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BUTTONS_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"headerButtonsColor",name:"headerButtonsColor",style:{flex:1},value:null!==(b=null==R?void 0:R.headerButtonsColor)&&void 0!==b?b:"#FFFFFF",onBlur:O,onEnter:O}),React.createElement(li,{id:"headerButtonsColor",name:"headerButtonsColor",value:null!==(w=null==R?void 0:R.headerButtonsColor)&&void 0!==w?w:"#FFFFFF",onChange:O,onEnter:O}))))))};function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var si=wp.element,fi=si.useMemo,di=si.useState,mi=si.useEffect;const pi=function(e){var t,n,r=e.theme,a=e.onUpdateTheme,o=(t=di(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ui(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1];mi((function(){l(r.style)}),[r]);var c=fi((function(){return i!==r.style}),[i,r]);return React.createElement(go,null,React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.NAME,":"),React.createElement(Re.A,{name:"name","data-form-type":"other",value:r.name,onBlur:a,onEnter:a})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("div",null,React.createElement("label",{style:{display:"block"}},He.COMMON.ID,":"),React.createElement(Re.A,{name:"themeId",type:"text",placeholder:"Optional",value:r.themeId,onBlur:a,onEnter:a})))),React.createElement(_e.g,null),React.createElement("label",null,"Custom CSS:"),React.createElement(Vt.m,{name:"css",value:i,onChange:l,rows:16,tabToSpaces:2}),React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{fullWidth:!0,onClick:function(){var e=".mwai-THEME_ID-theme {\n  --mwai-spacing: 10px;\n  --mwai-fontSize: 14px;\n  --mwai-fontColor: #000;\n  --mwai-bgPrimary: #fff;\n  --mwai-primary: #0084ff;\n  --mwai-secondary: #f0f0f0;\n  --mwai-width: 300px;\n  --mwai-borderRadius: 5px;\n}\n\n.mwai-THEME_ID-theme .mwai-content {\n  background: var(--mwai-bgPrimary);\n  padding: var(--mwai-spacing);\n  font-size: var(--mwai-fontSize);\n  color: var(--mwai-fontColor);\n}\n\n.mwai-THEME_ID-theme .mwai-conversation {\n  display: flex;\n  flex-direction: column;\n}\n\n.mwai-THEME_ID-theme .mwai-reply {\n  margin-bottom: var(--mwai-spacing);\n  padding: var(--mwai-spacing);\n  display: flex;\n}\n\n.mwai-THEME_ID-theme .mwai-reply.mwai-ai {\n  background: var(--mwai-secondary);\n}\n\n.mwai-THEME_ID-theme .mwai-reply.mwai-user {\n  background: var(--mwai-primary);\n  color: #fff;\n}\n\n.mwai-THEME_ID-theme .mwai-name {\n  margin-right: var(--mwai-spacing);\n}\n\n.mwai-THEME_ID-theme .mwai-input {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.mwai-THEME_ID-theme .mwai-input-text {\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n\n.mwai-THEME_ID-theme .mwai-input-text textarea {\n  flex: 1;\n}\n\n.mwai-THEME_ID-theme .mwai-input-text .mwai-microphone {\n  flex: 1;\n}\n\n.mwai-THEME_ID-theme .mwai-input-text .mwai-file-upload-icon {\n  flex: 1;\n}\n\n.mwai-THEME_ID-theme .mwai-trigger {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  transition: all 0.2s ease-out;\n  z-index: 9999;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.mwai-THEME_ID-theme .mwai-trigger .mwai-icon-text-container {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.mwai-THEME_ID-theme .mwai-trigger .mwai-icon-text {\n  background: var(--mwai-iconTextBackgroundColor);\n  color: var(--mwai-iconTextColor);\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.15);\n  max-width: 200px;\n  font-size: 13px;\n  margin-bottom: 15px;\n  padding: 10px 15px;\n  border-radius: 8px;\n}\n\n.mwai-THEME_ID-theme .mwai-reply-actions .mwai-copy-button {\n  fill: var(--mwai-fontColor);\n  padding: 3px 5px;\n  width: 24px;\n  height: 24px;\n  background: var(--mwai-bgPrimary);\n  cursor: pointer;\n  border-radius: var(--mwai-borderRadius);\n  display: none;\n}\n\n.mwai-THEME_ID-theme .mwai-reply-actions:not(.mwai-hidden) .mwai-copy-button {\n  display: block;\n}\n\n.mwai-THEME_ID-theme.mwai-window {\n  position: fixed;\n  right: 30px;\n  bottom: 30px;\n  width: var(--mwai-width);\n  z-index: 9999;\n}\n\n.mwai-THEME_ID-theme.mwai-window .mwai-content {\n  display: none;\n  opacity: 0;\n  max-height: var(--mwai-maxHeight);\n  border-radius: 0 0 var(--mwai-borderRadius) var(--mwai-borderRadius);\n}\n\n.mwai-THEME_ID-theme.mwai-window.mwai-bottom-left,\n.mwai-THEME_ID-theme.mwai-window.mwai-top-left {\n  right: auto;\n  left: 30px;\n}\n\n.mwai-THEME_ID-theme.mwai-window.mwai-top-right,\n.mwai-THEME_ID-theme.mwai-window.mwai-top-left {\n  top: 30px;\n  bottom: auto;\n}\n\n.mwai-THEME_ID-theme.mwai-window.mwai-open .mwai-trigger {\n  display: none;\n}\n\n.mwai-THEME_ID-theme.mwai-window.mwai-open .mwai-content {\n  display: flex;\n  flex-direction: column;\n  transition: opacity 200ms ease-in-out;\n  opacity: 1;\n}\n\n.mwai-THEME_ID-theme.mwai-window .mwai-header {\n  display: none;\n  justify-content: flex-end;\n  height: 22px;\n}\n\n.mwai-THEME_ID-theme.mwai-window.mwai-open .mwai-header {\n  display: flex;\n}\n\n.mwai-THEME_ID-theme.mwai-window .mwai-header .mwai-buttons .mwai-close-button:after {\n  content: '';\n  cursor: pointer;\n}\n".replace(/THEME_ID/g,r.themeId);l(e)}},"Default CSS"),React.createElement(w.M,{fullWidth:!0,onClick:function(){a(i,"style")},disabled:!c},"Apply CSS")))},hi=function(e){var t,n,r,a,o,i,l,c,u,s,f,d,m,p,h,v,y,g,E,b,w,R,O,_,x,S=e.settings,T=e.onUpdateSettings;return React.createElement(React.Fragment,null,React.createElement(go,null,React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.SPACING,":"),React.createElement(Re.A,{id:"spacing",name:"spacing",value:null!==(t=null==S?void 0:S.spacing)&&void 0!==t?t:"15px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.BORDER_RADIUS,":"),React.createElement(Re.A,{id:"borderRadius",name:"borderRadius",value:null!==(n=null==S?void 0:S.borderRadius)&&void 0!==n?n:"10px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.FONT_SIZE,":"),React.createElement(Re.A,{id:"fontSize",name:"fontSize",value:null!==(r=null==S?void 0:S.fontSize)&&void 0!==r?r:"15px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"fontColor",name:"fontColor",value:null!==(a=null==S?void 0:S.fontColor)&&void 0!==a?a:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"fontColor",name:"fontColor",value:null!==(o=null==S?void 0:S.fontColor)&&void 0!==o?o:"#FFFFFF",onChange:T})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_PRIMARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",style:{flex:1},value:null!==(i=null==S?void 0:S.backgroundPrimaryColor)&&void 0!==i?i:"#fafafa",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",value:null!==(l=null==S?void 0:S.backgroundPrimaryColor)&&void 0!==l?l:"#fafafa",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_USER_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundUserColor",name:"backgroundUserColor",style:{flex:1},value:null!==(c=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==c?c:"#0084ff",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundUserColor",name:"backgroundUserColor",value:null!==(u=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==u?u:"#0084ff",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_AI_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundAiColor",name:"backgroundAiColor",style:{flex:1},value:null!==(s=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==s?s:"#eee",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundAiColor",name:"backgroundAiColor",value:null!==(f=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==f?f:"#eee",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_AI_SECONDARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundAiSecondaryColor",name:"backgroundAiSecondaryColor",style:{flex:1},value:null!==(d=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==d?d:"#ddd",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundAiSecondaryColor",name:"backgroundAiSecondaryColor",value:null!==(m=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==m?m:"#ddd",onChange:T,onEnter:T})))),React.createElement(_e.g,null),React.createElement(Se.Y,{title:He.COMMON.POPUP,isCollapsed:!1}),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.WIDTH,":"),React.createElement(Re.A,{id:"width",name:"width",value:null!==(p=null==S?void 0:S.width)&&void 0!==p?p:"460px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.MAX_HEIGHT,":"),React.createElement(Re.A,{id:"maxHeight",name:"maxHeight",value:null!==(h=null==S?void 0:S.maxHeight)&&void 0!==h?h:"40vh",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(v=null==S?void 0:S.iconTextBackgroundColor)&&void 0!==v?v:"#0084ff",onBlur:T,onEnter:T}),React.createElement(li,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(y=null==S?void 0:S.iconTextBackgroundColor)&&void 0!==y?y:"#0084ff",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextColor",name:"iconTextColor",value:null!==(g=null==S?void 0:S.iconTextColor)&&void 0!==g?g:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"iconTextColor",name:"iconTextColor",value:null!==(E=null==S?void 0:S.iconTextColor)&&void 0!==E?E:"#FFFFFF",onChange:T,onEnter:T})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BUBBLE_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"bubbleColor",name:"bubbleColor",style:{flex:1},value:null!==(b=null==S?void 0:S.bubbleColor)&&void 0!==b?b:"#0084ff",onBlur:T,onEnter:T}),React.createElement(li,{id:"bubbleColor",name:"bubbleColor",value:null!==(w=null==S?void 0:S.bubbleColor)&&void 0!==w?w:"#0084ff",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",style:{flex:1},value:null!==(R=null==S?void 0:S.backgroundHeaderColor)&&void 0!==R?R:"#0084ff",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",value:null!==(O=null==S?void 0:S.backgroundHeaderColor)&&void 0!==O?O:"#0084ff",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BUTTONS_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"headerButtonsColor",name:"headerButtonsColor",style:{flex:1},value:null!==(_=null==S?void 0:S.headerButtonsColor)&&void 0!==_?_:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"headerButtonsColor",name:"headerButtonsColor",value:null!==(x=null==S?void 0:S.headerButtonsColor)&&void 0!==x?x:"#FFFFFF",onChange:T,onEnter:T}))))))},vi=function(e){var t,n,r,a,o,i,l,c,u,s,f,d,m,p,h,v,y,g,E,b,w,R,O,_,x,S=e.settings,T=e.onUpdateSettings;return React.createElement(React.Fragment,null,React.createElement(Ne.X,{variant:"danger"},"This theme is ",React.createElement("b",null,"still in development"),". The related settings will be available soon."),React.createElement(go,null,React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.SPACING,":"),React.createElement(Re.A,{id:"spacing",name:"spacing",value:null!==(t=null==S?void 0:S.spacing)&&void 0!==t?t:"15px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.BORDER_RADIUS,":"),React.createElement(Re.A,{id:"borderRadius",name:"borderRadius",value:null!==(n=null==S?void 0:S.borderRadius)&&void 0!==n?n:"10px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.66}},React.createElement("label",null,He.COMMON.FONT_SIZE,":"),React.createElement(Re.A,{id:"fontSize",name:"fontSize",value:null!==(r=null==S?void 0:S.fontSize)&&void 0!==r?r:"13px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:1}},React.createElement("label",null,He.COMMON.FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"fontColor",name:"fontColor",value:null!==(a=null==S?void 0:S.fontColor)&&void 0!==a?a:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"fontColor",name:"fontColor",value:null!==(o=null==S?void 0:S.fontColor)&&void 0!==o?o:"#FFFFFF",onChange:T})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_PRIMARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",style:{flex:1},value:null!==(i=null==S?void 0:S.backgroundPrimaryColor)&&void 0!==i?i:"#fafafa",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundPrimaryColor",name:"backgroundPrimaryColor",value:null!==(l=null==S?void 0:S.backgroundPrimaryColor)&&void 0!==l?l:"#fafafa",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_USER_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundUserColor",name:"backgroundUserColor",style:{flex:1},value:null!==(c=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==c?c:"#434cc5",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundUserColor",name:"backgroundUserColor",value:null!==(u=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==u?u:"#434cc5",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_AI_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundAiColor",name:"backgroundAiColor",style:{flex:1},value:null!==(s=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==s?s:"#F1F3F7",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundAiColor",name:"backgroundAiColor",value:null!==(f=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==f?f:"#eee",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BACK_AI_SECONDARY_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundAiSecondaryColor",name:"backgroundAiSecondaryColor",style:{flex:1},value:null!==(d=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==d?d:"#ddd",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundAiSecondaryColor",name:"backgroundAiSecondaryColor",value:null!==(m=null==S?void 0:S.backgroundSecondaryColor)&&void 0!==m?m:"#ddd",onChange:T,onEnter:T})))),React.createElement(_e.g,null),React.createElement(Se.Y,{title:He.COMMON.POPUP,isCollapsed:!1}),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.WIDTH,":"),React.createElement(Re.A,{id:"width",name:"width",value:null!==(p=null==S?void 0:S.width)&&void 0!==p?p:"360px",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col",style:{flex:.75}},React.createElement("label",null,He.COMMON.MAX_HEIGHT,":"),React.createElement(Re.A,{id:"maxHeight",name:"maxHeight",value:null!==(h=null==S?void 0:S.maxHeight)&&void 0!==h?h:"40vh",onBlur:T,onEnter:T})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(v=null==S?void 0:S.iconTextBackgroundColor)&&void 0!==v?v:"#343541",onBlur:T,onEnter:T}),React.createElement(li,{id:"iconTextBackgroundColor",name:"iconTextBackgroundColor",value:null!==(y=null==S?void 0:S.iconTextBackgroundColor)&&void 0!==y?y:"#343541",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.AVATAR_MESSAGE_FONT_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"iconTextColor",name:"iconTextColor",value:null!==(g=null==S?void 0:S.iconTextColor)&&void 0!==g?g:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"iconTextColor",name:"iconTextColor",value:null!==(E=null==S?void 0:S.iconTextColor)&&void 0!==E?E:"#FFFFFF",onChange:T,onEnter:T})))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.BUBBLE_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"bubbleColor",name:"bubbleColor",style:{flex:1},value:null!==(b=null==S?void 0:S.bubbleColor)&&void 0!==b?b:"#434cc5",onBlur:T,onEnter:T}),React.createElement(li,{id:"bubbleColor",name:"bubbleColor",value:null!==(w=null==S?void 0:S.bubbleColor)&&void 0!==w?w:"#434cc5",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BACKGROUND_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",style:{flex:1},value:null!==(R=null==S?void 0:S.backgroundHeaderColor)&&void 0!==R?R:"#434cc5",onBlur:T,onEnter:T}),React.createElement(li,{id:"backgroundHeaderColor",name:"backgroundHeaderColor",value:null!==(O=null==S?void 0:S.backgroundHeaderColor)&&void 0!==O?O:"#434cc5",onChange:T,onEnter:T}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.HEADER_BUTTONS_COLOR,":"),React.createElement("div",{style:{display:"flex"}},React.createElement(Re.A,{id:"headerButtonsColor",name:"headerButtonsColor",style:{flex:1},value:null!==(_=null==S?void 0:S.headerButtonsColor)&&void 0!==_?_:"#FFFFFF",onBlur:T,onEnter:T}),React.createElement(li,{id:"headerButtonsColor",name:"headerButtonsColor",value:null!==(x=null==S?void 0:S.headerButtonsColor)&&void 0!==x?x:"#FFFFFF",onChange:T,onEnter:T}))))))};function yi(e){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bi(e,t,n){var r;return r=function(e,t){if("object"!=yi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==yi(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wi=function(e){var t,n,r,a=e.theme,o=e.updateTheme,i=e.resetTheme,l=e.deleteTheme,c=function(e,t){var n=Ei(Ei({},a.settings),{},bi({},t,e));o(n,"settings")};return React.createElement(React.Fragment,null,"internal"===a.type&&"chatgpt"===a.themeId&&React.createElement(ci,{settings:null!==(t=a.settings)&&void 0!==t?t:[],onUpdateSettings:c}),"internal"===a.type&&"messages"===a.themeId&&React.createElement(hi,{settings:null!==(n=a.settings)&&void 0!==n?n:[],onUpdateSettings:c}),"internal"===a.type&&"timeless"===a.themeId&&React.createElement(vi,{settings:null!==(r=a.settings)&&void 0!==r?r:[],onUpdateSettings:c}),"internal"!==a.type&&React.createElement(pi,{theme:a,onUpdateTheme:o}),React.createElement(_e.g,null),React.createElement(Se.Y,{title:He.COMMON.ACTIONS}),React.createElement("div",{style:{display:"flex",marginTop:10}},React.createElement(w.M,{className:"secondary",onClick:function(){i()}},He.COMMON.RESET),React.createElement("div",{style:{flex:"auto"}}),React.createElement(w.M,{className:"danger",disabled:"internal"===a.type,onClick:l},He.COMMON.DELETE)))};function Ri(e){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(e)}function Oi(){Oi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ri(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ri(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _i(e){return function(e){if(Array.isArray(e))return ki(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ii(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){Ti(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ti(e,t,n){var r;return r=function(e,t){if("object"!=Ri(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ri(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ni(o,r,a,i,l,"next",e)}function l(e){Ni(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Ii(e,t){if(e){if("string"==typeof e)return ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ai=wp.element.useState;const Li=function(e){var t,n,r=(0,u.jE)(),a=e.onSwitchTheme,o=void 0===a?function(){}:a,i=(t=Ai(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||Ii(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],s=(0,f.I)({queryKey:["themes"],queryFn:mn,initialData:P}).data,d=e.currentTheme,m=function(){var e=Ci(Oi().mark((function e(t,n){var a,o,i;return Oi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),a=Si(Si({},d),{},Ti({},n,t)),o=_i(s),i=o.findIndex((function(e){return e.themeId===d.themeId})),o[i]=a,e.next=8,pn(o);case 8:o=e.sent,r.setQueryData(["themes"],o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:c(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Ci(Oi().mark((function e(){var t;return Oi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,pn([].concat(_i(s),[{type:"css",name:"New Theme",themeId:"theme-"+Ot(),settings:[],style:""}]));case 4:t=e.sent,r.setQueryData(["themes"],t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Ci(Oi().mark((function e(){var t,n;return Oi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=_i(s.filter((function(e){return e.themeId!==d.themeId}))),n=t[0],o(n.themeId),e.next=6,pn(t);case 6:return e.next=8,r.setQueryData(["themes"],t);case 8:c(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Ci(Oi().mark((function e(){var t,n;return Oi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=_i(s),n=t.findIndex((function(e){return e.themeId===d.themeId})),t[n]={type:t[n].type,name:t[n].name,themeId:t[n].themeId,settings:[],style:""},e.next=6,pn(t);case 6:return e.next=8,r.setQueryData(["themes"],t);case 8:c(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement(b._,{inversed:!0,onChange:function(e,t){var n=s.find((function(e){return e.themeId===t.key}));n&&o(n.themeId)},currentTab:null==d?void 0:d.themeId,action:React.createElement(React.Fragment,null,React.createElement(w.M,{rounded:!0,className:"secondary",icon:"plus",onClick:p}))},null==s?void 0:s.map((function(e){return React.createElement(b.V,{key:e.themeId,title:e.name,busy:l},React.createElement(wi,{theme:e,updateTheme:m,resetTheme:v,deleteTheme:h}))}))))};var Mi=n(1469),Pi=n(6966),ji=n(2902);function Fi(e){return Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fi(e)}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=Fi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==Fi(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gi=function(e){var t={width:9,height:9,margin:"5px 0px 0px 5px",borderRadius:"50%",backgroundColor:"#a3a1a1",opacity:1,animation:"bouncing-loader 0.4s infinite alternate"};return React.createElement(React.Fragment,null,React.createElement("style",null,"\n          @keyframes bouncing-loader {\n            to {\n              opacity: 0.6;\n              transform: translateY(-10px);\n            }\n          }\n        "),React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:26}},["0.1s","0.2s","0.3s"].map((function(e,n){return React.createElement("div",{key:n,style:Ui(Ui({},t),{},{animationDelay:e})})}))))},Bi=n(1137),Hi=["enabled","content","children","className"];function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yi.apply(this,arguments)}function zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vi=wp.element,Ki=Vi.useState,qi=Vi.useEffect,Xi=Vi.useRef,$i=Vi.useCallback;const Qi=function(e){var t=e.enabled,n=e.content,r=e.children,a=e.className,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Hi),i=(0,Pi.gR)(),l=zi(Ki("idle"),2),c=l[0],u=l[1],s=zi(Ki(!0),2),f=s[0],d=s[1],m=Xi(null),p=Xi(!1),h=$i((function(){p.current||(p.current=!0,m.current=setTimeout((function(){d(!1)}),500))}),[]),v=$i((function(){m.current&&clearTimeout(m.current),d(!0),p.current=!1}),[]);qi((function(){return function(){m.current&&clearTimeout(m.current)}}),[]);var y="success"===c?'<path d="M10.7673 18C10.3106 18 9.86749 17.8046 9.54432 17.4555L5.50694 13.1222C4.83102 12.3968 4.83102 11.2208 5.50694 10.4954C6.18287 9.76997 7.27871 9.76997 7.95505 10.4954L10.6794 13.4196L16.9621 5.63976C17.5874 4.86495 18.6832 4.78289 19.4031 5.45388C20.125 6.12487 20.2036 7.29638 19.5759 8.07391L12.0778 17.3589C11.7639 17.7475 11.3119 17.9801 10.8319 18C10.8087 18 10.788 18 10.7673 18Z" />':"error"===c?'<path d="M17.7623 17.7626C17.0831 18.4418 15.9549 18.416 15.244 17.705L5.79906 8.26012C5.08811 7.54917 5.0623 6.42098 5.74145 5.74183C6.4206 5.06267 7.54879 5.08849 8.25975 5.79944L17.7047 15.2443C18.4156 15.9553 18.4414 17.0835 17.7623 17.7626Z" /><path d="M17.5508 8.52848L8.52842 17.5509C7.84927 18.23 6.72108 18.2042 6.01012 17.4933C5.29917 16.7823 5.27336 15.6541 5.95251 14.975L14.9749 5.95257C15.6541 5.27342 16.7823 5.29923 17.4932 6.01019C18.2042 6.72114 18.23 7.84933 17.5508 8.52848Z" />':'<path d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" />';return React.createElement("div",Yi({},o,{onMouseLeave:v,onMouseEnter:h,onMouseOver:h}),React.createElement("span",{className:a},r),React.createElement("div",{className:i("mwai-reply-actions",{"mwai-hidden":f})},t&&React.createElement("div",{className:"mwai-copy-button",onClick:function(){try{navigator.clipboard.writeText(n),u("success")}catch(e){u("error"),console.warn("Not allowed to copy to clipboard. Make sure your website uses HTTPS.",{content:n})}finally{setTimeout((function(){u("idle")}),2e3)}}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",dangerouslySetInnerHTML:{__html:y}}))))};function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zi=wp.element.useMemo;const el=function(e){var t=e.role,n=void 0===t?"user":t,r=(0,Mi.o)().state,a=r.pluginUrl,o=r.iconUrl,i=r.userData,l=r.userName,c=r.aiName,u=r.guestName,s=r.userAvatar,f=r.aiAvatar,d=r.guestAvatar,m=r.userAvatarUrl,p=r.aiAvatarUrl,h=r.guestAvatarUrl,v=Zi((function(){var e="assistant"===n,t=!i&&!e,r=function(e){return React.createElement("div",{className:"mwai-name-text"},e)},v=function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return null;if((0,Po.Ve)(t))return o=t,React.createElement("div",{className:"mwai-avatar mwai-emoji",style:{fontSize:"32px",lineHeight:"32px"}},o);var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,Pi.mv)(e)?e:e&&!(0,Po.Ve)(e)?t?e:"".concat(a,"/images/").concat(e):(t||(0,Po.Ve)(e)||console.warn("Invalid URL for avatar:",e),null)}(t,i)||n;return l?function(e,t){return React.createElement("div",{className:"mwai-avatar"},React.createElement("img",{width:"32",height:"32",src:e,alt:t}))}(l,r):null};if(e){var y=v(f,p,o,"AI Avatar");return y?(null===p&&o&&console.warn("Using iconUrl as a temporary fallback for AI avatar. Please set aiAvatarUrl."),y):r(c)}return t?t?v(d,h,null,"Guest Avatar")||r(u||"Guest"):void 0:v(s,m,null==i?void 0:i.AVATAR_URL,"User Avatar",!0)||r(function(e,t,n){return n&&0!==Object.keys(n).length?Object.entries(n).reduce((function(e,t){var n,r,a=(r=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],l="{".concat(o,"}");return e.includes(l)?e.replace(l,i):e}),e):t||e||"Guest"}(l,u,i))}),[n,c,l,u,i,o,f,s,d,p,m,h,a]);return React.createElement("span",{className:"mwai-name"},v)};function tl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rl=wp.element,al=rl.useState,ol=rl.useMemo,il=rl.useEffect,ll=rl.useRef,cl=function(e){var t=e.href,n=e.children;if(!t)return React.createElement("span",null,n);var r=window.location.hostname,a="_self";try{a=r===new URL(t,window.location.href).hostname?"_self":"_blank"}catch(e){console.error("Invalid URL:",e),a="_blank"}if("Uploaded File"===String(n)){var o=t.split("/").pop();return React.createElement("a",{href:t,target:a,rel:"noopener noreferrer",className:"mwai-filename"},React.createElement("span",null," ",o))}return React.createElement("a",{href:t,target:a,rel:"noopener noreferrer"},n)},ul=function(e){var t,n=e.message,r=e.onRendered,a=void 0===r?function(){}:r,o=(0,Mi.o)().state.copyButton,i=tl(al(n.isQuerying||n.isStreaming),1)[0],l=n.isQuerying,c=n.isStreaming,u=null!==(t=n.content)&&void 0!==t?t:"";(u.match(/```/g)||[]).length%2!=0?u+="\n```":n.isStreaming&&(u+="<BlinkingCursor />"),il((function(){i&&(!i||l||c)||a()}),[i,l,c]);var s=ol((function(){return{overrides:{BlinkingCursor:{component:Po.rn},a:{component:cl},img:{props:{onError:function(e){null!==e.target.src.match(/\.(jpeg|jpg|gif|png)$/)&&(e.target.src="https://placehold.co/600x200?text=Expired+Image")},className:"mwai-image"}}}}}),[]),f=ol((function(){var e="";try{e=(0,Ra.cx)(u,s)}catch(t){console.error("Crash in markdown-to-jsx! Reverting to plain text.",{e:t,content:u}),e=u}return e}),[u,s]);return l||c&&!u?React.createElement(Gi,null):React.createElement(React.Fragment,null,React.createElement(el,{role:n.role}),React.createElement(Qi,{content:n.content,enabled:o,className:"mwai-text"},f))},sl=function(e){var t=e.message,n=e.onRendered,r=void 0===n?function(){}:n,a=tl(al(null==t?void 0:t.images),2),o=a[0],i=a[1];return il((function(){r()})),t.isQuerying?React.createElement(Gi,null):React.createElement(React.Fragment,null,React.createElement(el,{role:t.role}),React.createElement("span",{className:"mwai-text"},React.createElement("div",{className:"mwai-gallery"},null==o?void 0:o.map((function(e,t){return React.createElement("a",{key:t,href:e,target:"_blank",rel:"noopener noreferrer"},React.createElement("img",{key:t,src:e,onError:function(){return function(e){i((function(t){return t.map((function(t,n){return n===e?"https://placehold.co/600x200?text=Expired+Image":t}))}))}(t)}}))})))))},fl=function(e){var t=e.message,n=e.conversationRef,r=e.onRendered,a=void 0===r?function(){}:r,o=ll(null),i=tl(al(t.isQuerying),1)[0],l=tl(al(!t.isQuerying),2),c=l[0],u=l[1],s=t.content;il((function(){console.warn("Do not use the Typewriter Effect. Use Streaming instead.")}),[]),(0,Pi.$$)(200,(function(){null!=n&&n.current}),!c),il((function(){if(i){if(o.current){var e={strings:[s],typeSpeed:(0,Bi.W5)("typewriter.speed",15),showCursor:!1,onComplete:function(e){e.cursor&&e.cursor.remove(),a(),u((function(){return!0}))}},t=new ji.A(o.current,e);return function(){t.destroy()}}}else a()}),[t,t.isQuerying]);var f=ol((function(){var e="";try{e=(0,Ra.cx)(s)}catch(t){console.error("Crash in markdown-to-jsx! Reverting to plain text.",{e:t,content:s}),e=s}return e}),[s]);return React.createElement(React.Fragment,null,t.isQuerying&&React.createElement(Gi,null),!t.isQuerying&&i&&React.createElement(React.Fragment,null,React.createElement(el,{role:t.role}),React.createElement("span",{className:"mwai-text",ref:o})),!t.isQuerying&&!i&&React.createElement(React.Fragment,null,React.createElement(el,{role:t.role}),React.createElement("span",{className:"mwai-text"},f)))};const dl=function(e){var t,n=e.message,r=e.conversationRef,a=(0,Mi.o)().state.typewriter,o=(0,Pi.gR)(),i=ll(),l=o("mwai-reply",{"mwai-ai":"assistant"===n.role,"mwai-user":"user"===n.role,"mwai-system":"system"===n.role}),c=(null==n||null===(t=n.images)||void 0===t?void 0:t.length)>0,u=function(){i.current&&(n.isQuerying||i.current.classList.contains("mwai-rendered")||"undefined"!=typeof hljs&&(i.current.classList.add("mwai-rendered"),i.current.querySelectorAll("pre code").forEach((function(e){hljs.highlightElement(e)}))))};return ol((function(){return"user"===n.role?React.createElement("div",{ref:i,className:l},React.createElement(ul,{message:n})):"assistant"===n.role?c?React.createElement("div",{ref:i,className:l},React.createElement(sl,{message:n,conversationRef:r,onRendered:u})):a&&!n.isStreaming?(console.warn("The Typewriter effect is deprecated. Use Streaming instead."),React.createElement("div",{ref:i,className:l},React.createElement(fl,{message:n,conversationRef:r,onRendered:u}))):React.createElement("div",{ref:i,className:l},React.createElement(ul,{message:n,conversationRef:r,onRendered:u})):"system"===n.role?React.createElement("div",{ref:i,className:l},React.createElement(ul,{message:n,conversationRef:r,onRendered:u})):React.createElement("div",null,React.createElement("i",null,"Unhandled role."))}),[n,r,c,a])};var ml=n(2192);function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hl=wp.element,vl=hl.useState,yl=hl.useMemo,gl=hl.useRef;const El=function(){var e,t,n=(0,Pi.gR)(),r=(0,Mi.o)(),a=r.state,o=r.actions,i=a.uploadedFile,l=a.busy,c=a.imageUpload,u=a.fileUpload,s=a.fileSearch,f=a.draggingType,d=o.onUploadFile,m=(e=vl(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],h=m[1],v=gl(),y=null==i?void 0:i.uploadedId,g=c||s||u,E=i,b=yl((function(){return null!=E&&E.localFile?E.localFile.type.startsWith("image/")?"image":"document":f}),[E,f]),w=yl((function(){var e="idle";null!=E&&E.uploadProgress?e="up":f?e="add":p&&y?e="del":y?e="ok":p&&!y&&(e="add");var t=b?b.toLowerCase():"idle";return"mwai-file-upload-icon mwai-".concat(t,"-").concat(e)}),[b,E,f,p,y]),R=yl((function(){return null!=E&&E.uploadProgress?E.uploadProgress>99?99:Math.round(E.uploadProgress):""}),[E]);return g?React.createElement("div",{disabled:l,onClick:function(){null!=i&&i.localFile?d(null):l||v.current.click()},onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},className:n("mwai-file-upload",{"mwai-enabled":null==i?void 0:i.uploadedId,"mwai-busy":(null==i?void 0:i.localFile)&&!(null!=i&&i.uploadedId)}),style:{cursor:l?"default":"pointer"}},React.createElement("div",{className:w},React.createElement("span",{className:"mwai-file-upload-progress"},R)),React.createElement("input",{type:"file",ref:v,onChange:function(e){var t=e.target.files[0];t&&d(t)},style:{display:"none"}})):null};function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wl=wp.element,Rl=wl.useRef,Ol=wl.useState,_l=wl.useEffect,xl=wl.useImperativeHandle;const Sl=function(){var e,t,n=(0,Pi.gR)(),r=(0,Mi.o)(),a=r.state,o=r.actions,i=a.inputText,l=a.textInputMaxLength,c=a.textInputPlaceholder,u=a.error,s=a.speechRecognitionAvailable,f=a.isMobile,d=a.conversationRef,m=a.open,p=a.uploadIconPosition,h=a.locked,v=a.isListening,y=a.busy,g=a.speechRecognition,E=a.chatbotInputRef,b=o.onSubmitAction,w=o.setIsListening,R=o.resetError,O=o.setInputText,_=(e=Ol(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=_[0],S=_[1],T=Rl();xl(E,(function(){return{focusInput:function(){var e;null===(e=T.current)||void 0===e||e.focus()},currentElement:function(){return T.current}}})),_l((function(){!f&&m&&T.current.focus(),d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[m,f,d]);var N=n("mwai-input-text",{});return React.createElement("div",{ref:E,className:N},"mwai-input"===p&&React.createElement(El,null),React.createElement(ml.A,{ref:T,disabled:y||h,placeholder:c,value:i,maxLength:l,onCompositionStart:function(){return S(!0)},onCompositionEnd:function(){return S(!1)},onKeyDown:function(e){x||"Enter"!==e.code||e.shiftKey||(e.preventDefault(),b())},onChange:function(e){return t=e.target.value,v&&w(!1),u&&R(),void O(t);var t}}),g&&React.createElement(Pi.tm,{active:v,disabled:!s||y,className:"mwai-microphone",onClick:function(){return w(!v)}}))};var Tl=n(7775),Nl=n(1585),Cl=wp.element,Il=Cl.useMemo,kl=Cl.useCallback;const Al=function(){var e=(0,Mi.o)(),t=e.state,n=e.actions,r=n.onClear,a=n.onSubmitAction,o=n.setIsListening,i=t.textClear,l=t.textSend,c=t.uploadedFile,u=t.inputText,s=t.messages,f=t.isListening,d=t.timeElapsed,m=t.busy,p=t.submitButtonConf,h=t.locked,v=!(null==c||!c.uploadProgress),y=!(null!=c&&c.uploadedId)&&u.length<1&&(null==s?void 0:s.length)>1,g=Il((function(){return m?d?React.createElement("div",{className:"mwai-timer"},d):null:null!=p&&p.imageSend&&null!=p&&p.imageClear?React.createElement("img",{src:y?p.imageClear:p.imageSend,alt:y?i:l}):y||l?y&&!i?React.createElement(Nl.A,{size:"20"}):React.createElement("span",null,y?i:l):React.createElement(Tl.A,{size:"20",style:{marginLeft:10}})}),[m,d,y,i,l,p]),E=Il((function(){return"mwai-input-submit ".concat(m?"mwai-busy":"")}),[m]),b=kl((function(){f&&o(!1),y?r():a()}),[y,f,r,a,o]),w=kl((function(){m||b()}),[m,b]);return React.createElement("button",{className:E,disabled:m||v||h,onClick:w},g)};var Ll=wp.element.useMemo;const Ml=function(){var e=(0,Mi.o)(),t=e.state,n=e.actions,r=t.theme,a=t.isWindow,o=t.fullscreen,i=t.aiName,l=t.pluginUrl,c=t.open,u=t.iconUrl,s=t.aiAvatarUrl,f=t.windowed,d=t.headerSubtitle,m=n.setOpen,p=n.setWindowed,h=Ll((function(){if(!a)return null;var e="timeless"===(null==r?void 0:r.themeId),t=e?function(e,t,n,r){var a;if((0,Po.Ve)(r||n))return a=r||n,React.createElement("div",{className:"mwai-avatar mwai-emoji",style:{fontSize:"48px",lineHeight:"48px"}},a);var o,i,l=(o=r,((0,Pi.mv)(o)?o:o?"".concat(t,"/images/").concat(o):null)||n||"".concat(t,"/images/chat-openai.svg"));return l?(i=l,"AI Engine",React.createElement("div",{className:"mwai-avatar"},React.createElement("img",{alt:"AI Engine",src:i}))):React.createElement("div",{className:"mwai-name-text"},e)}(i,l,u,s):null,n=null==d?"Discuss with":d;return React.createElement(React.Fragment,null,e&&React.createElement(React.Fragment,null,t,React.createElement("div",{className:"mwai-name"},n&&React.createElement("small",{className:"mwai-subtitle"},n),React.createElement("div",null,i)),React.createElement("div",{style:{flex:"auto"}})),React.createElement("div",{className:"mwai-buttons"},o&&React.createElement("div",{className:"mwai-resize-button",onClick:function(){return p(!f)}}),React.createElement("div",{className:"mwai-close-button",onClick:function(){return m(!c)}})))}),[a,null==r?void 0:r.themeId,i,l,u,s,o,p,f,m,c,d]);return React.createElement("div",{className:"mwai-header"},h)};var Pl=wp.element,jl=Pl.useMemo,Fl=Pl.useEffect;const Dl=function(){var e=(0,Mi.o)(),t=e.state,n=e.actions,r=t.isWindow,a=t.iconText,o=t.showIconMessage,i=t.iconAlt,l=t.iconUrl,c=t.open,u=n.setShowIconMessage,s=n.setOpen;Fl((function(){c&&o&&u(!1)}),[c,u,o]);var f=jl((function(){return r?React.createElement("div",{className:"mwai-trigger mwai-open-button"},React.createElement(Pi.bE,{className:"mwai-icon-text-container",if:a&&o},React.createElement("div",{className:"mwai-icon-text-close",onClick:function(){return u(!1)}},""),React.createElement("div",{className:"mwai-icon-text",onClick:function(){return s(!0)}},a)),React.createElement("div",{className:"mwai-icon-container",onClick:function(){return s(!0)}},(0,Po.Ve)(l)?React.createElement("div",{className:"mwai-icon mwai-emoji",style:{fontSize:"48px",lineHeight:"64px",width:"64px",height:"64px",display:"flex",justifyContent:"center",alignItems:"center"}},l):React.createElement("img",{className:"mwai-icon",width:"64",height:"64",alt:i,src:l}))):null}),[r,a,o,i,l,u,s]);return React.createElement(React.Fragment,null,f)};var Ul=n(1594),Gl=n(5731),Bl=n(9798),Hl=n(8834),Yl=n(7611),zl=n(3893),Wl=n(718),Vl=n(215);function Kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ql(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xl=wp.element,$l=Xl.useState,Ql=Xl.useRef,Jl=Xl.useEffect;function Zl(e,t){e.getByteTimeDomainData(t);for(var n=0,r=0;r<t.length;r++){var a=t[r]-128;n+=a*a}return Math.sqrt(n/t.length)}function ec(e){var t=e.assistantStream,n=void 0===t?null:t,r=e.userStream,a=void 0===r?null:r,o=e.assistantColor,i=void 0===o?null:o,l=e.userColor,c=void 0===l?null:l,u=e.userUI,s=void 0===u?{emoji:null,text:null,image:null,use:"text"}:u,f=e.assistantUI,d=void 0===f?{emoji:null,text:null,image:null,use:"text"}:f,m=e.attackSpeed,p=void 0===m?.3:m,h=e.releaseSpeed,v=void 0===h?.05:h,y=e.circleSize,g=void 0===y?50:y,E=e.pulseMaxSize,b=void 0===E?30:E,w=Kl($l(0),2),R=w[0],O=w[1],_=Kl($l(0),2),x=_[0],S=_[1],T=Ql(0),N=Ql(0),C=Ql(null),I=Ql(null),k=Ql(null),A=Ql(null),L=Ql(null);Jl((function(){if(n||a){C.current||(C.current=new AudioContext);var e,t,r,o=C.current;return n&&(e=o.createMediaStreamSource(n),I.current=o.createAnalyser(),I.current.fftSize=1024,k.current=new Uint8Array(I.current.frequencyBinCount),e.connect(I.current)),a&&(t=o.createMediaStreamSource(a),A.current=o.createAnalyser(),A.current.fftSize=1024,L.current=new Uint8Array(A.current.frequencyBinCount),t.connect(A.current)),function e(){var t=0;I.current&&k.current&&(t=Zl(I.current,k.current));var n=0;A.current&&L.current&&(n=Zl(A.current,L.current)),t>T.current?T.current=T.current*(1-p)+t*p:T.current=T.current*(1-v)+t*v,n>N.current?N.current=N.current*(1-p)+n*p:N.current=N.current*(1-v)+n*v,O(T.current),S(N.current),r=requestAnimationFrame(e)}(),function(){e&&e.disconnect(),I.current&&I.current.disconnect(),t&&t.disconnect(),A.current&&A.current.disconnect(),r&&cancelAnimationFrame(r)}}}),[n,a,p,v]);var M=g+Math.min(R/20,1)*b,P=g+Math.min(x/20,1)*b,j=g+b,F={width:P,height:P,borderRadius:"50%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:.5};c&&(F.backgroundColor=c);var D={width:M,height:M,borderRadius:"50%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:.5};i&&(D.backgroundColor=i);var U={width:g,height:g,borderRadius:"50%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:"#fff"};c&&(U.backgroundColor=c);var G={width:g,height:g,borderRadius:"50%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:"#fff"};i&&(G.backgroundColor=i);var B="mwai-visualizer";x>R?B+=" mwai-user-talking":R>x&&(B+=" mwai-assistant-talking");var H=function(e){if(!e)return null;var t=e.emoji,n=e.text,r=e.image;switch(e.use){case"emoji":return t?React.createElement("span",null,t):n?React.createElement("span",null,n.slice(0,1)):null;case"image":return r?React.createElement("img",{src:r,alt:"",style:{width:"100%",height:"100%",borderRadius:"50%"}}):t?React.createElement("span",null,t):n?React.createElement("span",null,n.slice(0,1)):null;default:return n?React.createElement("span",null,n.slice(0,1)):t?React.createElement("span",null,t):null}};return React.createElement("div",{className:B},React.createElement("div",{className:"mwai-visualizer-user",style:{position:"relative",width:j,height:j,overflow:"visible"}},React.createElement("div",{className:"mwai-animation",style:F}),React.createElement("div",{style:U},H(s))),React.createElement("hr",{className:"mwai-visualizer-line"}),React.createElement("div",{className:"mwai-visualizer-assistant",style:{position:"relative",width:j,height:j,overflow:"visible"}},React.createElement("div",{className:"mwai-animation",style:D}),React.createElement("div",{style:G},H(d))))}function tc(e){return tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(e)}function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=tc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=tc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==tc(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ac(e){return function(e){if(Array.isArray(e))return sc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(){oc=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==tc(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(tc(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ic(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function lc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ic(o,r,a,i,l,"next",e)}function l(e){ic(o,r,a,i,l,"throw",e)}i(void 0)}))}}function cc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||uc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uc(e,t){if(e){if("string"==typeof e)return sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sc(e,t):void 0}}function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fc(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];1>=e&&(t=console).log.apply(t,r)}function dc(e){if(!e)return null;var t=e.input_token_details,n=void 0===t?{}:t,r=n.text_tokens,a=void 0===r?0:r,o=n.audio_tokens,i=void 0===o?0:o,l=n.cached_tokens_details,c=void 0===l?{}:l,u=c.text_tokens,s=void 0===u?0:u,f=c.audio_tokens,d=void 0===f?0:f,m=e.output_token_details,p=void 0===m?{}:m,h=p.text_tokens,v=void 0===h?0:h,y=p.audio_tokens;return{text_input_tokens:a,audio_input_tokens:i,text_output_tokens:v,audio_output_tokens:void 0===y?0:y,text_cached_tokens:s,audio_cached_tokens:d}}function mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",n=e.pluginUrl,r=e.iconUrl,a=e.userData,o=e.userName,i=e.aiName,l=e.guestName,c=e.userAvatar,u=e.aiAvatar,s=e.guestAvatar,f=e.userAvatarUrl,d=e.aiAvatarUrl,m=e.guestAvatarUrl,p=function(e,t,r,a){if(t){var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,Pi.mv)(e)?e:e&&!(0,Po.Ve)(e)?t?e:"".concat(n,"/images/").concat(e):null}(r,arguments.length>4&&void 0!==arguments[4]&&arguments[4])||a;if(o)return{emoji:null,text:null,image:o,use:"image"}}return(0,Po.Ve)(e)?{emoji:e,text:null,image:null,use:"emoji"}:{emoji:null,text:e,image:null,use:"text"}};if("assistant"===t)return p(i,u,d,r);if(a){var h=function(e,t,n){return n&&0!==Object.keys(n).length?Object.entries(n).reduce((function(e,t){var n=cc(t,2),r=n[0],a=n[1],o="{".concat(r,"}");return e.includes(o)?e.replace(o,a):e}),e):t||e||"Guest"}(o,l,a);return p(h,c,f,null==a?void 0:a.AVATAR_URL,!0)}return a||"user"!==t?{emoji:null,text:"Unknown",image:null,use:"text"}:p(l||"Guest",s,m,null)}const pc=function(){var e=(0,Mi.o)(),t=e.state,n=e.actions,r=t.busy,a=t.locked,o=t.open,i=t.popup,l=n.onStartRealtimeSession,c=n.onRealtimeFunctionCallback,u=n.onCommitStats,s=n.onCommitDiscussions,f=cc((0,Ul.useState)(!1),2),d=f[0],m=f[1],p=cc((0,Ul.useState)(!1),2),h=p[0],v=p[1],y=cc((0,Ul.useState)(!1),2),g=y[0],E=y[1],b=cc((0,Ul.useState)(null),2),w=(b[0],b[1]),R=cc((0,Ul.useState)(null),2),O=(R[0],R[1]),_=cc((0,Ul.useState)({text_input_tokens:0,audio_input_tokens:0,text_output_tokens:0,audio_output_tokens:0,text_cached_tokens:0,audio_cached_tokens:0}),2),x=_[0],S=_[1],T=cc((0,Ul.useState)([]),2),N=T[0],C=T[1],I=(0,Ul.useRef)(new Set),k=(0,Ul.useRef)(null),A=(0,Ul.useRef)(null),L=(0,Ul.useRef)(null),M=cc((0,Ul.useState)(!0),2),P=M[0],j=(M[1],cc((0,Ul.useState)(!0),2)),F=j[0],D=j[1],U=cc((0,Ul.useState)(!1),2),G=U[0],B=U[1],H=cc((0,Ul.useState)(!1),2),Y=H[0],z=H[1],W=cc((0,Ul.useState)(null),2),V=W[0],K=W[1],q=(0,Ul.useRef)([]),X=(0,Ul.useMemo)((function(){return mc(t,"user")}),[t]),$=(0,Ul.useMemo)((function(){return mc(t,"assistant")}),[t]);(0,Ul.useEffect)((function(){!o&&h&&i&&te()}),[o,i,h]);var Q=(0,Ul.useCallback)(function(){var e=lc(oc().mark((function e(t){return oc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]),J=(0,Ul.useCallback)((function(){A.current&&"open"===A.current.readyState?(A.current.send(JSON.stringify({type:"session.update",session:{input_audio_transcription:{model:"whisper-1"}}})),fc(1,"Sent session.update to enable Whisper.")):console.error("Data channel is not open yet; cannot enable transcription.")}),[]),Z=(0,Ul.useCallback)(function(){var e=lc(oc().mark((function e(t,n,r){var a,o,i,l,u,s;return oc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={};try{a=JSON.parse(r||"{}")}catch(e){console.error("Could not parse function arguments.",r)}if(o=q.current,i=o.find((function(e){return e.name===n}))){e.next=7;break}return console.error("No match for callback: '".concat(n,"'.")),e.abrupt("return");case 7:return e.prev=7,e.next=10,c(i.id,i.type,i.name,i.target,a);case 10:if(null!=(u=e.sent)&&u.success){e.next=14;break}return console.error("Callback failed.",null==u?void 0:u.message),e.abrupt("return");case 14:s=u.data,"open"===(null===(l=A.current)||void 0===l?void 0:l.readyState)&&(fc(1,"Send callback value:",s),A.current.send(JSON.stringify({type:"conversation.item.create",item:{type:"function_call_output",call_id:t,output:JSON.stringify(s)}})),A.current.send(JSON.stringify({type:"response.create",response:{instructions:"Reply based on the function's output."}}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.error("Error in handleFunctionCall.",e.t0);case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[c]),ee=(0,Ul.useCallback)(function(){var e=lc(oc().mark((function e(t,n){var r,a,o,i,l,c,u;return oc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),r=new RTCPeerConnection,k.current=r,e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!0});case 6:a=e.sent,L.current=a,a.getTracks().forEach((function(e){return r.addTrack(e,a)})),e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error accessing microphone.",e.t0),m(!1),e.abrupt("return");case 16:return r.ontrack=function(e){var t=document.getElementById("mwai-audio");t&&(t.srcObject=e.streams[0]),K(e.streams[0])},o=r.createDataChannel("oai-events"),A.current=o,o.addEventListener("open",(function(){fc(1,"Data channel open."),J()})),o.addEventListener("message",(function(e){var t,n;try{t=JSON.parse(e.data)}catch(t){return void console.error("Could not parse Realtime message.",e.data)}switch(((null===(n=t.type)||void 0===n?void 0:n.endsWith(".done"))||"input_audio_buffer.committed"===t.type||"conversation.item.input_audio_transcription.completed"===t.type||"response.done"===t.type)&&console.log("Key event from Realtime API.",t),t.type){case"input_audio_buffer.committed":var r=t.item_id;I.current.has(r)||(I.current.add(r),C((function(e){return[].concat(ac(e),[{id:r,role:"user",content:"[Audio]"}])}))),O("user");break;case"conversation.item.input_audio_transcription.completed":var a=t.item_id,o=(t.transcript||"[Audio]").trim();C((function(e){return e.map((function(e){return e.id===a&&"user"===e.role?rc(rc({},e),{},{content:o}):e}))}));break;case"response.audio_transcript.done":var i=t.item_id,l=(t.transcript||"[Audio]").trim();O("assistant"),I.current.has(i)||(I.current.add(i),C((function(e){return[].concat(ac(e),[{id:i,role:"assistant",content:l}])})));break;case"response.function_call_arguments.done":var c=t,u=c.call_id,s=c.name,f=c.arguments;fc(1,"Function call requested.",u,s),Z(u,s,f);break;case"response.done":var d=t.response;if(null!=d&&d.usage){var m=dc(d.usage);m&&S((function(e){var t={text_input_tokens:(e.text_input_tokens||0)+m.text_input_tokens,audio_input_tokens:(e.audio_input_tokens||0)+m.audio_input_tokens,text_output_tokens:(e.text_output_tokens||0)+m.text_output_tokens,audio_output_tokens:(e.audio_output_tokens||0)+m.audio_output_tokens,text_cached_tokens:(e.text_cached_tokens||0)+m.text_cached_tokens,audio_cached_tokens:(e.audio_cached_tokens||0)+m.audio_cached_tokens};return Q(t),t}))}O("user")}})),e.next=23,r.createOffer();case 23:return i=e.sent,e.next=26,r.setLocalDescription(i);case 26:return l=n||"gpt-4o-preview-2024-12-17",e.next=30,fetch("".concat("https://api.openai.com/v1/realtime","?model=").concat(l),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/sdp"},body:i.sdp});case 30:if((c=e.sent).ok){e.next=35;break}return console.error("SDP exchange failed.",c),m(!1),e.abrupt("return");case 35:return e.next=37,c.text();case 37:return u=e.sent,e.next=40,r.setRemoteDescription({type:"answer",sdp:u});case 40:fc(1,"Realtime connection established."),m(!1),v(!0),E(!1),O("user");case 45:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[J,Z,Q]),te=(0,Ul.useCallback)((function(){try{k.current&&(k.current.close(),k.current=null),L.current&&(L.current.getTracks().forEach((function(e){return e.stop()})),L.current=null),A.current=null,m(!1),v(!1),E(!1),O(null),console.log("Messages:",N),console.log("Statistics:",x),s(N),C([]),S({text_input_tokens:0,audio_input_tokens:0,text_output_tokens:0,audio_output_tokens:0,text_cached_tokens:0,audio_cached_tokens:0}),fc(1,"Stopped Realtime connection.")}catch(e){console.error("Error stopping connection.",e)}}),[N,x,s]),ne=(0,Ul.useCallback)((function(){if(L.current){var e=L.current.getAudioTracks();e.length&&(g?(e.forEach((function(e){e.enabled=!0})),fc(1,"Resumed microphone."),E(!1)):(e.forEach((function(e){e.enabled=!1})),fc(1,"Paused microphone."),E(!0)))}}),[g]),re=(0,Ul.useCallback)(lc(oc().mark((function e(){var t;return oc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,l();case 4:if(null!=(t=e.sent)&&t.success){e.next=9;break}return console.error("Could not start realtime session.",t),m(!1),e.abrupt("return");case 9:return q.current=t.function_callbacks||[],w(t.session_id),e.next=13,ee(t.client_secret,t.model);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error in handlePlay.",e.t0),m(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),[l,ee]),ae=(0,Ul.useCallback)((function(){return te()}),[te]),oe=(0,Ul.useCallback)((function(){return D((function(e){return!e}))}),[]),ie=(0,Ul.useCallback)((function(){return z((function(e){return!e}))}),[]),le=(0,Ul.useCallback)((function(){return B((function(e){return!e}))}),[]),ce=(0,Ul.useMemo)((function(){return g?"mwai-pause mwai-active":"mwai-pause"}),[g]),ue=(0,Ul.useMemo)((function(){var e=ac(N).reverse().find((function(e){return"assistant"===e.role}));return e?e.content.length>256?"".concat(e.content.slice(0,256),"..."):e.content:"..."}),[N]),se=(0,Ul.useMemo)((function(){return F?"mwai-option mwai-option-users mwai-active":"mwai-option mwai-option-users"}),[F]),fe=(0,Ul.useMemo)((function(){return G?"mwai-option mwai-option-captions mwai-active":"mwai-option mwai-option-captions"}),[G]),de=(0,Ul.useMemo)((function(){return Y?"mwai-option mwai-option-statistics mwai-active":"mwai-option mwai-option-statistics"}),[Y]);return React.createElement("div",null,React.createElement("audio",{id:"mwai-audio",autoPlay:!0}),F&&React.createElement("div",{style:{display:"flex",justifyContent:"center"}},React.createElement(ec,{assistantStream:V,userUI:X,assistantUI:$,userStream:L.current})),React.createElement("div",{className:"mwai-controls"},!h&&!d&&React.createElement("button",{onClick:re,className:"mwai-play",disabled:r||a,"aria-label":"Play"},React.createElement(Gl.A,{size:16})),d&&React.createElement("button",{className:"mwai-play",disabled:!0},React.createElement(Bl.A,{size:16,style:{animation:"spin 0.8s linear infinite"}})),h&&!d&&React.createElement(React.Fragment,null,React.createElement("button",{onClick:ae,className:"mwai-stop",disabled:r||a,"aria-label":"Stop"},React.createElement(Hl.A,{size:16})),React.createElement("button",{onClick:ne,className:ce,disabled:r||a,"aria-label":"Pause"},React.createElement(Yl.A,{size:16})))),G&&ue&&ue.length>0&&React.createElement("div",{className:"mwai-last-transcript"},ue),Y&&React.createElement("div",{className:"mwai-statistics"},React.createElement("div",null,React.createElement("label",null,"Text In"),React.createElement("span",null,x.text_input_tokens)),React.createElement("div",null,React.createElement("label",null,"Text Out"),React.createElement("span",null,x.text_output_tokens)),React.createElement("div",null,React.createElement("label",null,"Text Cached"),React.createElement("span",null,x.text_cached_tokens)),React.createElement("div",null,React.createElement("label",null,"Audio In"),React.createElement("span",null,x.audio_input_tokens)),React.createElement("div",null,React.createElement("label",null,"Audio Out"),React.createElement("span",null,x.audio_output_tokens)),React.createElement("div",null,React.createElement("label",null,"Audio Cached"),React.createElement("span",null,x.audio_cached_tokens))),P&&React.createElement("div",{className:"mwai-options"},React.createElement(zl.A,{size:13,title:"Show Users",className:se,onClick:oe}),React.createElement(Wl.A,{size:18,title:"Show Captions",className:fe,onClick:le}),React.createElement(Vl.A,{size:14,title:"Show Statistics",className:de,onClick:ie})))};function hc(e){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(e)}function vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(n),!0).forEach((function(t){gc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gc(e,t,n){var r;return r=function(e,t){if("object"!=hc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=hc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==hc(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bc=wp.element,wc=bc.useState,Rc=bc.useMemo,Oc=bc.useLayoutEffect,_c=bc.useCallback,xc=bc.useEffect,Sc=bc.useRef,Tc={overrides:{a:{props:{target:"_blank"}}}};const Nc=function(e){var t,n,r=(0,Pi.gR)(),a=e.style,o=(t=wc(!0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ec(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1],c=(0,Mi.o)(),u=c.state,s=c.actions,f=u.theme,d=u.botId,m=u.customId,p=u.messages,h=u.textCompliance,v=u.isWindow,y=u.fullscreen,g=u.iconPosition,E=u.iconBubble,b=u.shortcuts,w=u.blocks,R=u.imageUpload,O=u.fileSearch,_=u.fileUpload,x=u.draggingType,S=u.isBlocked,T=u.virtualKeyboardFix,N=u.isRealtime,C=u.windowed,I=u.cssVariables,k=u.error,A=u.conversationRef,L=u.open,M=u.busy,P=u.uploadIconPosition,j=u.chatbotInputRef,F=s.resetError,D=s.onSubmit,U=s.setIsBlocked,G=s.setDraggingType,B=s.onUploadFile,H=Rc((function(){return"css"===(null==f?void 0:f.type)?null==f?void 0:f.style:null}),[f]),Y=R||O||_,z=Y||h,W=Sc(null),V=(0,Pi.kW)(),K=V.viewportHeight,q=V.isIOS,X=V.isAndroid;xc((function(){if(T&&(q||X)&&v){var e=document.querySelector(".mwai-window");e&&(L?(e.style.height="".concat(K,"px"),q&&function(){if("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName){window.scrollTo({top:0});var e=setInterval((function(){window.scrollTo({top:0})}),100);setTimeout((function(){clearInterval(e)}),1e3)}}()):e.style.height="")}}),[y,X,q,v,C,L,K,T]);var $=r("mwai-chatbot",gc(gc(gc(gc(gc(gc(gc(gc({},"mwai-".concat(null==f?void 0:f.themeId,"-theme"),!0),"mwai-window",v),"mwai-bubble",E),"mwai-open",L),"mwai-fullscreen",!C||!v&&y),"mwai-bottom-left","bottom-left"===g),"mwai-top-right","top-right"===g),"mwai-top-left","top-left"===g));Oc((function(){i&&A.current&&(A.current.scrollTop=A.current.scrollHeight)}),[p,i,A,M]);var Q=Sc(new Set);xc((function(){w&&w.length>0&&w.forEach((function(e){var t=e.type,n=e.data;"content"===t&&n.script&&function(e){var t=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(e);if(!Q.current.has(t)){var n=document.createElement("script");n.type="text/javascript",n.textContent=e,document.body.appendChild(n),Q.current.add(t)}}(n.script)}))}),[w]);var J=Rc((function(){return null==p?void 0:p.map((function(e){return React.createElement(dl,{key:e.id,message:e})}))}),[p]),Z=Rc((function(){return b&&0!==b.length?React.createElement("div",{className:"mwai-shortcuts"},b.map((function(e,t){var n=e.type,a=e.data,o=null!=a?a:{},i=o.label,l=o.variant,c=o.icon,u=o.className,s=r("mwai-shortcut",{"mwai-success":"success"===l,"mwai-danger":"danger"===l,"mwai-warning":"warning"===l,"mwai-info":"info"===l});u&&(s+=" ".concat(u));var f=c&&c.startsWith("http"),m=c&&!f&&c.length>=1&&c.length<=2;switch(n){case"message":var p=a.message;return React.createElement("button",{className:s,key:t,onClick:function(){D(p)}},(f||m)&&React.createElement(React.Fragment,null,React.createElement("div",{className:"mwai-icon"},f&&React.createElement("img",{src:c,alt:i||"AI Shortcut"}),m&&React.createElement("span",{role:"img","aria-label":"AI Shortcut"},c)),React.createElement("div",{style:{flex:"auto"}})),React.createElement("div",{className:"mwai-label"},i||"N/A"));case"callback":var h=a.onClick;return React.createElement("button",{className:s,key:t,onClick:function(){if("function"==typeof h)h();else if("string"==typeof h){var e=h.replace(/{CHATBOT_ID}/g,d),t=new Function("return (".concat(e,");"))();a.onClick=t,t()}else console.warn("No valid callback function provided in data.onClick.")}},(f||m)&&React.createElement(React.Fragment,null,React.createElement("div",{className:"mwai-icon"},f&&React.createElement("img",{src:c,alt:i||"AI Shortcut"}),m&&React.createElement("span",{role:"img","aria-label":"AI Shortcut"},c)),React.createElement("div",{style:{flex:"auto"}})),React.createElement("div",{className:"mwai-label"},i||"N/A"));default:return console.warn("This shortcut type is not supported: ".concat(n,".")),null}}))):null}),[r,D,b]),ee=Rc((function(){return w&&0!==w.length?React.createElement("div",{className:"mwai-blocks"},w.map((function(e,t){var n=e.type,a=e.data;if("content"!==n)return console.warn("Block type ".concat(n," is not supported.")),null;var o=a.html,i=a.variant,l=r("mwai-block",{"mwai-success":"success"===i,"mwai-danger":"danger"===i,"mwai-warning":"warning"===i,"mwai-info":"info"===i});return React.createElement("div",{className:l,key:t,dangerouslySetInnerHTML:{__html:o}})}))):null}),[r,w]),te=_c((function(e,t){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.items[0];t?(W.current&&(clearTimeout(W.current),W.current=null),R&&function(e){return e.type.startsWith("image/")}(n)?(G("image"),U(!1)):(O||_)&&function(e){return["text/x-c","text/x-csharp","text/x-c++","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","text/javascript","application/x-sh","application/typescript"].includes(e.type)}(n)?(G("document"),U(!1)):(G(!1),U(!0))):W.current||(W.current=setTimeout((function(){G(!1),U(!1),W.current=null}),100))}),[R,O,_]),ne=_c((function(e){if(e.preventDefault(),te(e,!1),!M){var t=e.dataTransfer.files[0];t&&("image"===x&&R||"document"===x&&(O||_)?B(t):(U(!0),setTimeout((function(){return U(!1)}),2e3)))}}),[M,x,R,_,O,B]),re=r("mwai-input",{"mwai-dragging":x,"mwai-blocked":S});return React.createElement(Pi.bE,{dir:"auto",id:"mwai-chatbot-".concat(m||d),className:$,style:yc(yc({},I),a),if:!0,disableTransition:!v},H&&React.createElement("style",null,H),React.createElement(Dl,null),React.createElement(Ml,null),React.createElement("div",{className:"mwai-content"},!N&&React.createElement(React.Fragment,null,React.createElement("div",{ref:A,className:"mwai-conversation",onScroll:function(){if(A.current){var e=A.current,t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;l(n-t<=r+1)}}},J,Z),k&&React.createElement("div",{className:"mwai-error",onClick:function(){return F()}},React.createElement(Ra.Ay,{options:Tc},k)),ee,React.createElement("div",{className:re,onClick:function(){var e;return null===(e=j.current)||void 0===e?void 0:e.focusInput()},onDrop:ne,onDragEnter:function(e){return te(e,!0)},onDragLeave:function(e){return te(e,!1)},onDragOver:function(e){return te(e,!0)}},React.createElement(Sl,null),React.createElement(Al,null))),N&&React.createElement("div",{className:"mwai-realtime"},React.createElement(pc,null)),z&&React.createElement("div",{className:"mwai-footer"},Y&&React.createElement("div",{className:"mwai-tools"},"mwai-tools"===P&&React.createElement(El,null)),h&&React.createElement("div",{className:"mwai-compliance",dangerouslySetInnerHTML:{__html:h}}))))},Cc=function(e){return React.createElement(Mi.G,e,React.createElement(Nc,e))};function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function kc(){kc=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ic(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ic(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ac(e){return function(e){if(Array.isArray(e))return Gc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Uc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){Pc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pc(e,t,n){var r;return r=function(e,t){if("object"!=Ic(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ic(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jc(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Fc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){jc(o,r,a,i,l,"next",e)}function l(e){jc(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Uc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(e,t){if(e){if("string"==typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gc(e,t):void 0}}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bc=wp.element,Hc=Bc.useMemo,Yc=Bc.useState,zc=Bc.useEffect,Wc=function(e){e?localStorage.setItem("mwai-admin-chatbotKey",e):localStorage.removeItem("mwai-admin-chatbotKey")};const Vc=function(e){var t,n,r=(0,u.jE)(),a=e.options,o=e.updateOption,i=e.busy,l=Dc(Yc("chatbots"),2),c=l[0],d=l[1],m=Dc(Yc(!1),2),p=m[0],h=m[1],v=Dc(Yc((function(){return localStorage.getItem("mwai-admin-chatbotKey")||"chatbot-key-0"})),2),y=v[0],g=v[1],R=null==a?void 0:a.chatbot_defaults,O=(0,s.z)().colors,_=(0,f.I)({queryKey:["chatbots"],queryFn:vn,initialData:F}).data,x=(0,f.I)({queryKey:["themes"],queryFn:mn,initialData:P}).data,T=null!==(t=null==a?void 0:a.botId)&&void 0!==t?t:"none",I=null!==(n=null==a?void 0:a.chatbot_select)&&void 0!==n?n:"tabs",k=i||p,L=Dc(Yc({}),2),D=L[0],U=L[1];zc((function(){if(_){var e={};if(_.forEach((function(t,n){e["chatbot-key-".concat(n)]=t.botId})),U(e),!y||!(y in e)){var t=Object.keys(e)[0];g(t),Wc(t)}}}),[_,y]);var G=Hc((function(){if(_)return _.find((function(e){return"default"===e.botId}))}),[_]),B=Hc((function(){if(_&&y&&D[y]){var e=D[y];return _.find((function(t){return t.botId===e}))}return null}),[_,y,D]),H=Hc((function(){return x&&B?x.find((function(e){return e.themeId===(null==B?void 0:B.themeId)})):x.find((function(e){return"chatgpt"===e.themeId}))}),[B,x]),Y=function(){var e=Fc(kc().mark((function e(t,n){var a,o,i;return kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("botId"!==n||"default"!==t){e.next=3;break}return alert("You cannot name a chatbot 'default'. Please choose another name."),e.abrupt("return");case 3:if("botId"!==n||""!==t){e.next=6;break}return alert("Your chatbot must have an ID."),e.abrupt("return");case 6:if("botId"!==n||!_.find((function(e){return e.botId===t}))){e.next=9;break}return alert("This chatbot ID is already in use. Please choose another ID."),e.abrupt("return");case 9:if(h(!0),a=Mc(Mc({},B),{},Pc({},n,t)),o=Ac(_),!B){e.next=21;break}if(-1===(i=o.findIndex((function(e){return e.botId===B.botId})))){e.next=21;break}return o[i]=a,e.next=18,yn(o);case 18:o=e.sent,r.setQueryData(["chatbots"],o),"botId"===n&&U((function(e){return Mc(Mc({},e),{},Pc({},y,t))}));case 21:h(!1);case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Fc(kc().mark((function e(){var t,n,a,o,i,l=arguments;return kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:R,h(!0),n="chatbot-"+Ot(),delete(a=Mc(Mc({},t),{},{botId:n,name:"New Chatbot"})).functions,e.next=8,yn([].concat(Ac(_),[a]));case 8:o=e.sent,r.setQueryData(["chatbots"],o),i="chatbot-key-".concat(Object.keys(D).length),U((function(e){return Mc(Mc({},e),{},Pc({},i,n))})),g(i),Wc(i),h(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Fc(kc().mark((function e(){var t,n,a,o,i,l;return kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=D[y],n=Object.keys(D),a=n.indexOf(y),o=a>0?n[a-1]:n.length>1?n[a+1]:null,g(o),Wc(o),i=_.filter((function(e){return e.botId!==t})),e.next=10,yn(i);case 10:i=e.sent,r.setQueryData(["chatbots"],i),delete(l=Mc({},D))[y],U(l),h(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Fc(kc().mark((function e(){var t,n;return kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=Ac(_),n=t.findIndex((function(e){return e.botId===B.botId})),t[n]=Mc(Mc({},R),{},{botId:B.botId,name:B.name}),e.next=6,yn(t);case 6:t=e.sent,r.setQueryData(["chatbots"],t),h(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Fc(kc().mark((function e(){return kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(B);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0,fullWidth:!0,style:{margin:10}},React.createElement(Xt.V,null,React.createElement(Mo,{currentChatbot:B}),React.createElement("label",{style:{marginLeft:5}},He.COMMON.CHATBOTS),React.createElement($t.S,{style:{marginLeft:5},disabled:k,onLabel:"",offLabel:"",width:42,offValue:"chatbots",onValue:"themes",offBackgroundColor:O.blue,onBackgroundColor:O.purple,checked:"themes"===c,onChange:d}),React.createElement("label",{style:{marginLeft:5}},He.COMMON.THEMES),React.createElement("div",{style:{flex:"auto"}}),React.createElement("label",null,He.COMMON.SITE_WIDE_CHATBOT,":"),React.createElement(we.u,{scrolldown:!0,name:"botId",disabled:k,style:{minWidth:160},value:T,onChange:o},React.createElement(we.j,{value:"none",label:"None"}),null==_?void 0:_.map((function(e){return React.createElement(we.j,{key:e.botId,value:e.botId,label:e.name})}))))),React.createElement(E.Y,{minimal:!0,style:{margin:10,maxWidth:"50%"}},"chatbots"===c&&React.createElement(React.Fragment,null,"dropdown"===I&&React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:10}},React.createElement(we.u,{scrolldown:!0,textFiltering:!0,name:"botId",disabled:k,style:{flex:"auto",marginRight:10},value:y,onChange:g},null==_?void 0:_.map((function(e,t){return React.createElement(we.j,{key:e.botId,value:"chatbot-key-".concat(t),label:e.name})}))),React.createElement(w.M,{rounded:!0,className:"secondary",icon:"plus",disabled:k,onClick:function(){return z()}})),B&&React.createElement(xe.L,{style:{borderRadius:10}},React.createElement($o,{style:{margin:"-10px -10px"},options:a,themes:x,defaultChatbot:G,deleteCurrentChatbot:W,resetCurrentChatbot:V,duplicateCurrentChatbot:K,shortcodeParams:B,updateShortcodeParams:Y}))),"tabs"===I&&React.createElement(React.Fragment,null,React.createElement(b._,{inversed:!0,onChange:function(e,t){g(t.key),Wc(t.key)},currentTab:y,action:React.createElement(w.M,{rounded:!0,className:"secondary",icon:"plus",disabled:k,onClick:function(){return z()}})},Object.entries(D).map((function(e){var t=Dc(e,2),n=t[0],r=t[1],o=_.find((function(e){return e.botId===r}));return React.createElement(b.V,{key:n,title:o.name,busy:p},React.createElement($o,{options:a,themes:x,defaultChatbot:G,deleteCurrentChatbot:W,resetCurrentChatbot:V,duplicateCurrentChatbot:K,shortcodeParams:o,updateShortcodeParams:Y}))}))))),"themes"===c&&React.createElement(Li,{themes:x,options:a,updateOption:o,currentTheme:H,onSwitchTheme:function(e){Y(e,"themeId")}})),React.createElement(E.Y,{minimal:!0,style:{maxWidth:"50%"}},React.createElement("small",{style:{marginLeft:15,marginBottom:-20}},"Chatbot: ",React.createElement("b",null,null==B?void 0:B.name)," - Theme: ",React.createElement("b",null,null==H?void 0:H.name)),React.createElement("div",{style:{position:"relative",margin:"5px 10px 10px 10px",minHeight:480,borderRadius:5,padding:10,border:"2px dashed rgb(0 0 0 / 20%)",background:"rgb(0 0 0 / 5%)"}},!!B&&React.createElement(Cc,{system:{botId:B.botId,userData:C,sessionId:M,restNonce:A,pluginUrl:N,restUrl:S,stream:j,debugMode:null==a?void 0:a.debug_mode,typewriter:null==a?void 0:a.chatbot_typewriter,speech_recognition:null==a?void 0:a.shortcode_chat_speech_recognition,speech_synthesis:null==a?void 0:a.shortcode_chat_speech_synthesis},params:B,theme:H,style:B.window||B.fullscreen?{position:"absolute"}:{}})),React.createElement("div",{style:{marginLeft:10,fontSize:11,lineHeight:"140%",opacity:.5}},"This is the actual chatbot, but there might be some differences when run on your front-end, depending on your theme and the other plugins you use."))))};var Kc=n(421);function qc(e){return qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(e)}function Xc(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=qc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==qc(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Zc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){if(e){if("string"==typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,t):void 0}}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tu(){tu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==qc(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(qc(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function nu(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ru(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){nu(o,r,a,i,l,"next",e)}function l(e){nu(o,r,a,i,l,"throw",e)}i(void 0)}))}}var au=wp.element,ou=au.useMemo,iu=au.useState,lu=au.useEffect,cu=[{accessor:"id",visible:!1},{accessor:"time",title:"Time",width:"80px",sortable:!0},{accessor:"user",title:"User",width:"85px",filters:{type:"text",description:"Type a User ID, or an IP."}},{accessor:"scope",title:"Scope",width:"90px",filters:{type:"checkbox",options:[{value:"chatbot",label:"Chatbot"},{value:"form",label:"Form"},{value:"playground",label:"Playground"}]}},{accessor:"model",title:"Model"},{accessor:"units",title:"Units",width:"65px",align:"right",sortable:!0},{accessor:"price",title:"Price",width:"85px",align:"right",sortable:!0}],uu=function(){var e=ru(tu().mark((function e(t){var n;return tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.offset=(t.page-1)*t.limit,e.next=3,(0,O.IU)("".concat(T,"/system/logs/list"),{nonce:A,method:"POST",json:t});case 3:return n=e.sent,e.abrupt("return",n?{total:n.total,logs:n.logs}:{total:0,logs:[]});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),su=function(){var e=ru(tu().mark((function e(){var t,n,r=arguments;return tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,(0,O.IU)("".concat(T,"/system/logs/delete"),{nonce:A,method:"POST",json:{logIds:t}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const fu=function(e){var t=e.selectedLogIds,n=e.setSelectedLogIds,r=e.onDataFetched,a=(0,u.jE)(),o=Jc(iu(!1),2),i=o[0],l=o[1],c=ft(L,null,!0).getModelName,s=Jc(iu((function(){return cu.filter((function(e){return e.filters})).map((function(e){return{accessor:e.accessor,value:[]}}))})),2),d=s[0],m=s[1],p=Jc(iu({filters:d,sort:{accessor:"time",by:"desc"},page:1,limit:20}),2),h=p[0],v=p[1],y=(0,f.I)({queryKey:["logs",h],queryFn:function(){return uu(h)}}),g=y.isFetching,E=y.data,b=y.error;lu((function(){v(Qc(Qc({},h),{},{filters:d}))}),[d]),lu((function(){null!=E&&E.logs&&r&&r(E.logs)}),[null==E?void 0:E.logs,r]);var O=ou((function(){return(null==E?void 0:E.total)||0}),[E]),_=ou((function(){return null!=E&&E.logs?E.logs.sort((function(e,t){return t.created_at-e.created_at})).map((function(e){var t,n=wt(e.time),r=Rt(e.userId,e.ip),a=Math.round(1e3*e.price)/1e3,o=React.createElement(React.Fragment,null,"");e.price>=.001&&(o=React.createElement("b",null,"$",a.toFixed(3))),e.price>=.01&&(o=React.createElement("b",null,"$",a.toFixed(2))),e.price>=.1&&(o=React.createElement("b",{style:{color:"red"}},"$",a.toFixed(2)));var i=(null==L||null===(t=L.ai_envs)||void 0===t||null===(t=t.find((function(t){return t.id===e.envId})))||void 0===t?void 0:t.name)||e.envId,l=React.createElement("div",null,React.createElement("span",{title:e.model},c(e.model),"assistant"===e.mode&&React.createElement("i",null," (Assistant)")),React.createElement("br",null),React.createElement("small",null,i));return{id:e.id,scope:React.createElement("div",null,e.scope,React.createElement("br",null),React.createElement("small",null,e.session)),user:r,model:l,units:React.createElement("div",{style:{textAlign:"right"}},e.units,React.createElement("br",null),React.createElement("small",null,e.type)),price:React.createElement(React.Fragment,null,o,React.createElement("br",null),React.createElement("small",null,"$",e.price)),time:React.createElement("div",{style:{textAlign:"right"}},n)}})):[]}),[E]),x=function(){var e=ru(tu().mark((function e(){return tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),t.length){e.next=9;break}if(window.confirm(He.ALERTS.ARE_YOU_SURE)){e.next=5;break}return l(!1),e.abrupt("return");case 5:return e.next=7,su();case 7:e.next=12;break;case 9:return e.next=11,su(t);case 11:n([]);case 12:return e.next=14,a.invalidateQueries({queryKey:["logs"]});case 14:return e.next=16,a.refetchQueries({queryKey:["logs"]});case 16:l(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=ou((function(){return null!=b&&b.message?React.createElement(Ne.X,{variant:"danger",style:{margin:"5px 5px"}},React.createElement("b",null,b.message),React.createElement("br",null),React.createElement("small",null,"Check your Console Logs and PHP Error Logs for more information.")):null}),[b]);return React.createElement(React.Fragment,null,React.createElement(R.z,{className:"primary",title:He.COMMON.QUERIES,action:React.createElement("div",null,React.createElement(w.M,{className:"secondary",style:{marginLeft:5},disabled:g,onClick:ru(tu().mark((function e(){return tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.invalidateQueries({queryKey:["logs"]});case 2:a.refetchQueries({queryKey:["logs"]});case 3:case"end":return e.stop()}}),e)})))},He.COMMON.REFRESH),t.length>0&&React.createElement(w.M,{className:"danger",onClick:x},He.COMMON.DELETE))},React.createElement(qt.o,{busy:g||i,onSelectRow:function(e){1===t.length&&t[0]===e?n([]):n([e])},onSelect:function(e){n([].concat(Xc(t),Xc(e)))},onUnselect:function(e){n(t.filter((function(t){return!e.includes(t)})))},selectedItems:t,sort:h.sort,onSortChange:function(e,t){v(Qc(Qc({},h),{},{sort:{accessor:e,by:t}}))},emptyMessage:S,filters:d,onFilterChange:function(e,t){var n=[].concat(Xc(d.filter((function(t){return t.accessor!==e}))),[{accessor:e,value:t}]);m(n)},data:_,columns:cu}),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10,marginBottom:-5}},React.createElement(w.M,{className:"danger",disabled:t.length>0,onClick:x},He.COMMON.DELETE_ALL),React.createElement("div",{style:{flex:"auto"}}),React.createElement(Jt.Q,{currentPage:h.page,limit:h.limit,onCurrentPageChanged:function(e){return v(Qc(Qc({},h),{},{page:e}))},total:O,onClick:function(e){return v(Qc(Qc({},h),{},{page:e}))}}))),React.createElement(R.z,{className:"primary",title:"Information"},React.createElement("p",null,React.createElement("b",null,"Prices and tokens counts aren't accurate in many cases.")),React.createElement("p",null,"For more information, check this:"," ",React.createElement("a",{href:"https://www.notion.so/meowarts/Cost-Usage-Calculation-d5ce4917d77f4939b232b20d0082368a?pvs=4",target:"_blank",rel:"noreferrer"},"Cost & Usage Calculation"),". You are also always welcome to discuss about it in the"," ",React.createElement("a",{href:"https://discord.gg/bHDGh38",target:"_blank",rel:"noreferrer"},"Discord Server"),".")))};function du(e){return du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(e)}function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(n),!0).forEach((function(t){hu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hu(e,t,n){var r;return r=function(e,t){if("object"!=du(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==du(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gu(){gu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==du(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(du(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Eu(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function bu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Eu(o,r,a,i,l,"next",e)}function l(e){Eu(o,r,a,i,l,"throw",e)}i(void 0)}))}}var wu=wp.element,Ru=wu.useMemo,Ou=wu.useState,_u=function(){var e=bu(gu().mark((function e(t){var n;return gu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,O.IU)("".concat(T,"/system/logs/meta"),{nonce:A,method:"POST",json:{logId:t,metaKeys:["query","reply","fields"]}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const xu=function(e){var t,n=e.options,r=e.updateOption,a=e.busy,o=vu(Ou([]),2),i=o[0],l=o[1],c=vu(Ou([]),2),u=c[0],s=c[1],d=vu(Ou("users"),2),m=d[0],p=d[1],h=null==n?void 0:n.limits,y=null==n?void 0:n.default_limits,g=Ru((function(){return 1===u.length?u[0]:null}),[u]),_=Ru((function(){var e=i.find((function(e){return e.id===g}));if(e&&e.stats&&"string"==typeof e.stats)try{e.stats=JSON.parse(e.stats)}catch(t){e.stats={}}return e}),[i,g]),x=(0,f.I)({queryKey:["logsMeta",g],queryFn:function(){return _u(g)},enabled:!!g,staleTime:864e5}),S=x.isFetching,T=x.data,N=function(){var e=bu(gu().mark((function e(t,n){var a;return gu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pu(pu({},h),{},hu({},n,t)),e.next=3,r(a,"limits");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=Ru((function(){return null!=h&&h[m]?h[m]:{credits:1,creditType:"price",timeFrame:"month",isAbsolute:!1,overLimitMessage:"You have reached the limit.",ignoredUsers:""}}),[h,m]),I=function(){var e=bu(gu().mark((function e(t,n){var a,o;return gu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"credits"===n&&(t=Math.max(0,t)),a=pu(pu({},C),{},hu({},n,t)),o=pu(pu({},h),{},hu({},m,a)),e.next=5,r(o,"limits");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=bu(gu().mark((function e(){return gu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(He.ALERTS.ARE_YOU_SURE)){e.next=3;break}return e.next=3,r(y,"limits");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=Ru((function(){return Array.isArray(T)?null:T}),[T]);return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0,style:{flex:2.5}},React.createElement(fu,{selectedLogIds:u,setSelectedLogIds:s,onDataFetched:l})),React.createElement(E.Y,{minimal:!0},g&&React.createElement(React.Fragment,null,React.createElement(_e.g,{large:!0}),React.createElement(b._,{inversed:!0,style:{marginRight:10,marginLeft:10}},React.createElement(b.V,{title:"Query"},React.createElement("div",{style:{height:380,overflow:"auto",maxHeight:380}},S&&React.createElement("i",{style:{color:"gray"}},"Loading..."),!S&&!A&&React.createElement("i",{style:{color:"gray"}},He.COMMON.DATA_NOT_AVAILABLE),!S&&A&&React.createElement(Kc.p2,{value:A.query,rootName:"query",indentWidth:2,displayDataTypes:!1,displayObjectSize:!1,displayArrayKey:!1,enableClipboard:!1,style:{fontSize:12}}))),React.createElement(b.V,{title:"Reply"},React.createElement("div",{style:{height:380,overflow:"auto",maxHeight:380}},S&&React.createElement("i",{style:{color:"gray"}},"Loading..."),!S&&!A&&React.createElement("i",{style:{color:"gray"}},He.COMMON.DATA_NOT_AVAILABLE),!S&&A&&React.createElement(Kc.p2,{value:A.reply,rootName:"reply",indentWidth:2,displayDataTypes:!1,displayObjectSize:!1,displayArrayKey:!1,enableClipboard:!1,style:{fontSize:12}}))),A&&A.fields&&React.createElement(b.V,{title:"Fields"},React.createElement("div",{style:{height:380,overflow:"auto",maxHeight:380}},S&&React.createElement("i",{style:{color:"gray"}},"Loading..."),!S&&!A&&React.createElement("i",{style:{color:"gray"}},He.COMMON.DATA_NOT_AVAILABLE),!S&&A&&React.createElement(Kc.p2,{value:A.fields,rootName:"fields",indentWidth:2,displayDataTypes:!1,displayObjectSize:!1,displayArrayKey:!1,enableClipboard:!1,style:{fontSize:12}}))),(null==_?void 0:_.stats)&&React.createElement(b.V,{title:"Stats"},React.createElement("div",{style:{height:380,overflow:"auto",maxHeight:380}},React.createElement(Kc.p2,{value:_.stats,rootName:"stats",indentWidth:2,displayDataTypes:!1,displayObjectSize:!1,displayArrayKey:!1,enableClipboard:!1,style:{fontSize:12}}))))),React.createElement(go,null,React.createElement(R.z,{className:"primary",busy:a,title:"Limits",style:{flex:1}},React.createElement(v.R,{name:"enabled",label:He.STATISTICS.ENABLE_LIMITS,checked:null==h?void 0:h.enabled,value:"1",onChange:N}),(null==h?void 0:h.enabled)&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Kt.o,{value:m,busy:a,onChange:function(e){return p(e)}},React.createElement(Kt.K,{title:He.COMMON.USERS,value:"users",disabled:!(null!=h&&h.enabled)}),React.createElement(Kt.K,{title:He.COMMON.GUESTS,value:"guests"}),React.createElement(Kt.K,{title:He.COMMON.SYSTEM,value:"system"})),"userId"===(null==h?void 0:h.target)&&React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,"Message for Guests:"),React.createElement(Re.A,{id:"guestMessage",name:"guestMessage",disabled:!(null!=h&&h.enabled),value:null==h?void 0:h.guestMessage,onEnter:I,onBlur:I}))),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.CREDITS,":"),React.createElement(Re.A,{id:"credits",name:"credits",type:"number",min:"0",max:"1000000",disabled:!(null!=h&&h.enabled),value:C.credits,onEnter:I,onBlur:I})),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.TYPE,":"),React.createElement(we.u,{scrolldown:!0,id:"creditType",name:"creditType",disabled:!(null!=h&&h.enabled),value:C.creditType,onChange:I},React.createElement(we.j,{key:"queries",id:"queries",value:"queries",label:"Queries"}),React.createElement(we.j,{key:"units",id:"units",value:"units",label:"Tokens"}),React.createElement(we.j,{key:"price",id:"price",value:"price",label:"Dollars"})))),0!==C.credits&&React.createElement("p",null,"If you want to apply variable amount of credits,"," ",React.createElement("a",{href:"https://meowapps.com/ai-engine/faq/#limits",target:"_blank",rel:"noreferrer"},"click here"),"."),0!==C.credits&&"price"===C.creditType&&React.createElement("p",null,"The dollars represent the budget you spent through OpenAI."),0===C.credits&&React.createElement("p",null,"Since there are no credits, the Message for No Credits Message will be displayed."),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.TIMEFRAME,":"),React.createElement(we.u,{scrolldown:!0,id:"timeFrame",name:"timeFrame",disabled:!(null!=h&&h.enabled),value:C.timeFrame,onChange:I},React.createElement(we.j,{key:"second",id:"second",value:"second",label:"Second"}),React.createElement(we.j,{key:"minute",id:"minute",value:"minute",label:"Minute"}),React.createElement(we.j,{key:"hour",id:"hour",value:"hour",label:"Hour"}),React.createElement(we.j,{key:"day",id:"day",value:"day",label:"Day"}),React.createElement(we.j,{key:"week",id:"week",value:"week",label:"Week"}),React.createElement(we.j,{key:"month",id:"month",value:"month",label:"Month"}),React.createElement(we.j,{key:"year",id:"year",value:"year",label:"Year"}))),React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.COMMON.ABSOLUTE,":"),React.createElement(v.R,{name:"isAbsolute",label:"Yes",disabled:!(null!=h&&h.enabled),checked:C.isAbsolute,value:"1",onChange:I}))),C.isAbsolute&&React.createElement("p",null,(0,O.FE)(He.STATISTICS.ABSOLUTE_HELP)),React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.STATISTICS.NO_CREDITS_MESSAGE,":"),React.createElement(Re.A,{id:"overLimitMessage",name:"overLimitMessage",disabled:!(null!=h&&h.enabled),value:C.overLimitMessage,onEnter:I,onBlur:I}))),"users"===m&&React.createElement("div",{className:"mwai-builder-row"},React.createElement("div",{className:"mwai-builder-col"},React.createElement("label",null,He.STATISTICS.FULL_ACCESS_USERS,":"),React.createElement(we.u,{scrolldown:!0,id:"ignoredUsers",name:"ignoredUsers",disabled:!(null!=h&&h.enabled),value:null==h||null===(t=h.users)||void 0===t?void 0:t.ignoredUsers,description:"",onChange:I},React.createElement(we.j,{key:"none",id:"none",value:"",label:He.COMMON.NONE}),React.createElement(we.j,{key:"editor",id:"editor",value:"administrator,editor",label:He.COMMON.EDITORS_ADMINS}),React.createElement(we.j,{key:"admin",id:"admin",value:"administrator",label:He.COMMON.ADMINS_ONLY})))),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,className:"danger",onClick:k},He.COMMON.RESET_LIMITS)))))))};var Su=n(7392);function Tu(e){return Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(e)}function Nu(){Nu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Tu(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Tu(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Cu(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Iu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Cu(o,r,a,i,l,"next",e)}function l(e){Cu(o,r,a,i,l,"throw",e)}i(void 0)}))}}const ku=function(e){var t=e.options,n=e.updateOption,r=(e.setOptions,null==t?void 0:t.debug_mode),a=null==t?void 0:t.server_debug_mode,o=function(){var e=Iu(Nu().mark((function e(){var t,n,r,a,o;return Nu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=prompt("Enter the Post ID you want to retrieve the content from.")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,gt(null,null,t);case 5:n=e.sent,console.log("Data for Post ID ".concat(t),n),null!=n&&n.content&&(r=n.content.trim().replace(/<[^>]*>?/gm,""),a=r.split(" ")[0],o=r.split(" ").pop(),console.log("Content First Word: ".concat(a)),console.log("Content Last Word: ".concat(o)));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Iu(Nu().mark((function e(){return Nu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=React.createElement(p.d,{title:He.COMMON.CLIENT_DEBUG},React.createElement(v.R,{name:"debug_mode",label:He.COMMON.ENABLE,value:"1",checked:r,description:He.COMMON.CLIENT_DEBUG_HELP,onChange:n})),c=React.createElement(p.d,{title:He.COMMON.SERVER_DEBUG},React.createElement(v.R,{name:"server_debug_mode",label:He.COMMON.ENABLE,value:"1",checked:a,description:He.COMMON.SERVER_DEBUG_HELP,onChange:n}));return React.createElement(React.Fragment,null,React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{title:"Debugging",className:"primary"},React.createElement(w.M,{onClick:o},"Get Content"),React.createElement("p",null,"This button will display the content of the post, as seen by AI Engine, in your Developer Tools Console. That allows you to check what AI Engine uses when using Content Aware, Embeddings Sync, etc."),React.createElement(w.M,{onClick:i},"Run Tasks"),React.createElement("p",null,"This button will force the AI Engine to run the tasks. Normally, the AI Engine runs the tasks every 10 minutes. This button will force the AI Engine to run the tasks immediately."))),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{title:"Settings",className:"primary"},l,c),a&&React.createElement(Su.k,{refreshQuery:wn,clearQuery:Rn,i18n:He}))))};function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lu=wp.element.useMemo,Mu=function(e){var t=e.env,n=e.updateEnvironment,r=e.deleteEnvironment,a=e.ai_envs,o=e.options,i=ft(o,null==t?void 0:t.ai_embeddings_env).embeddingsModels,l=Lu((function(){return i.find((function(e){return e.model===t.ai_embeddings_model}))}),[i,t.ai_embeddings_model]),c=Lu((function(){return l&&!l.dimensions&&console.error("This embeddings model does not have dimensions:",l),(null==l?void 0:l.dimensions)||[]}),[l]);return React.createElement(React.Fragment,null,React.createElement(p.d,{title:He.COMMON.NAME},React.createElement(Re.A,{name:"name",value:t.name,onFinalChange:function(e){return n(t.id,{name:e})}})),React.createElement(p.d,{title:He.COMMON.TYPE},React.createElement(we.u,{scrolldown:!0,name:"type",value:t.type,description:"qdrant"===t.type?(0,O.FE)(He.HELP.QDRANT):null,onChange:function(e){return n(t.id,{type:e})}},React.createElement(we.j,{value:"pinecone",label:"Pinecone"}),React.createElement(we.j,{value:"qdrant",label:"Qdrant"}))),React.createElement(p.d,{title:He.COMMON.API_KEY},React.createElement(Re.A,{name:"apikey",value:t.apikey,description:(0,O.FE)("pinecone"===t.type?He.COMMON.PINECONE_APIKEY_HELP:He.COMMON.QDRANT_APIKEY_HELP),onFinalChange:function(e){return n(t.id,{apikey:e})}})),React.createElement(p.d,{title:He.COMMON.SERVER},React.createElement(Re.A,{name:"server",value:t.server,description:(0,O.FE)("qdrant"===t.type?He.COMMON.QDRANT_SERVER_HELP:He.COMMON.PINECONE_SERVER_HELP),onFinalChange:function(e){return n(t.id,{server:e})}})),"pinecone"===t.type&&React.createElement(React.Fragment,null,React.createElement(p.d,{title:He.COMMON.NAMESPACE},React.createElement(Re.A,{name:"namespace",value:t.namespace,description:(0,O.FE)(He.COMMON.PINECONE_NAMESPACE_HELP),onFinalChange:function(e){return n(t.id,{namespace:e})}}))),"qdrant"===t.type&&React.createElement(React.Fragment,null,React.createElement(p.d,{title:He.COMMON.QDRANT_COLLECTION},React.createElement(Re.A,{name:"collection",value:t.collection,description:(0,O.FE)(He.COMMON.QDRANT_COLLECTION_HELP),onFinalChange:function(e){return n(t.id,{collection:e})}}))),React.createElement(p.d,{title:He.COMMON.MIN_SCORE},React.createElement(Re.A,{name:"min_score",value:t.min_score||35,type:"number",min:"0",max:"100",step:"1",description:(0,O.FE)(He.HELP.MIN_SCORE),onFinalChange:function(e){return n(t.id,{min_score:e})}})),React.createElement(p.d,{title:He.COMMON.MAX_SELECT},React.createElement(Re.A,{name:"max_select",value:t.max_select||10,type:"number",min:"1",max:"100",step:"1",description:(0,O.FE)(He.HELP.MAX_SELECT),onFinalChange:function(e){return n(t.id,{max_select:e})}})),React.createElement(Se.a,{keepState:"embeddingsEnvs"},React.createElement(Se.Y,{title:He.COMMON.AI_ENVIRONMENT},React.createElement("div",{style:{marginTop:10}},React.createElement(p.d,{title:He.COMMON.OVERRIDE_DEFAULTS},React.createElement(v.R,{label:He.COMMON.ENABLE,value:"1",checked:null==t?void 0:t.ai_embeddings_override,onChange:function(e){return n(t.id,{ai_embeddings_override:e})}})),(null==t?void 0:t.ai_embeddings_override)&&React.createElement(React.Fragment,null,React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_env",value:null==t?void 0:t.ai_embeddings_env,onChange:function(e){return n(t.id,{ai_embeddings_env:e})}},a.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})))),React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_model",value:t.ai_embeddings_model,onChange:function(e){return n(t.id,{ai_embeddings_model:e})}},i.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),React.createElement(p.d,{title:He.COMMON.DIMENSIONS},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_dimensions",value:t.ai_embeddings_dimensions||null,onChange:function(e){return n(t.id,{ai_embeddings_dimensions:e})}},c.map((function(e,t){return React.createElement(we.j,{key:e,value:e,label:t===c.length-1?"".concat(e," (Default)"):e})})),React.createElement(we.j,{key:null,value:null,label:"Not Set"})))))),React.createElement(Se.Y,{title:He.COMMON.ACTIONS},React.createElement("div",{style:{display:"flex",marginTop:10}},React.createElement("div",{style:{flex:"auto"}}),React.createElement(w.M,{className:"danger",onClick:function(){return r(t.id)}},He.COMMON.DELETE)))))};const Pu=function(e){var t=e.environments,n=e.updateEnvironment,r=e.updateOption,a=e.options,o=e.busy,i=function(e){if(1!==t.length){var n=t.filter((function(t){return t.id!==e}));r(n,"embeddings_envs")}else alert("You can't delete the last environment.")};return React.createElement("div",{style:{padding:"0px 10px 20px 10px",marginTop:-5}},React.createElement(m.s,{h2:!0,style:{color:"white"}},"Environments for Embeddings"),React.createElement(b._,{inversed:!0,keepTabOnReload:!0,style:{marginTop:-5},action:React.createElement(w.M,{rounded:!0,className:"secondary",icon:"plus",onClick:function(){var e,n=[].concat(function(e){if(Array.isArray(e))return Au(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Au(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{name:"New Environment",type:"pinecone",apikey:"",server:"",indexes:[],namespaces:[]}]);r(n,"embeddings_envs")}})},t.map((function(e){return React.createElement(b.V,{key:e.id,title:e.name,busy:o},React.createElement(Mu,{env:e,updateEnvironment:n,deleteEnvironment:i,ai_envs:(null==a?void 0:a.ai_envs)||[],options:a}))}))))};function ju(e){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(e)}function Fu(){Fu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==ju(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ju(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Du(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Du(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=ju(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==ju(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Du(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gu(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Bu(e){return function(e){if(Array.isArray(e))return Yu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hu(e,t){if(e){if("string"==typeof e)return Yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yu(e,t):void 0}}function Yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zu=wp.element,Wu=zu.useCallback,Vu=zu.useMemo,Ku=zu.useState,qu=function(e){var t=e.updateEnvironment,n=e.environmentId,r=e.deployments,a=e.options,o=function(e,a,o){var i=JSON.parse((0,O.F1)(r));i[e][a]=o,t(n,{deployments:i})},i=Vu((function(){var e,t,n=null==a||null===(e=a.ai_engines)||void 0===e?void 0:e.find((function(e){return"openai"===e.type}));return null!==(t=null==n?void 0:n.models)&&void 0!==t?t:[]}),[a]);return React.createElement(p.d,{title:He.COMMON.OPENAI_AZURE_DEPLOYMENTS,style:{marginTop:10}},r.map((function(e,a){return React.createElement("div",{key:a,style:{display:"flex",marginBottom:10}},React.createElement(Re.A,{style:{flex:1},value:e.name,placeholder:He.COMMON.OPENAI_AZURE_DEPLOYMENT_NAME,onBlur:function(e){return o(a,"name",e)},onEnter:function(e){return o(a,"name",e)}}),React.createElement(we.u,{style:{flex:1,marginLeft:10},scrolldown:!0,id:"model",name:"model",value:e.model,onChange:function(e){return o(a,"model",e)}},i.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})}))),React.createElement(w.M,{rounded:!0,isSmall:!0,style:{marginLeft:10,height:30},icon:"trash",onClick:function(){return function(e){var a=Bu(r);a.splice(e,1),t(n,{deployments:a})}(a)}}))})),React.createElement(w.M,{fullWidth:!0,icon:"plus",onClick:function(){var e=[].concat(Bu(r),[{name:"",model:""}]);t(n,{deployments:e})}}))},Xu=function(e){var t=e.updateEnvironment,n=e.environmentId,r=e.customModels,a=function(e,a,o){var i=JSON.parse((0,O.F1)(r));i[e][a]=o,t(n,{customModels:i})};return React.createElement(p.d,{title:He.COMMON.HUGGINGFACE_MODELS,style:{marginTop:10}},r.map((function(e,o){var i,l;return React.createElement("div",{key:o,style:{display:"flex",flexDirection:"column",marginBottom:10}},React.createElement("div",{key:o,style:{display:"flex",marginBottom:2}},React.createElement(Re.A,{style:{flex:1},value:e.name,placeholder:He.COMMON.HUGGINGFACE_MODEL_NAME,onBlur:function(e){return a(o,"name",e)},onEnter:function(e){return a(o,"name",e)}}),React.createElement(Re.A,{style:{flex:2,marginLeft:5},value:e.apiUrl,placeholder:He.COMMON.HUGGINGFACE_MODEL_URL,onBlur:function(e){return a(o,"apiUrl",e)},onEnter:function(e){return a(o,"apiUrl",e)}}),React.createElement(w.M,{rounded:!0,isSmall:!0,style:{marginLeft:5,height:30},icon:"trash",onClick:function(){return function(e){var a=Bu(r);a.splice(e,1),t(n,{customModels:a})}(o)}})),React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},React.createElement("span",{style:{marginRight:5}},"Image Model"),React.createElement(v.R,{style:{marginTop:o?0:5,marginRight:10},disabled:!0,checked:null===(i=e.tags)||void 0===i?void 0:i.includes("image"),onChange:function(e){var a=JSON.parse((0,O.F1)(r));a[o].tags||(a[o].tags=["core","chat"]),e?a[o].tags.push("image"):a[o].tags=a[o].tags.filter((function(e){return"image"!==e})),t(n,{customModels:a})}}),React.createElement("span",{style:{marginRight:5}},"Vision Model"),React.createElement(v.R,{style:{marginTop:o?0:5,marginRight:33},disabled:!0,checked:null===(l=e.tags)||void 0===l?void 0:l.includes("vision"),onChange:function(e){var a=JSON.parse((0,O.F1)(r));a[o].tags||(a[o].tags=["core","chat"]),e?a[o].tags.push("vision"):a[o].tags=a[o].tags.filter((function(e){return"vision"!==e})),t(n,{customModels:a})}})))})),React.createElement(w.M,{fullWidth:!0,icon:"plus",onClick:function(){var e=[].concat(Bu(r),[{name:"",apiUrl:"",tags:["core","chat"]}]);t(n,{customModels:e})}}))};const $u=function(e){var t,n,r,a=e.options,o=e.environments,i=e.updateEnvironment,l=e.updateOption,c=e.busy,u=(n=Ku(!1),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(n,r)||Hu(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],f=u[1],d=null!==(t=null==a?void 0:a.ai_engines)&&void 0!==t?t:[],h=Wu((function(e){switch(e.type){case"openai":return(0,O.FE)(He.HELP.OPENAI_API_KEY);case"azure":return(0,O.FE)(He.HELP.AZURE_API_KEY);case"openrouter":return(0,O.FE)(He.HELP.OPENROUTER_API_KEY);case"anthropic":return(0,O.FE)(He.HELP.ANTHROPIC_API_KEY);default:return""}}),[]),v=Wu(function(){var e,t=(e=Fu().mark((function e(t,n){var r,o,i,c,u;return Fu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,(0,O.IU)("".concat(T,"/ai/models"),{method:"POST",nonce:A,json:{envId:t}});case 4:if(i=e.sent,f(!1),c=null==i?void 0:i.models){e.next=9;break}throw new Error("Could not fetch models.");case 9:c=c.map((function(e){return Uu(Uu({},e),{},{envId:t,type:n})})),u=(u=null!==(r=null==a?void 0:a.ai_models)&&void 0!==r?r:[]).filter((function(e){return!(e.type===n&&(!e.envId||e.envId===t))})),(o=u).push.apply(o,Bu(c)),l(u,"ai_models"),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),alert(e.t0.message),console.log(e.t0),f(!1);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Gu(o,r,a,i,l,"next",e)}function l(e){Gu(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),[l]);return React.createElement("div",{style:{padding:"0px 10px 5px 10px",marginTop:13,marginBottom:5}},React.createElement(m.s,{h2:!0,style:{color:"white",marginBottom:15}},He.COMMON.ENVIRONMENTS_FOR_AI),React.createElement(b._,{inversed:!0,style:{marginTop:-5},action:React.createElement(w.M,{rounded:!0,className:"secondary",icon:"plus",onClick:function(){var e=[].concat(Bu(o),[{name:"New Environment",type:"openai",apikey:""}]);l(e,"ai_envs")}})},o.map((function(e){var t,n,r,u=0,f=d.find((function(t){return t.type===e.type}))||{},m=null===(t=f.inputs)||void 0===t?void 0:t.includes("dynamicModels");return Array.isArray(f.models)&&(u=f.models.length),React.createElement(b.V,{key:e.id,title:e.name,busy:c},React.createElement(p.d,{title:He.COMMON.NAME},React.createElement(Re.A,{name:"name",value:e.name,onFinalChange:function(t){return i(e.id,{name:t})}})),React.createElement(p.d,{title:He.COMMON.TYPE},React.createElement(we.u,{scrolldown:!0,name:"type",value:e.type,onChange:function(t){return i(e.id,{type:t})}},d.map((function(e){return React.createElement(we.j,{key:e.type,value:e.type,label:e.name})})))),function(e){var t=(d.find((function(t){return t.type===e.type}))||{}).inputs||[];return React.createElement(React.Fragment,null,t.includes("apikey")&&React.createElement(p.d,{title:He.COMMON.API_KEY},React.createElement(Re.A,{name:"apikey",value:e.apikey,description:h(e),onFinalChange:function(t){return i(e.id,{apikey:t})}})),t.includes("organizationId")&&React.createElement(p.d,{title:He.COMMON.OPENAI_ORGANIZATION_ID},React.createElement(Re.A,{name:"organizationId",value:e.organizationId,description:(0,O.FE)(He.HELP.OPENAI_ORGANIZATION_ID),onFinalChange:function(t){return i(e.id,{organizationId:t})}})),t.includes("endpoint")&&React.createElement(p.d,{title:He.COMMON.ENDPOINT},React.createElement(Re.A,{name:"endpoint",value:e.endpoint,onFinalChange:function(t){return i(e.id,{endpoint:t})}})),t.includes("region")&&React.createElement(p.d,{title:He.COMMON.REGION},React.createElement(Re.A,{name:"region",value:e.region,onFinalChange:function(t){return i(e.id,{region:t})}})),t.includes("projectId")&&React.createElement(p.d,{title:He.COMMON.PROJECT_ID},React.createElement(Re.A,{name:"projectId",value:e.projectId,onFinalChange:function(t){return i(e.id,{projectId:t})}})))}(e),"google"===e.type&&React.createElement(React.Fragment,null,React.createElement(Ne.X,{variant:"danger"},"Click ",React.createElement("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer"},"here")," to access your Google AI. Gemini is still unstable, so if you encounter issues, let's discuss them on ",React.createElement("a",{href:"https://discord.gg/bHDGh38",target:"_blank",rel:"noreferrer"},"Discord"),"."),React.createElement(_e.g,null)),"huggingface"===e.type&&React.createElement(React.Fragment,null,React.createElement(Ne.X,{variant:"danger"},"Support for Hugging Face is experimental and may not work as expected. Also, AI Engine is ready for Image and Vision but Hugging Face is not (hence the disabled checkboxes). Let's discuss about Hugging Face on ",React.createElement("a",{href:"https://discord.gg/bHDGh38",target:"_blank",rel:"noreferrer"},"Discord"),"."),React.createElement(_e.g,null)),"perplexity"===e.type&&(""===e.apikey||!e.apikey)&&React.createElement(React.Fragment,null,React.createElement(Ne.X,{variant:"warning"},"Perplexity.ai is a paid service. Click ",React.createElement("a",{href:"https://perplexity.ai/pro?referral_code=A1R94DGZ",target:"_blank",rel:"noreferrer"},"here")," to create an account with 10$ free credit."),React.createElement(_e.g,null)),React.createElement(Se.a,{keepState:"environmentCategories"},m&&React.createElement(Se.Y,{title:He.COMMON.MODELS},"openrouter"===e.type&&React.createElement("p",null,"There are currently ",React.createElement("b",null,u)," models available. OpenRouter models need to be refresh regularly. This button will fetch the latest models and their prices."),"google"===e.type&&React.createElement("p",null,"There are currently ",React.createElement("b",null,u)," models available. Google models need to be refresh regularly. This button will fetch the latest models and their prices."),"openrouter"!==e.type&&"google"!==e.type&&React.createElement("p",null,"There are currently ",React.createElement("b",null,u)," models available. This button will fetch the latest models."),React.createElement(w.M,{fullWidth:!0,className:"primary",isBusy:s,onClick:function(){return v(e.id,e.type)}},He.COMMON.REFRESH_MODELS)),"azure"===e.type&&React.createElement(React.Fragment,null,React.createElement("p",null,He.HELP.AZURE_DEPLOYMENTS),React.createElement(Se.Y,{title:He.COMMON.OPENAI_AZURE_DEPLOYMENTS},React.createElement(qu,{deployments:null!==(n=e.deployments)&&void 0!==n?n:[],environmentId:e.id,updateEnvironment:i,options:a}))),"huggingface"===e.type&&React.createElement(Se.Y,{title:He.COMMON.HUGGINGFACE_MODELS},React.createElement("p",null,"Browse the ",React.createElement("a",{href:"https://huggingface.co/models",target:"_blank",rel:"noreferrer"},"Models on Hugging Face"),". Use the Deploy button (Inference API Serverless) in order to get the API URL. Paste it below with the name of your choice and you're done!"),React.createElement(Xu,{customModels:null!==(r=e.customModels)&&void 0!==r?r:[],environmentId:e.id,updateEnvironment:i,options:a})),React.createElement(Se.Y,{title:He.COMMON.ENVIRONMENT_ID},React.createElement("p",null,'The EnvID is "',React.createElement("b",null,e.id),'".')),React.createElement(Se.Y,{title:He.COMMON.ACTIONS},React.createElement("div",{style:{display:"flex",marginTop:10}},React.createElement("div",{style:{flex:"auto"}}),React.createElement(w.M,{className:"danger",onClick:function(){return function(e){if(1!==o.length){var t=o.filter((function(t){return t.id!==e}));l(t,"ai_envs")}else alert("You can't delete the last environment.")}(e.id)}},He.COMMON.DELETE)))))}))))};function Qu(e){return Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(e)}function Ju(){Ju=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Qu(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Qu(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Zu(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ts(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ns=wp.element,rs=ns.useState,as=ns.useEffect;const os=function(){var e=es(rs(""),2),t=e[0],n=e[1],r=es(rs(""),2),a=r[0],o=r[1],i=es(rs(""),2),l=i[0],c=i[1],u=es(rs(!1),2),s=u[0],f=u[1],d=es(rs("imageToText"),2),m=d[0],p=d[1],h=es(rs(null),2),v=h[0],y=h[1];as((function(){n(""),o(""),c("")}),[m]);var g=function(){var e,n=(e=Ju().mark((function e(){var n,r,a,i,c,u=arguments;return Ju().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="","textToJSON"!==(n=u.length>0&&void 0!==u[0]?u[0]:"imageToText")){e.next=6;break}r="".concat(T,"/ai/json"),e.next=16;break;case 6:if("imageToText"!==n){e.next=10;break}r="".concat(T,"/ai/transcribe_image"),e.next=16;break;case 10:if("audioToText"!==n){e.next=14;break}r="".concat(T,"/ai/transcribe_audio"),e.next=16;break;case 14:return alert("Unknown transcription type: ".concat(n)),e.abrupt("return");case 16:return f(n),y(Date.now()),e.prev=18,e.next=21,(0,O.IU)(r,{method:"POST",nonce:A,json:{url:t,message:l}});case 21:i=e.sent,null!=(c=i.data)&&null!==(a=c.error)&&void 0!==a&&a.message?alert(c.error.message):o(c),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(18),alert(e.t0.message);case 29:return e.prev=29,f(!1),y(null),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[18,26,29,33]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zu(o,r,a,i,l,"next",e)}function l(e){Zu(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{title:"Features",className:"raw"},React.createElement(b._,{inversed:!0,onChange:function(e,t){p(t.key)}},React.createElement(b.V,{title:He.COMMON.IMAGE_TO_TEXT,key:"imageToText"},React.createElement("label",null,"Image URL:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{name:"url",rows:2,value:t,onChange:n}),React.createElement(_e.g,null),React.createElement("label",null,"Prompt:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{rows:2,value:l,onChange:c}),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,style:{height:40},disabled:s,isBusy:"imageToText"===s,startTime:v,onClick:function(){g("imageToText")}},"Transcribe Image"),React.createElement(_e.g,{tiny:!0}),React.createElement("p",null,"If you are looking for beautiful images to play with this, here are some URLs: ",React.createElement("a",{target:"_blank",href:"https://offbeatjapan.org"},"Offbeat Japan"),", ",React.createElement("a",{target:"_blank",href:"https://unsplash.com"},"Unsplash"),", ",React.createElement("a",{target:"_blank",href:"https://www.pexels.com"},"Pexels"),".")),React.createElement(b.V,{title:He.COMMON.AUDIO_TO_TEXT,key:"audioToText"},React.createElement("label",null,"Audio URL:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{name:"url",rows:2,value:t,onChange:n}),React.createElement(_e.g,null),React.createElement("label",null,"Prompt:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{rows:2,value:l,onChange:c}),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,style:{height:40},disabled:s,isBusy:"audioToText"===s,startTime:v,onClick:function(){g("audioToText")}},"Transcribe Audio")),React.createElement(b.V,{title:He.COMMON.PROMPT_TO_JSON,key:"textToJSON"},React.createElement("label",null,"Prompt:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Vt.m,{rows:2,value:l,onChange:c}),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,style:{height:40},disabled:s,isBusy:"textToJSON"===s,startTime:v,onClick:function(){g("textToJSON")}},"Query AI"),React.createElement(_e.g,null),React.createElement("label",null,"Examples:"),React.createElement("ul",null,React.createElement("li",null," List the best science fiction books. Include the title, author, publication year, and a short synopsis."),React.createElement("li",null," Identify the most beautiful gardens in Japan. Provide the garden name, location (gps: [lng, lat]), best visiting season, and features."),React.createElement("li",null," Identify the current top 10 richest individuals globally. For each person, include their name, estimated net worth, source of wealth, country of residence, and key tags (such as 'technology', 'retail', 'investor', etc.). Additionally, provide a brief description of their most notable business ventures or achievements."),React.createElement("li",null," Compile a list of significant archaeological discoveries in the last decade. Include the discovery, location, date, and significance.")),React.createElement(_e.g,null))))),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{title:"Transcription",className:"primary"},React.createElement(_e.g,{tiny:!0}),"textToJSON"===m&&React.createElement(Kc.p2,{value:a,indentWidth:2,displayDataTypes:!1,displayObjectSize:!1,displayArrayKey:!1,enableClipboard:!1,style:{fontSize:12}}),"textToJSON"!==m&&React.createElement(Vt.m,{name:"context",rows:21,value:a,disabled:!a}))))};function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function ls(e){return function(e){if(Array.isArray(e))return hs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ps(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cs(){cs=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==is(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(is(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function us(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ss(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){us(o,r,a,i,l,"next",e)}function l(e){us(o,r,a,i,l,"throw",e)}i(void 0)}))}}function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=is(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==is(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||ps(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ps(e,t){if(e){if("string"==typeof e)return hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hs(e,t):void 0}}function hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vs=wp.element,ys=vs.useState,gs=vs.useMemo,Es=vs.useEffect,bs=[{accessor:"name",title:"Name",verticalAlign:"top"},{accessor:"instructions",title:"Instructions",width:220,verticalAlign:"top"},{accessor:"parameters",title:"Parameters",verticalAlign:"top"},{accessor:"createdOn",title:"Created On",verticalAlign:"top"}],ws=[{accessor:"file",title:"File",verticalAlign:"top"},{accessor:"metadata",title:"Metadata",verticalAlign:"top"},{accessor:"userId",title:"User ID",verticalAlign:"top"},{accessor:"purpose",title:"Purpose",verticalAlign:"top"},{accessor:"created",title:"Created On",verticalAlign:"top"},{accessor:"actions",title:"Actions",verticalAlign:"top"}];const Rs=function(e){var t,n=e.options,r=e.refreshOptions,a=(0,u.jE)(),o=ms(ys(null),2),i=o[0],l=o[1],c=ms(ys(!1),2),d=c[0],p=c[1],h=ms(ys(null==n||null===(t=n.ai_envs)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id),2),v=h[0],y=h[1],g=ms(ys("assistants"),2),_=g[0],x=g[1],S=ms(ys([]),2),T=S[0],N=S[1],C=(0,s.z)().colors,I=gs((function(){var e;return(null==n||null===(e=n.ai_envs)||void 0===e?void 0:e.filter((function(e){return"openai"===e.type||"azure"===e.type})))||[]}),[n]),k=gs((function(){return I.find((function(e){return e.id===v}))}),[v,I]),A=gs((function(){return(null==k?void 0:k.assistants)||[]}),[k]),L=ms(ys({userId:null,purpose:["assistant-in","assistant-out"],metadata:null,envId:v,page:1,limit:10}),2),M=L[0],P=L[1],j=(0,O.F1)(M);Es((function(){var e,t=function(){var e=localStorage.getItem("mwai-admin-assistants");try{return JSON.parse(e)}catch(e){return{}}}(),n=null!==(e=null==t?void 0:t.envId)&&void 0!==e?e:null;n&&y(n)}),[]),Es((function(){var e;e={envId:v||null},localStorage.setItem("mwai-admin-assistants",(0,O.F1)(e))}),[v]),Es((function(){P(ds(ds({},M),{},{envId:v}))}),[v]);var F=(0,f.I)({queryKey:["assistants-files",j],enabled:"files"===_,staleTime:3e5,queryFn:function(){return fn(M)}}),D=F.isFetching,U=F.data,G=function(){var e=ss(cs().mark((function e(t){return cs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,un(t);case 4:return e.next=6,a.invalidateQueries("assistants-files");case 6:N([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l(e.t0);case 12:p(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),B=gs((function(){return null==U?void 0:U.files.map((function(e){return ds(ds({},e),{},{file:(n=e.url,r=e.refId,React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("span",null,function(e){if(!e)return null;var t=e.split("/").pop();return React.createElement("a",{href:e,target:"_blank",rel:"noreferrer"},t)}(n)),React.createElement("small",null,r))),purpose:(a=e.purpose,"assistant-out"===a?"Generated":"assistant-in"===a?"Uploaded":a),metadata:(t=e.metadata,t?React.createElement("small",null,React.createElement("ul",{style:{margin:0,padding:0}},Object.keys(t).map((function(e){return React.createElement("li",{key:e,style:{margin:0}},React.createElement("i",null,e),": ",t[e]," ","assistant_id"===e?"(".concat((n=t[e],(null==(r=A.find((function(e){return e.id===n})))?void 0:r.name)||"N/A"),")"):"");var n,r})))):null),created:new Date(e.created).toLocaleDateString(),actions:React.createElement(React.Fragment,null,React.createElement(w.M,{className:"danger",rounded:!0,icon:"trash",disabled:V,onClick:function(){return G([e.id])}}))});var t,n,r,a}))}),[U]),H=gs((function(){return(null==U?void 0:U.total)||0}),[U]),Y=function(){var e=ss(cs().mark((function e(){return cs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,gn(v);case 4:return e.next=6,r();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(e.t0);case 11:p(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ss(cs().mark((function e(){return cs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.invalidateQueries("assistants-files");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=gs((function(){return A.map((function(e){var t,n;return ds(ds({},e),{},{name:React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("span",null,e.name),React.createElement("small",null,e.id)),instructions:(null===(t=e.instructions)||void 0===t?void 0:t.length)>100?"".concat(e.instructions.slice(0,100),"..."):e.instructions,parameters:React.createElement(React.Fragment,null,React.createElement("ul",{style:{margin:0,padding:0}},React.createElement("li",{style:{margin:0,display:"flex"}},React.createElement(Oe.z,{icon:"check",width:16,color:C.green}),React.createElement("span",{style:{marginLeft:3}},null!==(n=e.model)&&void 0!==n?n:"Unknown")),!e.model&&React.createElement("li",{style:{margin:0,display:"flex",lineHeight:"12px"}},React.createElement("small",null,"The model could not be found in your AI environment. Please make sure it exists as a deployment, and Refresh the list of Assistants.")),React.createElement("li",{style:{margin:0,display:"flex"}},React.createElement(Oe.z,{icon:e.has_file_search?"check":"close",width:16,color:e.has_file_search?C.green:C.gray}),React.createElement("a",{style:{marginLeft:3},href:"https://platform.openai.com/docs/assistants/tools/file-search",target:"_blank",rel:"noreferrer"},"File Search")),React.createElement("li",{style:{margin:0,display:"flex"}},React.createElement(Oe.z,{icon:e.has_code_interpreter?"check":"close",width:16,color:e.has_code_interpreter?C.green:C.gray}),React.createElement("a",{style:{marginLeft:3},href:"https://platform.openai.com/docs/assistants/tools/code-interpreter",target:"_blank",rel:"noreferrer"},"Code Interpreter")))),createdOn:new Date(e.createdOn).toLocaleDateString()})}))}),[A,C.gray,C.green]),V=d,K=gs((function(){return React.createElement(we.u,{scrolldown:!0,value:v,onChange:y,style:{marginLeft:5}},I.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})))}),[v,I]),q=gs((function(){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",flexDirection:"row"}},React.createElement(Jt.Q,{currentPage:M.page,limit:M.limit,total:H,onClick:function(e){P(ds(ds({},M),{},{page:e}))}})))}),[M,H]);return React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0,minimal:!0,style:{margin:8}},React.createElement(b._,{inversed:!0,currentTab:_,onChange:function(e,t){x(t.key)},action:React.createElement(React.Fragment,null,React.createElement("div",{style:{flex:"auto"}}),T.length>0&&"files"===_&&React.createElement(React.Fragment,null,React.createElement(w.M,{className:"danger",disabled:!1,onClick:function(){return G(T)}},He.COMMON.DELETE)),"files"===_&&React.createElement(w.M,{disabled:V||!k,busy:V,onClick:z,className:"secondary"},He.COMMON.REFRESH),"assistants"===_&&React.createElement(w.M,{disabled:V||!k,busy:V,onClick:Y,className:"secondary"},He.COMMON.REFRESH),K)},React.createElement(b.V,{title:He.COMMON.ASSISTANTS,key:"assistants"},React.createElement(qt.o,{busy:V,data:W,columns:bs,emptyMessage:He.NO_ASSISTANTS_YET})),React.createElement(b.V,{title:He.COMMON.FILES,key:"files"},React.createElement(qt.o,{busy:D||V,data:B,columns:ws,selectedItems:T,onSelect:function(e){N([].concat(ls(T),ls(e)))},onUnselect:function(e){N(ls(T.filter((function(t){return!e.includes(t)}))))},emptyMessage:He.NO_FILES_YET}),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10}},React.createElement("div",{style:{flex:"auto"}}),q)))),React.createElement(E.Y,{fullWidth:!0,minimal:!0},React.createElement(R.z,{className:"primary"},React.createElement(m.s,{p:!0},(0,O.FE)(He.HELP.ASSISTANTS_INTRO)),React.createElement(Ne.X,{variant:"danger"},(0,O.FE)(He.HELP.ASSISTANTS_WARNINGS))),React.createElement(_e.g,{tiny:!0}),i&&React.createElement(Te.n,{isOpen:!!i,title:"Error",onRequestClose:function(){return l(null)},okButton:{label:"Ok",onClick:function(){return l(null)}},content:React.createElement("p",null,null==i?void 0:i.message)})))};var Os,_s=n(9491);function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ss=wp.element,Ts=Ss.useState,Ns=Ss.useMemo,Cs=U.Ay.div(Os||(Os=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 20px;\n"])));const Is=function(e){var t,n,r=e.addons,a=r.some((function(e){return e.enabled}))?"enabled":"all",o=(t=Ts(a),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1],c=Ns((function(){return"enabled"===i?r.filter((function(e){return e.enabled})):"disabled"===i?r.filter((function(e){return!e.enabled})):r}),[r,i]);return React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0,fullWidth:!0,style:{padding:10}},React.createElement(Xt.V,null,React.createElement(Kt.o,{name:"filter",value:i,onChange:function(e){return l(e)}},React.createElement(Kt.K,{title:"All",value:"all"}),React.createElement(Kt.K,{title:"Enabled",value:"enabled"}),React.createElement(Kt.K,{title:"Disabled",value:"disabled"}))),React.createElement(_e.g,null),React.createElement(Cs,null,c.map((function(e){return React.createElement(xe.L,{key:e.id,style:{marginBottom:0},footer:React.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",marginLeft:10,minHeight:30}},React.createElement("span",{style:{fontSize:"11px",marginRight:15,color:e.enabled?"#4CAF50":"#666",textTransform:"uppercase",fontWeight:"bold"}},e.enabled?React.createElement("label",null,"Enabled"):React.createElement("label",null,"Disabled")),React.createElement("div",{style:{flex:"auto"}}),e.enabled&&e.settings_url&&React.createElement(w.M,{className:"primary",onClick:function(){return window.open(e.settings_url,"_self")}},"Settings"),!e.enabled&&React.createElement(w.M,{className:"primary",onClick:function(){return window.open(e.install_url,"_blank")}},"Install"))},React.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:10}},React.createElement("div",{style:{width:32,marginTop:-5}},React.createElement(_s.r,null)),React.createElement(m.s,{h3:!0,style:{margin:0,marginLeft:8,fontWeight:"bold"}},e.name),React.createElement("div",{style:{marginLeft:5,marginTop:3,fontSize:10,color:"#fec74c"}},Array.from({length:e.stars},(function(e,t){return React.createElement("span",{key:t},"")})))),React.createElement("div",{className:"addon-description"},e.description))})))))};function ks(e){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function As(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ls(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ms(){Ms=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==ks(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ks(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){Fs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fs(e,t,n){var r;return r=function(e,t){if("object"!=ks(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ks(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ds(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Us(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ds(o,r,a,i,l,"next",e)}function l(e){Ds(o,r,a,i,l,"throw",e)}i(void 0)}))}}var Gs=wp.element,Bs=Gs.useMemo,Hs=Gs.useState,Ys=Gs.useEffect,zs=Gs.useCallback,Ws=function(){var e=Us(Ms().mark((function e(){var t,n;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/openai/incidents"),{nonce:A});case 2:if(null==(t=e.sent)||!t.incidents){e.next=6;break}return n=t.incidents.map((function(e){var t=e.date,n=(t=new Date(1e3*t)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"});return js(js({},e),{},{date:n})})),e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Vs=[{envKey:"ai_embeddings_default_env",modelKey:"ai_embeddings_default_model",defaultModel:"text-embedding-ada-002"},{envKey:"ai_vision_default_env",modelKey:"ai_vision_default_model",defaultModel:"gpt-4o-mini"},{envKey:"ai_images_default_env",modelKey:"ai_images_default_model",defaultModel:"dall-e-3-hd"},{envKey:"ai_audio_default_env",modelKey:"ai_audio_default_model",defaultModel:"whisper-1"},{envKey:"ai_json_default_env",modelKey:"ai_json_default_model",defaultModel:"gpt-4o-mini"}],Ks=["module_forms","module_statistics","module_embeddings","module_assistants"];const qs=function(){var e,t,n,r,a=As(Hs(L),2),o=a[0],i=a[1],l=As(Hs(null),2),c=l[0],u=l[1],s=As(Hs(!1),2),d=s[0],g=s[1],S=null==o?void 0:o.module_suggestions,N=null==o?void 0:o.module_advisor,C=null==o?void 0:o.module_forms,M=null==o?void 0:o.module_finetunes,P=null==o?void 0:o.module_statistics,j=null==o?void 0:o.module_playground,F=null==o?void 0:o.module_generator_content,D=null==o?void 0:o.module_generator_images,U=null==o?void 0:o.module_moderation,G=null==o?void 0:o.module_embeddings,B=null==o?void 0:o.module_assistants,H=null==o?void 0:o.module_transcription,Y=null==o?void 0:o.module_addons,z=null==o?void 0:o.module_devtools,W=null==o?void 0:o.module_chatbots,V=Bs((function(){return null!=o&&o.ai_envs?null==o?void 0:o.ai_envs:[]}),[o]),K=null==o?void 0:o.ai_default_env,q=null==o?void 0:o.ai_default_model,X=null==o?void 0:o.ai_vision_default_env,$=null==o?void 0:o.ai_vision_default_model,Q=null==o?void 0:o.ai_embeddings_default_env,J=null==o?void 0:o.ai_embeddings_default_model,Z=null==o?void 0:o.ai_images_default_env,ee=null==o?void 0:o.ai_images_default_model,te=null==o?void 0:o.ai_audio_default_env,ne=null==o?void 0:o.ai_audio_default_model,re=null==o?void 0:o.ai_json_default_env,ae=null==o?void 0:o.ai_json_default_model,oe=null==o?void 0:o.ai_streaming,ie=null!=o&&o.embeddings_envs?null==o?void 0:o.embeddings_envs:[],le=null==o?void 0:o.embeddings_default_env,ce=null==o?void 0:o.syntax_highlight,ue=null==o?void 0:o.chatbot_typewriter,se=null==o?void 0:o.chatbot_discussions,fe=null==o?void 0:o.virtual_keyboard_fix,de=null==o?void 0:o.chatbot_gdpr_consent,me=null==o?void 0:o.chatbot_gdpr_text,pe=null==o?void 0:o.chatbot_gdpr_button,he=null==o?void 0:o.speech_recognition,ve=null==o?void 0:o.speech_synthesis,ye=null==o?void 0:o.public_api,ge=null==o?void 0:o.statistics_data,Ee=null==o?void 0:o.statistics_forms_data,be=null==o?void 0:o.intro_message,Ne=null==o?void 0:o.module_addons,Ce=null==o?void 0:o.context_max_length,Ie=null==o?void 0:o.banned_ips,ke=null==o?void 0:o.banned_words,Ae=null==o?void 0:o.ignore_word_boundaries,Le=null!==(e=null==o?void 0:o.admin_bar)&&void 0!==e?e:["settings"],Me=null==o?void 0:o.resolve_shortcodes,Pe=null==o?void 0:o.clean_uninstall,je=ft(o).completionModels,Fe=ft(o,null==o?void 0:o.ai_vision_default_env).visionModels,De=ft(o,null==o?void 0:o.ai_audio_default_env).audioModels,Ge=ft(o,null==o?void 0:o.ai_json_default_env).jsonModels,Be=ft(o,null==o?void 0:o.ai_images_default_env).imageModels,Ye=ft(o,null==o?void 0:o.ai_embeddings_default_env).embeddingsModels,ze=Bs((function(){return Ye.find((function(e){return e.model===J}))}),[Ye,J]),We=(0,f.I)({queryKey:["incidents"],queryFn:Ws}),Ve=We.isLoading,Ke=We.data,qe=Bs((function(){return null==Ke?void 0:Ke.filter((function(e){return new Date(e.date)>new Date(Date.now()-864e5)})).length}),[Ke]),Xe=d;Ys((function(){var e=function(){var e=Us(Ms().mark((function e(){var t,n;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,n=js({},o),Vs.forEach((function(e){var r=e.envKey,a=e.modelKey,i=e.defaultModel,l=!1;if(o[r]&&(l=!!V.find((function(e){return e.id===o[r]}))),!l){var c=V.find((function(e){return"openai"===(null==e?void 0:e.type)}));c?n[r]===c.id&&n[a]===i||(console.warn("Updating ".concat(r," and ").concat(a," to ").concat(c.id," and ").concat(i)),t=!0,n[r]=c.id,n[a]=i):null===n[r]&&null===n[a]||(console.warn("Updating ".concat(r," and ").concat(a," to null")),t=!0,n[r]=null,n[a]=null)}if("ai_embeddings_default_model"===a&&n[a]){var u=(null==n?void 0:n.ai_embeddings_default_dimensions)||null;if(null!==u){var s=Ye.find((function(e){return e.model===n[a]}));if(null==s||!s.dimensions.includes(u)){var f=(null==s?void 0:s.dimensions[(null==s?void 0:s.dimensions.length)-1])||null;null!==f&&(n.ai_embeddings_default_dimensions=f,console.warn("Updating embeddings default dimensions to ".concat(f)),t=!0)}}}})),!t){e.next=6;break}return e.next=6,Qe(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[V,o,Qe,Ye]);var $e=function(){var e=Us(Ms().mark((function e(){var t;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,bn();case 4:t=e.sent,i(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(He.ERROR.GETTING_OPTIONS,null!==e.t0&&void 0!==e.t0&&e.t0.message?{message:e.t0.message}:{err:e.t0}),e.t0.message&&u(React.createElement(React.Fragment,null,React.createElement("div",null,He.ERROR.GETTING_OPTIONS),React.createElement("small",null,(0,O.FE)(He.ERROR.CHECK_YOUR_CONSOLE))));case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),Qe=zs(function(){var e=Us(Ms().mark((function e(t){var n;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,O.F1)(t)!==(0,O.F1)(o)){e.next=3;break}return e.abrupt("return");case 3:return g(!0),e.next=6,(0,O.IU)("".concat(T,"/settings/update"),{method:"POST",nonce:A,json:{options:t}});case 6:n=e.sent,i(n.options),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(He.ERROR.UPDATING_OPTIONS,null!==e.t0&&void 0!==e.t0&&e.t0.message?{message:e.t0.message,options:o,newOptions:t}:{err:e.t0,options:o,newOptions:t}),e.t0.message&&u(React.createElement(React.Fragment,null,React.createElement("div",null,He.ERROR.UPDATING_OPTIONS),React.createElement("small",null,(0,O.FE)(He.ERROR.CHECK_YOUR_CONSOLE))));case 14:return e.prev=14,g(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[o]),Je=function(){var e=Us(Ms().mark((function e(t,n){var r;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=js(js({},o),{},Fs({},n,t)),console.log("Updating",n,t),e.next=4,Qe(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Us(Ms().mark((function e(t,n){var r;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=ie.map((function(e){return e.id===t?js(js({},e),n):e})),Je(r,"embeddings_envs");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),et=function(){var e=Us(Ms().mark((function e(t,n){var r;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=V.map((function(e){return e.id===t?js(js({},e),n):e})),Je(r,"ai_envs");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tt=function(){var e=Us(Ms().mark((function e(){return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm(He.ALERTS.ARE_YOU_SURE)){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.prev=3,e.next=6,(0,O.IU)("".concat(T,"/settings/reset"),{method:"POST",nonce:A});case 6:alert("Settings reset. The page will now reload to reflect the changes."),window.location.reload(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),alert("Error while resetting settings. Please check your console."),console.log(e.t0);case 14:return e.prev=14,g(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Us(Ms().mark((function e(){var t,n,r,a,o,i,l,c,u;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("exportSettings"),e.prev=1,e.next=4,vn();case 4:return t=e.sent,e.next=7,mn();case 7:return n=e.sent,e.next=10,bn();case 10:r=e.sent,a={chatbots:t,themes:n,options:r},o=new Blob([(0,O.F1)(a)],{type:"application/json"}),i=URL.createObjectURL(o),(l=document.createElement("a")).href=i,c=new Date,u="ai-engine-".concat(c.getFullYear(),"-").concat(c.getMonth()+1,"-").concat(c.getDate(),".json"),l.setAttribute("download",u),l.click(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),alert("Error while exporting settings. Please check your console."),console.log(e.t0);case 26:return e.prev=26,g(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,22,26,29]])})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Us(Ms().mark((function e(){var t;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g("importSettings");try{(t=document.createElement("input")).type="file",t.accept="application/json",t.onchange=function(){var e=Us(Ms().mark((function e(t){var n,r;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:(r=new FileReader).onload=function(){var e=Us(Ms().mark((function e(t){var n,r,a,o;return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t.target.result),r=n.chatbots,a=n.themes,o=n.options,e.next=4,yn(r);case 4:return e.next=6,pn(a);case 6:return e.next=8,Qe(o);case 8:alert("Settings imported. The page will now reload to reflect the changes."),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.click()}catch(e){alert("Error while importing settings. Please check your console."),console.log(e)}finally{g(!1)}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Ys((function(){if(!k){var e=js({},o),t=!1;Ks.forEach((function(n){e[n]&&(e[n]=!1,console.warn("Resetting ".concat(n)),t=!0)})),t&&(0,O.F1)(e)!==(0,O.F1)(o)&&Qe(e)}}),[]);var at=React.createElement(p.d,{title:He.COMMON.UTILITIES},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"module_suggestions",label:He.COMMON.POSTS_SUGGESTIONS,value:"1",checked:S,description:He.COMMON.POSTS_SUGGESTIONS_HELP,onChange:Je}))),ot=React.createElement(p.d,{title:He.COMMON.ADVISOR},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"module_advisor",label:He.COMMON.ENABLE,value:"1",checked:N,description:He.HELP.ADVISOR,onChange:Je}))),it=React.createElement(p.d,{title:He.COMMON.GENERATORS},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"module_generator_content",label:He.COMMON.CONTENT_GENERATOR,value:"1",checked:F,description:He.COMMON.CONTENT_GENERATOR_HELP,onChange:Je}),React.createElement(v.R,{name:"module_generator_images",label:He.COMMON.IMAGES_GENERATOR,value:"1",checked:D,description:He.COMMON.IMAGES_GENERATOR_HELP,onChange:Je}))),lt=React.createElement(p.d,{title:He.COMMON.PLAYGROUND},React.createElement(v.R,{name:"module_playground",label:He.COMMON.ENABLE,value:"1",checked:j,description:He.COMMON.PLAYGROUND_HELP,onChange:Je})),ct=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.FORMS,React.createElement("small",{style:{position:"relative",top:-3,fontSize:8}}," BETA"))},React.createElement(v.R,{name:"module_forms",label:He.COMMON.ENABLE,value:"1",checked:C,requirePro:!0,isPro:k,description:He.COMMON.FORMS_HELP,onChange:Je})),ut=React.createElement(p.d,{title:He.COMMON.FINETUNES},React.createElement(v.R,{name:"module_finetunes",label:He.COMMON.ENABLE,value:"1",checked:M,description:React.createElement(React.Fragment,null,React.createElement(_t,{disabled:!M,style:{marginRight:3}}),He.HELP.FINETUNES),onChange:Je})),dt=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.STATISTICS)},React.createElement(v.R,{name:"module_statistics",label:He.COMMON.ENABLE,value:"1",checked:P,requirePro:!0,isPro:k,description:He.COMMON.STATISTICS_HELP,onChange:Je})),mt=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.MODERATION)},React.createElement(v.R,{name:"module_moderation",label:He.COMMON.ENABLE,value:"1",checked:U,description:React.createElement(React.Fragment,null,React.createElement(_t,{disabled:!U,style:{marginRight:3}}),He.COMMON.MODERATION_HELP),onChange:Je})),pt=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.TRANSCRIPTION)},React.createElement(v.R,{name:"module_transcription",label:He.COMMON.ENABLE,value:"1",checked:H,description:He.COMMON.TRANSCRIPTION_HELP,onChange:Je})),ht=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.EMBEDDINGS)},React.createElement(v.R,{name:"module_embeddings",label:He.COMMON.ENABLE,value:"1",checked:G,requirePro:!0,isPro:k,description:He.COMMON.EMBEDDINGS_HELP,onChange:Je})),vt=React.createElement(p.d,{title:React.createElement(React.Fragment,null,He.COMMON.ASSISTANTS,React.createElement("small",{style:{position:"relative",top:-3,fontSize:8}}," BETA"))},React.createElement(v.R,{name:"module_assistants",label:He.COMMON.ENABLE,value:"1",checked:B,requirePro:!0,isPro:k,description:React.createElement(React.Fragment,null,React.createElement(_t,{disabled:!B,style:{marginRight:3}}),He.HELP.ASSISTANTS),onChange:Je})),yt=React.createElement(p.d,{title:He.COMMON.CHATBOT},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"module_chatbots",label:He.COMMON.ENABLE,value:"1",checked:W,description:He.COMMON.CHATBOT_HELP,onChange:Je}))),gt=React.createElement(p.d,{title:He.COMMON.QUERIES_DATA},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"statistics_data",label:He.COMMON.ENABLE,value:"1",checked:ge,description:He.HELP.QUERIES_DATA,onChange:Je}))),Et=React.createElement(p.d,{title:He.COMMON.QUERIES_FORMS_DATA},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"statistics_forms_data",label:He.COMMON.ENABLE,value:"1",checked:Ee,description:He.HELP.QUERIES_FORMS_DATA,onChange:Je}))),bt=React.createElement(p.d,{title:He.COMMON.INTRO_MESSAGE},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"intro_message",label:He.COMMON.ENABLE,value:"1",checked:be,description:He.HELP.INTRO_MESSAGE,onChange:Je}))),wt=React.createElement(p.d,{title:He.COMMON.ADDONS},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"module_addons",label:He.COMMON.ENABLE,value:"1",checked:Ne,description:He.HELP.ADDONS,onChange:Je}))),Rt=React.createElement(p.d,{title:He.COMMON.CHATBOT_SELECT},React.createElement(we.u,{scrolldown:!0,name:"chatbot_select",value:null==o?void 0:o.chatbot_select,onChange:Je,description:He.HELP.CHATBOT_SELECT},React.createElement(we.j,{key:"tabs",value:"tabs",label:He.COMMON.TABS}),React.createElement(we.j,{key:"dropdown",value:"dropdown",label:He.COMMON.DROPDOWN}))),Ot=React.createElement(p.d,{title:He.COMMON.WEBSPEECH_API},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"speech_recognition",label:He.COMMON.SPEECH_RECOGNITION,value:"1",checked:he,description:He.HELP.SPEECH_RECOGNITION,onChange:Je})),React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"speech_synthesis",label:He.COMMON.SPEECH_SYNTHESIS+" (SOON)",value:"1",disabled:!0,checked:ve,description:He.HELP.SPEECH_SYNTHESIS,onChange:Je}))),xt=React.createElement(p.d,{title:He.COMMON.VIRTUAL_KEYBOARD},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"virtual_keyboard_fix",label:He.COMMON.FIX,value:"1",checked:fe,description:He.HELP.VIRTUAL_KEYBOARD,onChange:Je}))),St=React.createElement(p.d,{title:He.COMMON.GDPR_CONSENT},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"chatbot_gdpr_consent",label:He.COMMON.ENABLE,value:"1",checked:de,description:He.HELP.GDPR_CONSENT,onChange:Je}))),Tt=React.createElement(p.d,{title:He.COMMON.GDPR_TEXT},React.createElement(Re.A,{name:"chatbot_gdpr_text",value:me,onBlur:Je})),Nt=React.createElement(p.d,{title:He.COMMON.GDPR_BUTTON},React.createElement(Re.A,{name:"chatbot_gdpr_button",value:pe,onBlur:Je})),Ct=React.createElement(p.d,{title:He.COMMON.STREAMING},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"ai_streaming",label:He.COMMON.ENABLE,value:"1",checked:oe,description:He.HELP.STREAMING,onChange:Je}))),It=React.createElement(p.d,{title:He.SETTINGS.TYPEWRITER_EFFECT},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"chatbot_typewriter",label:He.COMMON.ENABLE,value:"1",checked:ue,description:(0,O.FE)(He.SETTINGS.TYPEWRITER_EFFECT_HELP),onChange:Je}))),kt=React.createElement(p.d,{title:He.COMMON.DISCUSSIONS},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"chatbot_discussions",label:He.COMMON.ENABLE,value:"1",checked:se,description:He.HELP.DISCUSSIONS,onChange:Je}))),At=React.createElement(p.d,{title:He.COMMON.DISCUSSION_TITLES},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"chatbot_discussions_titling",label:He.COMMON.GENERATE,value:"1",checked:null==o?void 0:o.chatbot_discussions_titling,description:He.HELP.DISCUSSION_TITLES,onChange:Je}))),Lt=React.createElement(p.d,{title:He.COMMON.SYNTAX_HIGHLIGHT},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"syntax_highlight",label:He.COMMON.ENABLE,value:"1",checked:ce,description:He.HELP.SYNTAX_HIGHLIGHT,onChange:Je}))),Mt=React.createElement(p.d,{title:He.COMMON.PUBLIC_API},React.createElement(v.R,{name:"public_api",label:He.COMMON.ENABLE,value:"1",checked:ye,description:He.HELP.PUBLIC_API,onChange:Je})),Pt=React.createElement(p.d,{title:He.COMMON.BEARER_TOKEN},React.createElement(Re.A,{name:"public_api_bearer_token",value:null==o?void 0:o.public_api_bearer_token,description:(0,O.FE)(He.HELP.BEARER_TOKEN),onBlur:Je})),jt=React.createElement(p.d,{title:"Local Upload"},React.createElement(we.u,{scrolldown:!0,name:"image_local_upload",value:null==o?void 0:o.image_local_upload,onChange:Je,description:"Files can be stored either in the filesystem or the Media Library."},React.createElement(we.j,{key:"uploads",value:"uploads",label:"Filesystem"}),React.createElement(we.j,{key:"library",value:"library",label:"Media Library"}))),Ft=React.createElement(p.d,{title:"Remote Upload"},React.createElement(we.u,{scrolldown:!0,name:"image_remote_upload",value:null==o?void 0:o.image_remote_upload,onChange:Je,description:"Select Upload Data for private sites; Share URLs requires your WordPress to be online and reachable."},React.createElement(we.j,{key:"data",value:"data",label:"Upload Data"}),React.createElement(we.j,{key:"url",value:"url",label:"Share URLs"}))),Dt=React.createElement(p.d,{title:"Expiration"},React.createElement(we.u,{scrolldown:!0,name:"image_expires",value:null!==(t=null==o?void 0:o.image_expires)&&void 0!==t?t:"never",onChange:Je,description:"Uploaded files will be deleted after a certain amount of time. This also affects files uploaded to OpenAI via the Assistants."},React.createElement(we.j,{key:300,value:300,label:"5 minutes"}),React.createElement(we.j,{key:3600,value:3600,label:"1 hour"}),React.createElement(we.j,{key:21600,value:21600,label:"6 hours"}),React.createElement(we.j,{key:86400,value:86400,label:"1 day"}),React.createElement(we.j,{key:604800,value:604800,label:"1 week"}),React.createElement(we.j,{key:2592e3,value:2592e3,label:"1 month"}),React.createElement(we.j,{key:"Never",value:"never",label:"Never"}))),Ut=React.createElement(p.d,{title:"Local Download"},React.createElement(we.u,{scrolldown:!0,name:"image_local_download",value:null!==(n=null==o?void 0:o.image_local_download)&&void 0!==n?n:null,onChange:Je,description:"Files can be stored either in the filesystem or the Media Library."},React.createElement(we.j,{key:null,value:null,label:"None"}),React.createElement(we.j,{key:"uploads",value:"uploads",label:"Filesystem"}),React.createElement(we.j,{key:"library",value:"library",label:"Media Library"}))),Gt=React.createElement(p.d,{title:"Expiration"},React.createElement(we.u,{scrolldown:!0,name:"image_expires_download",value:null!==(r=null==o?void 0:o.image_expires_download)&&void 0!==r?r:"never",onChange:Je,description:"Downloaded files will be deleted after a certain amount of time."},React.createElement(we.j,{key:300,value:300,label:"5 minutes"}),React.createElement(we.j,{key:3600,value:3600,label:"1 hour"}),React.createElement(we.j,{key:21600,value:21600,label:"6 hours"}),React.createElement(we.j,{key:86400,value:86400,label:"1 day"}),React.createElement(we.j,{key:604800,value:604800,label:"1 week"}),React.createElement(we.j,{key:2592e3,value:2592e3,label:"1 month"}),React.createElement(we.j,{key:"Never",value:"never",label:"Never"}))),Ht=React.createElement(p.d,{title:He.COMMON.DEV_TOOLS},React.createElement(v.R,{name:"module_devtools",label:He.COMMON.ENABLE,value:"1",checked:z,description:He.HELP.DEV_TOOLS,onChange:Je})),Yt=React.createElement(p.d,{title:He.COMMON.SHORTCODES},React.createElement(v.R,{name:"resolve_shortcodes",label:He.COMMON.RESOLVE,value:"1",checked:Me,description:He.HELP.RESOLVE_SHORTCODE,onChange:Je})),zt=React.createElement(p.d,{title:He.COMMON.CONTEXT_MAX_LENGTH},React.createElement(Re.A,{name:"context_max_length",value:Ce,type:"number",step:"1",description:He.HELP.CONTEXT_MAX_LENGTH,onBlur:Je})),Wt=React.createElement(p.d,{title:He.COMMON.BANNED_WORDS},React.createElement(Re.A,{id:"banned_words",name:"banned_words",value:ke,isCommaSeparatedArray:!0,description:He.HELP.BANNED_WORDS,onBlur:Je})),Vt=React.createElement(p.d,{title:He.COMMON.WORD_BOUNDARIES},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"ignore_word_boundaries",label:He.COMMON.IGNORE,value:"1",checked:Ae,description:He.HELP.WORD_BOUNDARIES,onChange:Je}))),Kt=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_default_model",value:q,onChange:Je},je.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),qt=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_default_model",value:J,onChange:Je},Ye.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),Xt=React.createElement(p.d,{title:He.COMMON.DIMENSIONS},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_default_dimensions",value:(null==o?void 0:o.ai_embeddings_default_dimensions)||null,onChange:Je},null==ze?void 0:ze.dimensions.map((function(e,t){return React.createElement(we.j,{key:e,value:e,label:t===ze.dimensions.length-1?"".concat(e," (Default)"):e})})),React.createElement(we.j,{key:null,value:null,label:"Not Set"}))),$t=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_vision_default_model",value:$,onChange:Je},Fe.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),Qt=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_audio_default_model",value:ne,onChange:Je},De.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),Jt=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_json_default_model",value:ae,onChange:Je},Ge.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),Zt=React.createElement(p.d,{title:He.COMMON.MODEL},React.createElement(we.u,{scrolldown:!0,name:"ai_images_default_model",value:ee,onChange:Je},Be.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})})))),en=React.createElement(p.d,{title:He.COMMON.BANNED_IPS},React.createElement(Re.A,{id:"banned_ips",name:"banned_ips",value:Ie,isCommaSeparatedArray:!0,description:He.HELP.BANNED_IPS,onBlur:Je})),tn=React.createElement(p.d,{title:He.COMMON.PLAYGROUND},React.createElement(v.R,{label:He.COMMON.ENABLE,value:"1",checked:null==Le?void 0:Le.playground,onChange:function(e){var t=js(js({},Le),{},{playground:e});Je(t,"admin_bar")}})),nn=React.createElement(p.d,{title:He.COMMON.GENERATE_CONTENT},React.createElement(v.R,{label:He.COMMON.ENABLE,value:"1",checked:null==Le?void 0:Le.content_generator,onChange:function(e){var t=js(js({},Le),{},{content_generator:e});Je(t,"admin_bar")}})),rn=React.createElement(p.d,{title:He.COMMON.GENERATE_IMAGES},React.createElement(v.R,{label:He.COMMON.ENABLE,value:"1",checked:null==Le?void 0:Le.images_generator,onChange:function(e){var t=js(js({},Le),{},{images_generator:e});Je(t,"admin_bar")}})),an=React.createElement(p.d,{title:"AI Engine"},React.createElement(v.R,{label:He.COMMON.ENABLE,value:"1",checked:null==Le?void 0:Le.settings,onChange:function(e){var t=js(js({},Le),{},{settings:e});Je(t,"admin_bar")}})),on=React.createElement("div",null,React.createElement(wa,{options:o}),React.createElement("div",{style:{fontSize:12,marginTop:15,lineHeight:1.3,color:"#666"}},(0,O.FE)(He.COMMON.USAGE_HELP))),ln=Bs((function(){return qe>0?React.createElement(Oe.z,{style:{marginLeft:5,marginRight:-5,display:"inline"},width:"16",icon:"alert",variant:"warning"}):React.createElement(Oe.z,{style:{marginLeft:5,marginRight:-5,display:"inline"},width:"16",icon:"alert",variant:"success"})}),[qe]),cn=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_default_env",value:K,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),un=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_embeddings_default_env",value:Q,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),sn=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_vision_default_env",value:X,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),fn=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_audio_default_env",value:te,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),dn=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_json_default_env",value:re,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),hn=React.createElement(React.Fragment,null,React.createElement(_e.g,{height:5}),React.createElement(p.d,{title:He.COMMON.ENVIRONMENT},React.createElement(we.u,{scrolldown:!0,name:"ai_images_default_env",value:Z,onChange:Je},V.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))))),gn=React.createElement(we.u,{scrolldown:!0,name:"embeddings_default_env",value:le,onChange:Je},ie.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))),En=React.createElement(p.d,{title:He.COMMON.PLUGIN_DATA},React.createElement(h.E,{max:"1"},React.createElement(v.R,{name:"clean_uninstall",label:He.COMMON.DELETE_ALL,description:He.COMMON.PLUGIN_DATA_DESCRIPTION,value:"1",checked:Pe,onChange:Je})));return React.createElement(y.z,null,React.createElement(Bt,{options:o}),React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0},React.createElement(st,{options:o}),be&&React.createElement(xe.L,null,(0,O.FE)(He.SETTINGS.INTRO)),React.createElement(b._,{keepTabOnReload:!0},React.createElement(b.V,{key:"dashboard",title:He.COMMON.DASHBOARD},React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{busy:Xe,title:He.COMMON.CLIENT_MODULES,className:"primary"},React.createElement("p",null,He.SETTINGS.MODULES_INTRO),React.createElement(_e.g,null),yt,ct),React.createElement(R.z,{busy:Xe,title:He.COMMON.SERVER_MODULES,className:"primary"},React.createElement("p",null,He.SETTINGS.MODULES_INTRO),React.createElement(_e.g,null),dt,ht,ut,mt,vt),React.createElement(R.z,{busy:Xe,title:He.COMMON.BACKEND_MODULES,className:"primary"},React.createElement("p",null,He.SETTINGS.MODULES_INTRO),React.createElement(_e.g,null),ot,it,lt,at,pt)),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{busy:Xe,title:He.COMMON.USAGE,className:"primary",action:React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement(w.M,{className:"danger",style:{marginLeft:5},disabled:Xe,onClick:Us(Ms().mark((function e(){return Ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(He.COMMON.RESET_USAGE_SURE)){e.next=3;break}return e.next=3,Je([],"ai_models_usage");case 3:case"end":return e.stop()}}),e)})))},He.COMMON.RESET)))},on)))),W&&React.createElement(b.V,{key:"chatbots",title:He.COMMON.CHATBOTS},React.createElement(Vc,{options:o,updateOption:Je,busy:Xe})),W&&se&&React.createElement(b.V,{key:"discussions",title:He.COMMON.DISCUSSIONS},React.createElement(so,null)),P&&React.createElement(b.V,{key:"queries",title:He.COMMON.QUERIES},React.createElement(xu,{options:o,updateOption:Je,busy:Xe})),G&&React.createElement(b.V,{key:"embeddings",title:He.COMMON.EMBEDDINGS},React.createElement(da,{options:o,updateEnvironment:Ze,updateOption:Je})),B&&React.createElement(b.V,{key:"assistants",title:He.COMMON.ASSISTANTS},React.createElement(Rs,{options:o,updateOption:Je,refreshOptions:$e})),M&&React.createElement(b.V,{key:"finetunes",title:He.COMMON.FINETUNES},React.createElement(nr,{options:o,updateOption:Je,refreshOptions:$e})),U&&React.createElement(b.V,{key:"moderation",title:He.COMMON.MODERATION},React.createElement(pr,{options:o,updateOption:Je,busy:Xe})),H&&React.createElement(b.V,{key:"transcription",title:He.COMMON.TRANSCRIPTION},React.createElement(os,{options:o,updateOption:Je})),Y&&React.createElement(b.V,{key:"addons",title:He.COMMON.ADDONS},React.createElement(Is,{addons:null==o?void 0:o.addons,updateOption:Je})),React.createElement(b.V,{key:"settings",title:He.COMMON.SETTINGS},React.createElement(E.N,null,React.createElement(E.Y,{minimal:!0},React.createElement($u,{busy:Xe,options:o,environments:V,updateEnvironment:et,updateOption:Je}),React.createElement("div",{style:{padding:"0px 10px 15px 10px",marginTop:13,marginBottom:5}},React.createElement(m.s,{h2:!0,style:{color:"white",marginBottom:15}},He.COMMON.AI_ENVIRONMENT_DEFAULTS),React.createElement(b._,{inversed:!0},React.createElement(b.V,{key:"ai",title:He.COMMON.DEFAULT,busy:Xe},cn,Kt),React.createElement(b.V,{key:"vision",title:He.COMMON.VISION,busy:Xe},sn,$t),React.createElement(b.V,{key:"images",title:He.COMMON.IMAGES,busy:Xe},hn,Zt),React.createElement(b.V,{key:"embeddings",title:He.COMMON.EMBEDDINGS,busy:Xe},un,qt,Xt),React.createElement(b.V,{key:"audio",title:He.COMMON.AUDIO,busy:Xe},fn,Qt),React.createElement(b.V,{key:"json",title:He.COMMON.JSON,busy:Xe},dn,Jt))),G&&React.createElement(React.Fragment,null,React.createElement(Pu,{busy:Xe,options:o,environments:ie,updateEnvironment:Ze,updateOption:Je}),React.createElement(R.z,{busy:Xe,title:He.COMMON.EMBEDDINGS_ENVIRONMENT_DEFAULT,className:"primary"},gn)),React.createElement(R.z,{busy:Ve,title:React.createElement("div",{style:{display:"flex"}},He.COMMON.INCIDENTS_OPENAI,ln),className:"primary",contentStyle:{padding:0}},React.createElement(lr,{incidents:Ke,isLoading:Ve})),React.createElement(R.z,{busy:Xe,title:He.COMMON.MAINTENANCE,className:"primary"},React.createElement(w.M,{className:"blue",onClick:nt},"Export Settings"),React.createElement(w.M,{className:"danger",onClick:rt},"Import Settings"),React.createElement(w.M,{className:"danger",onClick:tt},"Reset Settings"))),React.createElement(E.Y,{minimal:!0},React.createElement(R.z,{busy:Xe,title:He.COMMON.GENERAL,className:"primary"},Ct),React.createElement(R.z,{busy:Xe,title:He.COMMON.USER_INTERFACE,className:"primary"},bt,wt,Rt),React.createElement(R.z,{busy:Xe,title:He.COMMON.CHATBOT,className:"primary"},kt,se&&At,Lt,Ot,xt,St,de&&React.createElement(React.Fragment,null,Tt,Nt)),P&&React.createElement(R.z,{busy:Xe,title:He.COMMON.STATISTICS,className:"primary"},React.createElement("p",null,He.HELP.STATISTICS),gt,Et),React.createElement(R.z,{busy:Xe,title:He.COMMON.IMAGES_AND_FILES,className:"primary"},React.createElement("p",null,React.createElement("b",null,"Uploaded by Users")),jt,Ft,Dt,React.createElement("p",null,React.createElement("b",null,"Generated by AI")),Ut,null!==(null==o?void 0:o.image_local_download)&&Gt),React.createElement(R.z,{busy:Xe,title:He.COMMON.ADMIN_TOOLS,className:"primary"},React.createElement(Se.Y,{title:He.COMMON.ADMIN_BAR}),an,tn,nn,rn),React.createElement(R.z,{busy:Xe,title:He.COMMON.ADVANCED,className:"primary"},Yt,zt,Mt,Pt,Ht,En),React.createElement(R.z,{busy:Xe,title:He.COMMON.SECURITY,className:"primary"},Wt,(null==ke?void 0:ke.length)>0&&Vt,en),React.createElement(R.z,{busy:Xe,title:He.COMMON.LEGACY_FEATURES,className:"primary"},It)))),z&&React.createElement(b.V,{key:"devtools",title:He.COMMON.DEV_TOOLS},React.createElement(ku,{options:o,setOptions:i,updateOption:Je})),React.createElement(b.V,{key:"license",title:He.COMMON.LICENSE_TAB},React.createElement(Ue,{domain:x,prefix:_,isPro:I,isRegistered:k}))))),React.createElement(Te.n,{isOpen:c,title:He.COMMON.ERROR,content:c,onRequestClose:function(){return u(!1)},okButton:{label:"Close",onClick:function(){return u(!1)}}}))};var Xs=n(6087),$s=[{value:"informative",label:"Informative"},{value:"descriptive",label:"Descriptive"},{value:"creative",label:"Creative"},{value:"narrative",label:"Narrative"},{value:"persuasive",label:"Persuasive"},{value:"reflective",label:"Reflective"},{value:"argumentative",label:"Argumentative"},{value:"analytical",label:"Analytical"},{value:"evaluative",label:"Evaluative"},{value:"journalistic",label:"Journalistic"},{value:"technical",label:"Technical"}],Qs=[{value:"neutral",label:"Neutral"},{value:"formal",label:"Formal"},{value:"assertive",label:"Assertive"},{value:"cheerful",label:"Cheerful"},{value:"humorous",label:"Humorous"},{value:"informal",label:"Informal"},{value:"inspirational",label:"Inspirational"},{value:"professional",label:"Professional"},{value:"confluent",label:"Confluent"},{value:"emotional",label:"Emotional"},{value:"persuasive",label:"Persuasive"},{value:"supportive",label:"Supportive"},{value:"sarcastic",label:"Sarcastic"},{value:"condescending",label:"Condescending"},{value:"skeptical",label:"Skeptical"},{value:"narrative",label:"Narrative"},{value:"journalistic",label:"Journalistic"}],Js="gpt-3.5-turbo",Zs=[{id:"default",name:"Default",mode:"query",model:Js,temperature:.8,stopSequence:"",maxTokens:2048,prompt:""},{id:"article_translator",name:"Text Translator",mode:"query",model:Js,temperature:.3,stopSequence:"",maxTokens:2048,prompt:"Translate this article into French:\n\nUchiko is located in Ehime prefecture, in the west of the island. The town was prosperous at the end of the 19th century thanks to its production of very good quality white wax. This economic boom allowed wealthy local merchants to build beautiful properties, whose heritage is still visible throughout the town.\n"},{id:"restaurant_review",name:"Restaurant Review Writer",mode:"query",model:Js,temperature:.8,stopSequence:"",maxTokens:2048,prompt:"Write a review for a French restaurant located in Kagurazaka, Tokyo. Looks like an old restaurant, food is traditional, chef is talkative, it is always full. Not expensive, but not fancy.\n"},{id:"article_corrector",name:"Text Corrector",mode:"query",model:Js,temperature:.2,stopSequence:"",maxTokens:2048,prompt:"Fix the grammar and spelling mistakes in this text:\n\nI wake up at eleben yesderday, I will go bed eary tonigt.\n"},{id:"seo_assistant",name:"SEO Optimizer",mode:"query",model:Js,temperature:.6,stopSequence:"",maxTokens:1024,prompt:"For the following article, write a SEO-friendly and short title, keywords for Google, and a short excerpt to introduce it. Use this format:\n\nTitle: \nKeywords: \nExcerpt:\n\nArticle:\nUchiko is located in Ehime prefecture, in the west of the island. The town was prosperous at the end of the 19th century thanks to its production of very good quality white wax. This economic boom allowed wealthy local merchants to build beautiful properties, whose heritage is still visible throughout the town."}],ef=[{id:"default",name:"Default",model:"dall-e-3",maxResults:1,prompt:""},{id:"japan",name:"Ghibli Scene",model:"dall-e-3",maxResults:1,prompt:"Create an image in the style of a Ghibli-inspired anime oil painting, depicting a quaint, old house in the Japanese countryside. This house, reminiscent of a traditional izakaya, is surrounded by lush trees and overlooks vibrant rice fields. The scene is bathed in the warm, soft glow of a setting sun, casting gentle shadows and creating a tranquil, nostalgic atmosphere. The composition should be rich in texture, capturing the serene beauty of rural Japan in a whimsical, Ghibli-like manner."},{id:"steampunk",name:"Steampunk Architecture",model:"dall-e-3",maxResults:1,prompt:"Create an image showcasing steampunk architecture, focusing on the exterior view of a grand theater. The style should reflect award-winning architectural photography from a science fiction magazine. The theater, a masterpiece of steampunk design, combines Victorian influences with futuristic, mechanical elements. Its intricate facade features exposed gears, brass pipes, and steam vents, all integrated into the ornate, classical structure. The building should be set against a dramatic sky, highlighting its unique features and the interplay of light and shadow, capturing the essence of a high-quality, professional architectural photograph."},{id:"nyao-illustration",name:"Nyao Illustration",model:"dall-e-3",maxResults:1,prompt:"The character is an anthropomorphic cat with a whimsical and endearing design, featuring a blend of white and blue fur. The right side of the cat's face has a patch of blue fur that also covers the outer part of the ear, while the left side remains predominantly white, except that the eye is surrounded by a green patch of fur. The tail mirrors this pattern with white fur leading to a blue tip. The character's facial expression is joyous, with a wide, open-mouthed smile showcasing a single front tooth and a small, black nose.  The cat's paws are also white, with defined fingers that suggest human-like dexterity. An orange collar encircles the neck, contrasting with the green and blue tones of the body. This collar is adorned with a blue and white emblem in the center, reminiscent of the WordPress logo. The drawing style of this image can be defined as a digital illustration with a cartoonish and whimsical aesthetic. It features bold outlines, flat colors, and simplified shapes which are typical of contemporary character design aimed at a broad, family-friendly audience. The style is reminiscent of modern vector art, which is often used for web graphics, animation, and media aimed at engaging a casual viewer with its clear, approachable, and vibrant visuals."}],tf=[{id:"default",name:"Default",mode:"single",topic:"",topics:"",topicsAreTitles:!1,title:"",sections:"",model:Js,temperature:.8,maxTokens:2048,sectionsCount:2,paragraphsCount:3,language:"en",customLanguage:"",writingStyle:"creative",writingTone:"cheerful",titlePromptFormat:'Write a title for an article about "{TOPIC}" in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Must be between 40 and 60 characters. Only the title, no formatting, no Markdown, no special characters.',sectionsPromptFormat:'Write {SECTIONS_COUNT} consecutive headings for an article about "{TITLE}", in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Each heading is between 40 and 60 characters. Use Markdown for the headings (## ).',contentPromptFormat:'Write an article about "{TITLE}" in {LANGUAGE}. The article is organized by the following headings:\n\n{SECTIONS}\n\nWrite {PARAGRAPHS_PER_SECTION} paragraphs per heading. Use Markdown for formatting. Add an introduction prefixed by "===INTRO: ", and a conclusion prefixed by "===OUTRO: ". Style: {WRITING_STYLE}. Tone: {WRITING_TONE}.',excerptPromptFormat:'Write an excerpt for an article about "{TITLE}" in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Must be between 40 and 60 characters.'},{id:"",name:"Expore Japan",mode:"single",topic:"Tokyo, its main areas and attractions, one day tour for a first-time visitor. Simple vocabulary, short paragraphs.",topics:"",topicsAreTitles:!1,title:"",sections:"",model:Js,temperature:.8,maxTokens:2048,sectionsCount:3,paragraphsCount:2,language:"en",customLanguage:"",writingStyle:"informative",writingTone:"informal",titlePromptFormat:'Write a title for an article about "{TOPIC}" in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Must be between 40 and 60 characters.',sectionsPromptFormat:'Write {SECTIONS_COUNT} consecutive headings for an article about "{TITLE}", in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Each heading is between 40 and 60 characters. Use Markdown for the headings (## ).',contentPromptFormat:'Write an article about "{TITLE}" in {LANGUAGE}. The article is organized by the following headings:\n\n{SECTIONS}\n\nWrite {PARAGRAPHS_PER_SECTION} paragraphs per heading. Use Markdown for formatting. Add an introduction prefixed by "===INTRO: ", and a conclusion prefixed by "===OUTRO: ". Style: {WRITING_STYLE}. Tone: {WRITING_TONE}.',excerptPromptFormat:'Write an excerpt for an article about "{TITLE}" in {LANGUAGE}. Style: {WRITING_STYLE}. Tone: {WRITING_TONE}. Must be between 40 and 60 characters.'}];function nf(e){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(e)}function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==nf(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||ff(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lf(){lf=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==nf(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(nf(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function cf(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function uf(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cf(o,r,a,i,l,"next",e)}function l(e){cf(o,r,a,i,l,"throw",e)}i(void 0)}))}}function sf(e){return function(e){if(Array.isArray(e))return df(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ff(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ff(e,t){if(e){if("string"==typeof e)return df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?df(e,t):void 0}}function df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mf=wp.element,pf=mf.useState,hf=mf.useEffect,vf=mf.useMemo;function yf(){return(new Date).getTime().toString(36)+Math.random().toString(36).substr(2,9)}var gf=function(e){var t=sf(e);return t.sort((function(e,t){return e.name.localeCompare(t.name)})),t},Ef=function(){var e=uf(lf().mark((function e(t){var n,r,a;return lf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.IU)("".concat(T,"/system/templates?category=").concat(t),{nonce:A});case 3:return n=e.sent,r=[],"imagesGenerator"===t?r=ef:"playground"===t?r=Zs:"contentGenerator"===t&&(r=tf),a=r.find((function(e){return"default"===e.id})),null!=n&&n.templates&&n.templates.length>0&&(r=gf(n.templates)),a?r.forEach((function(e){Object.keys(a).forEach((function(t){void 0===e[t]&&(e[t]=a[t])}))})):console.warn("Default template not found for category: "+t),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();const bf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playground",t=of(pf(),2),n=t[0],r=t[1],a=of(pf(!1),2),o=a[0],i=a[1],l=of(pf([]),2),c=l[0],u=l[1],s=(0,f.I)({queryKey:["templates-".concat(e)],queryFn:function(){return Ef(e)}}),d=s.isLoading,m=s.data;hf((function(){for(var t=0;t<c.length;t++){var n=c[t],r=!1;if(n&&(!n.envId||!n.model)){var a=(null==L?void 0:L.ai_default_env)||null,o=(null==L?void 0:L.ai_default_model)||null;"imagesGenerator"===e&&(o="dall-e-3-hd"),a&&o&&(n.envId=a,n.model=o,r=!0)}r&&u(sf(c))}}),[c]),hf((function(){m&&(u(m),r(m[0]))}),[m]);var p=function(){var t=uf(lf().mark((function t(n){var r;return lf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=gf(n),u(n),t.prev=2,t.next=5,(0,O.IU)("".concat(T,"/system/templates"),{method:"POST",nonce:A,json:{category:e,templates:n}});case 5:return r=t.sent,t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),alert(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),h=vf((function(){if(!n||0===c.length)return!1;if(Object.keys(n).length!==Object.keys(c.find((function(e){return e.id===n.id}))).length)return!0;var e=c.find((function(e){return e.id===n.id}));return Object.keys(e).some((function(t){return e[t]!==n[t]}))}),[n,c]),v=function(){var e=c.find((function(e){return e.id===n.id}));e&&r(af({},e))},y=function(){var e=prompt(He.COMMON.NAME,n.name||He.TEMPLATES.NEW_TEMPLATE_NAME);if(!e)return!1;var t=af(af({},n),{},{id:yf(),name:e});p([].concat(sf(c),[t])),r(af({},t))},g=function(){var e=c.map((function(e){return e.id===n.id?n:e}));p(e),r(af({},n))},E=function(){var e=prompt("Template Name",n.name),t=af(af({},c[0]),{},{id:yf(),name:e});p([].concat(sf(c),[t])),r(af({},t))},b=function(){var e=prompt("Template Name",n.name);if(e){var t=c.map((function(t){return t.id===n.id?af(af({},t),{},{name:e}):t}));p(sf(t)),r(af({},t.find((function(e){return e.id===n.id}))))}},R=function(){if(confirm(He.TEMPLATES.DELETE_ALL_CONFIRM)){var t=[];"imagesGenerator"===e?t=sf(ef):"playground"===e?t=sf(Zs):"contentGenerator"===e&&(t=sf(tf)),p(t),r(af({},t[0]))}},_=vf((function(){return h&&n&&"default"!==n.id}),[h,n]),x=vf((function(){return n&&"default"!==n.id}),[n]),S=vf((function(){return n&&"default"!==n.id}),[n]),N=vf((function(){return React.createElement("div",{style:{margin:"0"}},React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},React.createElement("h3",{style:{margin:0}},He.TEMPLATES.TEMPLATE),React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},React.createElement($t.S,{small:!0,onLabel:He.TEMPLATES.EDIT,offLabel:He.TEMPLATES.EDIT,width:60,onChange:i,checked:o}))),d&&React.createElement("div",{style:{display:"flex",marginTop:30,justifyContent:"center"}},React.createElement("div",{style:{width:60}},React.createElement(Xs.X,{width:20}))),React.createElement(_e.g,null),o&&React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{className:"primary",style:{flex:3},onClick:E},"New"),React.createElement(w.M,{onClick:y,style:{flex:1}},"Duplicate")),React.createElement(_e.g,{tiny:!0})),React.createElement(we.u,{scrolldown:!0,name:"template",value:null==n?void 0:n.id,onChange:function(e){var t=c.find((function(t){return t.id===e}));r(af({},t))}},c.filter((function(e){return"default"!==e.id})).map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})}))),(h||o)&&React.createElement("div",null,React.createElement(_e.g,{tiny:!0}),React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{className:"secondary",style:{flex:1},disabled:!_,onClick:v},"Reset"),React.createElement(w.M,{className:"primary",style:{flex:3},disabled:!_,onClick:g},"Save")),o&&React.createElement(React.Fragment,null,React.createElement(_e.g,{tiny:!0}),React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{small:!0,className:"danger",style:{flex:1},disabled:!S,onClick:function(){return function(e){if(confirm(He.TEMPLATES.DELETE_CONFIRM)){var t=c.filter((function(t){return t.id!==e.id}));p(sf(t)),r(af({},t[0]))}}(n)}},"Delete"),React.createElement(w.M,{small:!0,className:"secondary",style:{flex:3},disabled:!x,onClick:b},"Rename")))),o&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{className:"danger",style:{flex:1},onClick:R},"Reset All Templates"))))}),[c,n,o,h,_,d]);return{template:n,clearTemplate:v,setTemplate:function(e){r(e)},jsxTemplates:N,isEdit:o}};function wf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Of=wp.element,_f=Of.useState,xf=Of.useMemo;const Sf=function(e){var t=wf(_f(0),2),n=t[0],r=t[1],a=wf(_f(0),2),o=a[0],i=a[1],l=function(){r(0),i(0)};return{addUsage:function(t,a,o){var l=e(t,a,o);i(l),r(n+l)},jsxUsageCosts:xf((function(){var e=(0,O.FE)(He.COMMON.USAGE_HELP);return k||(e=React.createElement(React.Fragment,null,e," ",(0,O.FE)(He.COMMON.USAGE_PRO_HELP))),React.createElement(vo,null,React.createElement("h3",null,He.COMMON.USAGE),React.createElement("div",null,"Session: ",React.createElement("span",{style:{float:"right"}},"$",n.toFixed(4))),React.createElement("div",null,"Last Request: ",React.createElement("span",{style:{float:"right"}},"$",o.toFixed(4))),React.createElement(_e.g,{height:30}),React.createElement("p",{style:{fontSize:12,lineHeight:1.2,color:"var(--neko-dark-gray)"}},e),React.createElement(w.M,{fullWidth:!0,onClick:l},"Reset Usage"))}),[n,o])}};function Tf(e){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(e)}var Nf;function Cf(){Cf=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Tf(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Tf(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function If(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function kf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kf(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lf(e,t,n){var r;return r=function(e,t){if("object"!=Tf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Tf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Tf(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jf=wp.element,Ff=jf.useState,Df=jf.useEffect,Uf=(0,U.Ay)(Vt.m)(Nf||(Nf=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  .neko-textarea-container {\n  \n    textarea {\n      color: white;\n      font-size: 13px;\n      padding: 10px;\n      font-family: monospace;\n      background: #333d4e;\n      border: none;\n\n      &:focus {\n        background-color: #333d4e;\n      }\n    }\n  }\n"])));const Gf=function(){var e,t,n,r,a,o,i,l=bf("playground"),c=l.template,u=l.setTemplate,s=l.jsxTemplates,f=Mf(Ff(""),2),d=f[0],p=f[1],h=Mf(Ff(!1),2),v=h[0],g=h[1],b=Mf(Ff(""),2),R=b[0],_=b[1],x=Mf(Ff(),2),S=x[0],N=x[1],C=Mf(Ff(),2),I=C[0],k=C[1],P=null!==(e=null==c?void 0:c.prompt)&&void 0!==e?e:"",F=null!==(t=null==c?void 0:c.model)&&void 0!==t?t:"gpt-3.5-turbo",D=null!==(n=null==c?void 0:c.mode)&&void 0!==n?n:"query",U=null!==(r=null==c?void 0:c.temperature)&&void 0!==r?r:1,G=null!==(a=null==c?void 0:c.envId)&&void 0!==a?a:"",B=null!==(o=null==c?void 0:c.stopSequence)&&void 0!==o?o:"",H=null!==(i=null==c?void 0:c.maxTokens)&&void 0!==i?i:2048,Y=ft(L,G||null),z=Y.calculatePrice,W=Y.completionModels,V=Sf(z),K=V.addUsage,q=V.jsxUsageCosts,X=(null==L?void 0:L.ai_envs)||[],$=function(e,t){u(Af(Af({},c),{},Lf({},t,e)))},Q=function(e){u(Af(Af({},c),{},{prompt:e}))};Df((function(){c&&p("")}),[c]);var J=function(){var e,t=(e=Cf().mark((function e(){var t,n,r,a,o,i,l,c=arguments;return Cf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:P,g(!0),N(new Date),e.prev=3,a=B.replace(/\\n/g,"\n"),o=j?function(e){p(e)}:null,e.next=8,(0,Po.ti)("".concat(T,"/ai/completions"),{scope:"playground",session:M,message:t,temperature:U,envId:G,model:F,maxTokens:H,stop:a,stream:j},A,j);case 8:return i=e.sent,e.next=12,(0,Po.Pn)(i,o,null);case 12:if(!1!==(null==(l=e.sent)?void 0:l.success)){e.next=15;break}throw new Error(null==l?void 0:l.message);case 15:console.log("Completions",{prompt:t,result:l}),"continuous"===D?Q(t+"\n"+l.data+"\n"):p(l.data),K(F,(null==l||null===(n=l.usage)||void 0===n?void 0:n.prompt_tokens)||0,(null==l||null===(r=l.usage)||void 0===r?void 0:r.completion_tokens)||0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),k(e.t0.message);case 23:N(),g(!1);case 25:case"end":return e.stop()}}),e,null,[[3,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){If(o,r,a,i,l,"next",e)}function l(e){If(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return React.createElement(y.z,{nekoErrors:[]},React.createElement(Bt,{title:He.COMMON.PLAYGROUND}),React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0},React.createElement(st,{options:L}),React.createElement(xe.L,{style:{marginBottom:0}},React.createElement(m.s,{p:!0},(0,O.FE)(He.PLAYGROUND.INTRO)))),React.createElement(E.Y,null,React.createElement(vo,null,s)),React.createElement(E.Y,{style:{flex:3}},React.createElement(vo,null,"continuous"!==D&&React.createElement(React.Fragment,null,React.createElement(Uf,{rows:12,onChange:Q,value:P})),"continuous"===D&&React.createElement(React.Fragment,null,React.createElement(Uf,{rows:18,onChange:Q,value:P}),React.createElement("div",{style:{display:"flex"}},React.createElement("span",{className:"dashicons dashicons-format-continuous",style:{position:"absolute",color:"white",zIndex:200,fontSize:28,marginTop:12,marginLeft:10}}),React.createElement(yo,{name:"continuousEntry",value:R,onChange:_,onEnter:function(){var e=P+"Human: "+R;Q(e),_(""),J(e)},disabled:v})))),React.createElement(_e.g,null),(d||v)&&React.createElement(vo,null,React.createElement(Po.CI,{content:d,isStreaming:j&&v}))),React.createElement(E.Y,null,"query"===D&&React.createElement(React.Fragment,null,React.createElement(vo,null,React.createElement(w.M,{fullWidth:!0,onClick:function(){J()},isBusy:v,startTime:S,style:{height:50,fontSize:14,flex:4}},He.COMMON.SUBMIT)),React.createElement(_e.g,null)),React.createElement(vo,null,React.createElement("h3",null,He.COMMON.SETTINGS),React.createElement("label",null,He.COMMON.ENVIRONMENT,":"),React.createElement(we.u,{scrolldown:!0,name:"envId",value:null!=G?G:"",onChange:$},X.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),React.createElement(we.j,{value:"",label:"None"})),React.createElement("label",null,He.COMMON.MODEL,":"),React.createElement(we.u,{name:"model",value:F,scrolldown:!0,onChange:$},W.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})}))),React.createElement("label",null,He.COMMON.TEMPERATURE,":"),React.createElement(Re.A,{name:"temperature",value:U,type:"number",onChange:function(e){return $(parseFloat(e),"temperature")},description:React.createElement(React.Fragment,null,React.createElement("span",{style:{color:U>=0&&U<=1?"inherit":"red"}},He.HELP.TEMPERATURE))}),React.createElement("label",null,He.COMMON.MAX_TOKENS,":"),React.createElement(Re.A,{name:"maxTokens",value:H,type:"number",onChange:function(e){return $(parseInt(e),"maxTokens")},description:React.createElement(React.Fragment,null,React.createElement("span",null,He.HELP.MAX_TOKENS))}),React.createElement("label",null,He.COMMON.STOP_SEQUENCE,":"),React.createElement(Re.A,{name:"stopSequence",value:B,type:"text",onChange:$,description:React.createElement(React.Fragment,null,React.createElement("span",null,He.HELP.STOP_SEQUENCE))})),React.createElement(_e.g,null),q)),React.createElement(Te.n,{isOpen:I,onRequestClose:function(){k()},okButton:{onClick:function(){k()}},title:"Error",content:React.createElement("p",null,I)}))};var Bf,Hf;function Yf(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zf=U.Ay.div(Bf||(Bf=Yf(["\n  margin-bottom: 5px;\n"]))),Wf=U.Ay.div(Hf||(Hf=Yf(["\n  margin-top: 5px;\n  padding: 10px;\n  font-size: 14px;\n  cursor: pointer;\n  background: #dbf2ff;\n\n  &:hover {\n    background: #037cba;\n    color: white;\n  }\n"])));function Vf(e){return Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(e)}function Kf(){Kf=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Vf(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Vf(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function qf(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Xf(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){qf(o,r,a,i,l,"next",e)}function l(e){qf(o,r,a,i,l,"throw",e)}i(void 0)}))}}function $f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jf=wp.element,Zf=Jf.useState,ed=Jf.useEffect,td=Jf.useMemo;const nd=function(e){var t=e.post,n=e.onTitleClick,r=void 0===n?{}:n,a=e.onClose,o=void 0===a?{}:a,i=$f(Zf([]),2),l=i[0],c=i[1],u=$f(Zf(!1),2),s=u[0],f=u[1],d=$f(Zf(!1),2),m=d[0],p=d[1];ed((function(){t&&h(t)}),[t]);var h=function(){var e=Xf(Kf().mark((function e(t){var n,r,a;return Kf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,t.postTitle,f(!0),e.prev=2,e.next=5,(0,O.IU)("".concat(T,"/ai/magic_wand"),{method:"POST",nonce:A,json:{action:"suggestTitles",data:{postId:n}}});case 5:a=e.sent,c(null===(r=a.data)||void 0===r?void 0:r.results),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),p(e.t0.message);case 13:f(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Xf(Kf().mark((function e(t){return Kf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,r(t);case 4:y(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),p(e.t0.message);case 10:f(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Xf(Kf().mark((function e(){return Kf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(),c([]),p(),f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=td((function(){return s?React.createElement(Xs.X,{type:"circle",size:"10%"}):m?React.createElement(React.Fragment,null,"Error: ",m):(null==l?void 0:l.length)>0?React.createElement(React.Fragment,null,"Pick a new title by clicking on it.",React.createElement(zf,null,l.map((function(e){return React.createElement(Wf,{key:e,onClick:function(){v(e)}},e)})))):React.createElement(React.Fragment,null,"Nothing to display.")}),[s,l,m]);return React.createElement(E.N,null,React.createElement(Te.n,{isOpen:t,onRequestClose:y,title:'New title for "'.concat(null==t?void 0:t.postTitle,'"'),content:g,okButton:{label:"Close",onClick:y}}))};function rd(e){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(e)}function ad(){ad=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==rd(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(rd(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function od(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function id(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){od(o,r,a,i,l,"next",e)}function l(e){od(o,r,a,i,l,"throw",e)}i(void 0)}))}}function ld(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ud=wp.element,sd=ud.useState,fd=ud.useEffect,dd=ud.useMemo;const md=function(e){var t=e.post,n=e.onExcerptClick,r=void 0===n?{}:n,a=e.onClose,o=void 0===a?{}:a,i=ld(sd([]),2),l=i[0],c=i[1],u=ld(sd(!1),2),s=u[0],f=u[1],d=ld(sd(!1),2),m=d[0],p=d[1];fd((function(){t&&h(t)}),[t]);var h=function(){var e=id(ad().mark((function e(t){var n,r,a;return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,f(!0),e.prev=2,e.next=5,(0,O.IU)("".concat(T,"/ai/magic_wand"),{method:"POST",nonce:A,json:{action:"suggestExcerpts",data:{postId:n}}});case 5:a=e.sent,c(null===(r=a.data)||void 0===r?void 0:r.results),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),p(e.t0.message);case 13:f(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=id(ad().mark((function e(t){return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,r(t);case 4:y(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),p(e.t0.message);case 10:f(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=id(ad().mark((function e(){return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(),c([]),p(),f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=dd((function(){return s?React.createElement(Xs.X,{type:"circle",size:"10%"}):m?React.createElement(React.Fragment,null,"Error: ",m):(null==l?void 0:l.length)>0?React.createElement(React.Fragment,null,"Pick a new excerpt by clicking on it.",React.createElement(zf,null,l.map((function(e){return React.createElement(Wf,{key:e,onClick:function(){v(e)}},e)})))):React.createElement(React.Fragment,null,"Nothing to display.")}),[s,l,m]);return React.createElement(E.N,null,React.createElement(Te.n,{isOpen:t,onRequestClose:y,title:'New excerpt for "'.concat(null==t?void 0:t.postTitle,'"'),content:g,okButton:{label:"Close",onClick:y}}))};function pd(e){return pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(e)}function hd(){hd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==pd(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(pd(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function vd(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function yd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){vd(o,r,a,i,l,"next",e)}function l(e){vd(o,r,a,i,l,"throw",e)}i(void 0)}))}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ed=wp.element,bd=Ed.useState,wd=Ed.useEffect;const Rd=function(){var e,t,n=(e=bd(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],a=n[1];wd((function(){document.querySelectorAll(".mwai-link-title").forEach((function(e){var t=e.getAttribute("data-id"),n=e.getAttribute("data-title");e.addEventListener("click",(function(){a({postId:t,postTitle:n,mode:"title"})}),!1)})),document.querySelectorAll(".mwai-link-excerpt").forEach((function(e){var t=e.getAttribute("data-id"),n=e.getAttribute("data-title");e.addEventListener("click",(function(){a({postId:t,postTitle:n,mode:"excerpt"})}),!1)}))}),[]);var o=function(){var e=yd(hd().mark((function e(t){var n,o,i,l;return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/helpers/update_post_title"),{method:"POST",nonce:A,json:{postId:r.postId,title:t}});case 2:if((n=e.sent).success){e.next=7;break}throw new Error(n.message);case 7:a(),(o=document.querySelector('tr[id="post-'.concat(r.postId,'"]')))&&(i=o.querySelector(".row-title"))&&(i.innerHTML=t),(l=o.querySelector(".hidden .post_title"))&&(l.innerHTML=t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=yd(hd().mark((function e(t){var n;return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.IU)("".concat(T,"/helpers/update_post_excerpt"),{method:"POST",nonce:A,json:{postId:r.postId,excerpt:t}});case 2:if((n=e.sent).success){e.next=7;break}throw new Error(n.message);case 7:a();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return React.createElement(s.A,null,React.createElement(E.N,null,React.createElement(nd,{post:"title"===(null==r?void 0:r.mode)?r:null,onTitleClick:o,onClose:function(){a()}}),React.createElement(md,{post:"excerpt"===(null==r?void 0:r.mode)?r:null,onExcerptClick:i,onClose:function(){a()}})))};function Od(e){return Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(e)}function _d(){_d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Od(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Od(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function xd(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Sd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xd(o,r,a,i,l,"next",e)}function l(e){xd(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){Cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cd(e,t,n){var r;return r=function(e,t){if("object"!=Od(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Od(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Id(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||kd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kd(e,t){if(e){if("string"==typeof e)return Ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ad(e,t):void 0}}function Ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ld=wp.element,Md=Ld.useState,Pd=Ld.useEffect,jd=Ld.useMemo;const Fd=function(){var e,t,n,r,a,o,i,l,c,u,s,d,p,h,g,b,R,_,x,S=Id(Md(""),2),N=S[0],C=S[1],I=Id(Md(""),2),k=I[0],P=I[1],j=bf("contentGenerator"),F=j.template,D=j.setTemplate,U=j.clearTemplate,G=j.jsxTemplates,B=(0,en.XS)(),H=Id(Md(!1),2),Y=H[0],z=H[1],W=Id(Md(),2),V=W[0],K=W[1],q=Id(Md(!1),2),X=q[0],$=q[1],Q=Id(Md(!1),2),J=Q[0],Z=Q[1],ee=Id(Md(!1),2),te=ee[0],ne=ee[1],re=Id(Md(),2),ae=re[0],oe=re[1],ie=Id(Md("post"),2),le=ie[0],ce=ie[1],ue=Id(Md([]),2),se=ue[0],fe=ue[1],de=Id(Md([]),2),me=de[0],pe=de[1],he=Id(Md({}),2),ve=he[0],ye=he[1],ge=(0,f.I)({queryKey:["postTypes"],queryFn:on}),Ee=ge.isLoading,be=ge.data,Oe=B.busy||Y||Ee,xe=null!==(e=null==F?void 0:F.title)&&void 0!==e?e:"",Se=null!==(t=null==F?void 0:F.sections)&&void 0!==t?t:"",Ne=null!==(n=null==F?void 0:F.mode)&&void 0!==n?n:"single",Ce=null!==(r=null==F?void 0:F.topic)&&void 0!==r?r:"",Ie=null!==(a=null==F?void 0:F.topics)&&void 0!==a?a:"",ke=null!==(o=null!==(i=null==F?void 0:F.model)&&void 0!==i?i:null==L?void 0:L.ai_default_model)&&void 0!==o?o:null,Ae=null!==(l=null==F?void 0:F.sectionsCount)&&void 0!==l?l:2,Le=null!==(c=null==F?void 0:F.paragraphsCount)&&void 0!==c?c:3,Me=null!==(u=null==F?void 0:F.writingStyle)&&void 0!==u?u:"creative",Pe=null!==(s=null==F?void 0:F.writingTone)&&void 0!==s?s:"cheerful",je=null!==(d=null==F?void 0:F.titlePromptFormat)&&void 0!==d?d:"",Fe=null!==(p=null==F?void 0:F.sectionsPromptFormat)&&void 0!==p?p:"",De=null!==(h=null==F?void 0:F.contentPromptFormat)&&void 0!==h?h:"",Ue=null!==(g=null==F?void 0:F.excerptPromptFormat)&&void 0!==g?g:"",Ge=null!==(b=null==F?void 0:F.envId)&&void 0!==b?b:"",Be=null!==(R=null==F?void 0:F.temperature)&&void 0!==R?R:.6,Ye=null==F?void 0:F.maxTokens,ze=null!==(_=null==F?void 0:F.topicsAreTitles)&&void 0!==_&&_,We=!Fe||!Ae,Ve=null!==(x=null==F?void 0:F.useMaxTokens)&&void 0!==x&&x,Ke=ft(L,Ge||null),qe=Ke.completionModels,Xe=Ke.calculatePrice,$e=Sf(Xe),Qe=$e.addUsage,Je=$e.jsxUsageCosts,Ze=(null==L?void 0:L.ai_envs)||[],et=function(e){var t=e.disabled,n=e.options,r=e.language,a=e.customLanguage,o=nt(lt(null!=r?r:"en"),2),i=o[0],l=o[1],c=nt(lt(!1),2),u=c[0],s=c[1],f=nt(lt(""),2),d=f[0],m=f[1],p=(null==n?void 0:n.languages)||[],h=it((function(){return Object.keys(p).map((function(e){return{value:e,label:p[e]}}))}),[p]);ct((function(){a?(s(!0),m(a)):(s(!1),m(""),l(null!=r?r:"en"))}),[a]),ct((function(){l(r)}),[r]),ct((function(){var e=localStorage.getItem("mwai_preferred_language");if(e&&h.find((function(t){return t.value===e})))l(e);else{var t=(document.querySelector("html").lang||navigator.language||navigator.userLanguage).substr(0,2);h.find((function(e){return e.value===t}))&&l(t)}}),[]);var v=it((function(){if(u)return d;var e=h.find((function(e){return e.value===i}));return e?e.label:(console.warn("A system language or a custom language should be set."),"English")}),[i,d]),y=function(e,t){"custom"!==e?(l(e,t),localStorage.setItem("mwai_preferred_language",e)):s(!0)};return{jsxLanguageSelector:it((function(){return React.createElement(React.Fragment,null,u&&React.createElement(Re.A,{name:"customLanguage",disabled:t,onReset:function(){s(!1)},description:(0,O.FE)(He.CONTENT_GENERATOR.CUSTOM_LANGUAGE_HELP),value:d,onChange:m}),!u&&React.createElement(we.u,{scrolldown:!0,name:"language",disabled:t,description:(0,O.FE)(He.CONTENT_GENERATOR.CUSTOM_LANGUAGE_HELP),value:i,onChange:y},h.map((function(e){return React.createElement(we.j,{key:e.value,value:e.value,label:e.label})})),React.createElement(we.j,{key:"custom",value:"custom",label:"Other"})))}),[i,v,h,u]),currentLanguage:u?"custom":i,currentHumanLanguage:v,isCustom:u}}({options:L,language:null==F?void 0:F.language,customLanguage:null==F?void 0:F.customLanguage}),tt=et.jsxLanguageSelector,rt=et.currentLanguage,at=et.isCustom,ot=et.currentHumanLanguage,ut=jd((function(){return function(e){if(!e)return null;var t=e.split(" ").length,n=e.length,r=[];return n?(t<3?r.push(He.CONTENT_GENERATOR.TITLE_TOO_SHORT):t>8?r.push(He.CONTENT_GENERATOR.TITLE_TOO_LONG):n<40?r.push(He.CONTENT_GENERATOR.TITLE_TOO_SHORT):n>70&&r.push(He.CONTENT_GENERATOR.TITLE_TOO_LONG_2),r.join(" ")):void 0}(xe)}),[xe]),dt=function(e,t){D((function(n){return Nd(Nd({},n),{},Cd({},t,e))}))};Pd((function(){var e=Ie.split("\n").map((function(e){return e.trim()})).filter((function(e){return!!e}));fe(e)}),[Ie]),Pd((function(){F&&dt("","sections")}),[xe,Ae]),Pd((function(){C(""),P(""),oe()}),[Se,Le]),Pd((function(){F&&(!at&&F.customLanguage&&dt(null,"customLanguage"),at&&F.customLanguage!==ot&&dt(ot,"customLanguage"),F.language!==rt&&dt(rt,"language"))}),[at,rt,ot]);var mt=function(e){return e.replace("{LANGUAGE}",ot).replace("{WRITING_STYLE}",Me).replace("{WRITING_TONE}",Pe).replace("{PARAGRAPHS_PER_SECTION}",Le).replace("{SECTIONS_COUNT}",Ae)},pt=jd((function(){var e=function(e,t){return!!t.find((function(t){return t.includes(e)}))},t=[je,Fe,De,Ue];return{language:e("{LANGUAGE}",t),writingStyle:e("{WRITING_STYLE}",t),writingTone:e("{WRITING_TONE}",t),sectionsCount:e("{SECTIONS_COUNT}",t),paragraphsCount:e("{PARAGRAPHS_PER_SECTION}",t)}}),[je,Fe,De,Ue,Ae,Le]),ht=function(){var e=Sd(_d().mark((function e(t){var n,r,a,o,i,l,c=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,o={scope:"admin-tools",envId:Ge||null,model:ke||null,session:M,message:t,temperature:Be},Ve&&Ye&&(o.maxTokens=Ye),e.next=6,(0,O.IU)("".concat(T,"/ai/completions"),{method:"POST",nonce:A,json:o});case 6:return i=e.sent,Qe(ke,(null==i||null===(r=i.usage)||void 0===r?void 0:r.prompt_tokens)||0,(null==i||null===(a=i.usage)||void 0===a?void 0:a.completion_tokens)||0),(l=i.data.trim()).startsWith('"')&&l.endsWith('"')&&(l=l.substring(1,l.length-1)),e.abrupt("return",l);case 13:if(e.prev=13,e.t0=e.catch(1),!n){e.next=17;break}throw new Error(e.t0.message);case 17:return console.error(e.t0),K(e.t0.message),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=Sd(_d().mark((function e(){var t,n,r,a,o,i=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:Ce,r=i.length>2&&void 0!==i[2]&&i[2],n=i.length>1&&void 0!==i[1]?i[1]:xe){e.next=6;break}return alert(He.CONTENT_GENERATOR.TITLE_MISSING),e.abrupt("return");case 6:return z(!0),dt("","sections"),a=Fe.replace("{TITLE}",n).replace("{TOPIC}",t),a=mt(a),e.next=12,ht(a,r);case 12:return(o=(l=o=e.sent)?l.split("\n").map((function(e){return(e=e.replace(/^\d+\.\s/,"")).startsWith('"')&&(e=e.slice(1)).endsWith('"')&&(e=e.slice(0,-1)),e})).filter((function(e){return e})).join("\n"):l)&&dt(o,"sections"),z(!1),e.abrupt("return",o);case 17:case"end":return e.stop()}var l}),e)})));return function(){return e.apply(this,arguments)}}(),yt=function(){var e=Sd(_d().mark((function e(){var t,n,r,a,o,i,l=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:Ce,r=l.length>2&&void 0!==l[2]?l[2]:Se,a=l.length>3&&void 0!==l[3]&&l[3],n=l.length>1&&void 0!==l[1]?l[1]:xe){e.next=7;break}return alert(He.CONTENT_GENERATOR.TITLE_MISSING),e.abrupt("return");case 7:if(We||r){e.next=10;break}return alert(He.CONTENT_GENERATOR.SECTIONS_MISSING),e.abrupt("return");case 10:return z(!0),C((function(){return""})),o=De.replace("{TITLE}",n).replace("{SECTIONS}",r).replace("{TOPIC}",t),o=mt(o),e.next=16,ht(o,a);case 16:return(i=e.sent)&&(i=i.replace(/^===INTRO:\n/,"").replace(/^===INTRO: \n/,"").replace(/===INTRO: /,"").replace(/===OUTRO:\n/,"").replace(/===OUTRO: \n/,"").replace(/===OUTRO: /,""),C((function(){return i}))),z(!1),e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gt=function(){var e=Sd(_d().mark((function e(){var t,n,r,a,o,i=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:Ce,r=i.length>2&&void 0!==i[2]&&i[2],n=i.length>1&&void 0!==i[1]?i[1]:xe){e.next=6;break}return alert(He.CONTENT_GENERATOR.TITLE_MISSING),e.abrupt("return");case 6:return z(!0),P((function(){return""})),a=Ue.replace("{TITLE}",n).replace("{TOPIC}",t),a=mt(a),e.next=12,ht(a,r);case 12:return(o=e.sent)&&P((function(){return o})),z(!1),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Et=function(){var e=Sd(_d().mark((function e(){var t,n,r,a,o,i,l,c=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:Ce,n=c.length>1&&void 0!==c[1]&&c[1],z(!0),ye(Nd(Nd({},ve),{},{all:new Date})),e.prev=4,r=t,ze&&n){e.next=11;break}return a=mt(je.replace("{TOPIC}",t)),e.next=10,ht(a,n);case 10:r=e.sent;case 11:if(o=null,i=null,l=null,z(!1),!r){e.next=35;break}if(dt(r,"title"),We){e.next=23;break}return ye((function(e){return Nd(Nd({},e),{},{sections:new Date})})),e.next=21,vt(t,r,n);case 21:o=e.sent,ye((function(e){return Nd(Nd({},e),{},{sections:null})}));case 23:if(!o&&!We){e.next=35;break}return ye((function(e){return Nd(Nd({},e),{},{content:new Date})})),e.next=27,yt(t,r,o,n);case 27:if(i=e.sent,ye((function(e){return Nd(Nd({},e),{},{content:null})})),!i){e.next=35;break}return ye((function(e){return Nd(Nd({},e),{},{excerpt:new Date})})),e.next=33,gt(t,r,n);case 33:l=e.sent,ye((function(e){return Nd(Nd({},e),{},{excerpt:null})}));case 35:return e.abrupt("return",{title:r,heads:o,content:i,excerpt:l});case 38:throw e.prev=38,e.t0=e.catch(4),console.error(e.t0),z(!1),ye({}),e.t0;case 44:case"end":return e.stop()}}),e,null,[[4,38]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=Sd(_d().mark((function e(){var t,n,r,a,o,i=arguments;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:xe,n=i.length>1&&void 0!==i[1]?i[1]:N,r=i.length>2&&void 0!==i[2]?i[2]:k,a=i.length>3&&void 0!==i[3]&&i[3],z(!0),e.prev=5,e.next=8,(0,O.IU)("".concat(T,"/helpers/create_post"),{method:"POST",nonce:A,json:{title:t,content:n,excerpt:r,postType:le}});case 8:return o=e.sent,a||oe(o.postId),e.abrupt("return",o.postId);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),K(e.t0.message),e.abrupt("return",null);case 18:return e.prev=18,z(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,13,18,21]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=Sd(_d().mark((function e(){var t;return _d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe([]),t=se.map((function(e,t){return Sd(_d().mark((function n(){var r,a,o,i,l;return _d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Topic "+t),n.prev=1,n.next=4,Et(e,!0);case 4:if(r=n.sent,a=r.title,o=r.content,i=r.excerpt,!(a&&o&&i)){n.next=15;break}return n.next=11,bt(a,o,i,!0);case 11:l=n.sent,pe((function(t){return[].concat(function(e){if(Array.isArray(e))return Ad(e)}(n=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||kd(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{postId:l,topic:e,title:a,content:o,excerpt:i}]);var n})),n.next=16;break;case 15:console.warn("Could not generate the post for: "+e);case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),confirm("An error was caught ("+n.t0.message+"). Should we continue?")||(B.stop(),B.reset(),z(!1));case 21:return n.abrupt("return",{success:!0});case 22:case"end":return n.stop()}}),n,null,[[1,18]])})))})),e.next=4,B.start(t);case 4:B.reset();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(y.z,{nekoErrors:[]},React.createElement(Bt,{title:He.COMMON.CONTENT_GENERATOR}),React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0},React.createElement(st,{options:L}),React.createElement(m.s,{p:!0,style:{marginTop:0,marginBottom:0}},(0,O.FE)(He.CONTENT_GENERATOR.INTRO))),React.createElement(E.Y,{style:{flex:1}},React.createElement(vo,null,React.createElement("h2",{style:{marginTop:0}},"Topic"),React.createElement(Vt.m,{name:"topic",disabled:Oe||"bulk"===Ne,rows:5,value:Ce,onChange:dt}),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,disabled:!Ce||"bulk"===Ne,isBusy:Oe,startTime:null==ve?void 0:ve.all,onClick:function(){return Et()}},He.COMMON.GENERATE)),React.createElement(_e.g,null),React.createElement(vo,null,G)),React.createElement(E.Y,{style:{flex:3}},React.createElement(Kt.o,{name:"mode",value:Ne,disabled:Oe,onChange:dt},React.createElement(Kt.K,{title:He.CONTENT_GENERATOR.SINGLE_GENERATE,value:"single"}),React.createElement(Kt.K,{title:He.CONTENT_GENERATOR.BULK_GENERATE,value:"bulk",count:se.length})),React.createElement(_e.g,null),"bulk"===Ne&&React.createElement(vo,null,React.createElement("p",{style:{marginTop:0,marginBottom:20}},(0,O.FE)(He.CONTENT_GENERATOR.TOPICS_HELP)),React.createElement("div",{style:{display:"flex"}},React.createElement(w.M,{disabled:Oe||!se.length,onClick:wt},He.COMMON.GENERATE),React.createElement(Zt.j,{busy:B.busy,style:{marginLeft:10,flex:"auto"},value:B.value,max:B.max,onStopClick:B.stop})),React.createElement(_e.g,null),React.createElement("h3",null,"Topics"),React.createElement(Vt.m,{name:"topics",rows:10,value:Ie,onChange:dt}),React.createElement(v.R,{name:"topicsAreTitles",label:"Use Topics as Titles",value:"1",checked:ze,onChange:dt}),React.createElement("h3",null,He.CONTENT_GENERATOR.GENERATED_POSTS),!me.length&&React.createElement("i",null,"Nothing yet."),me.length>0&&React.createElement("ul",null,me.map((function(e){return React.createElement("li",{key:e.postId},e.title," ",React.createElement("a",{target:"_blank",href:"/?p=".concat(e.postId),rel:"noreferrer"},"View")," ","or"," ",React.createElement("a",{target:"_blank",href:"/wp-admin/post.php?post=".concat(e.postId,"&action=edit"),rel:"noreferrer"},"Edit"))})))),"single"===Ne&&React.createElement(vo,null,React.createElement("h2",{style:{marginTop:0}},"Title"),React.createElement(Re.A,{name:"title",disabled:Oe,value:xe,onChange:dt}),ut&&React.createElement("div",{className:"information"},"Advice: ",ut),Fe&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Ht,null,React.createElement("h2",null,He.CONTENT_GENERATOR.SECTIONS),React.createElement("div",{style:{display:"flex",alignItems:"center"}},pt.sectionsCount&&React.createElement(React.Fragment,null,React.createElement("label",{style:{margin:"0 5px 0 0"}},"# of Sections:"," "),React.createElement(we.u,{scrolldown:!0,name:"sectionsCount",disabled:Oe,style:{marginRight:10},value:Ae,description:"",onChange:dt},[2,3,4,6,8,10,12].map((function(e){return React.createElement(we.j,{key:e,value:e,label:e})})))),Ae>0&&React.createElement(w.M,{disabled:!xe,isBusy:Oe,startTime:null==ve?void 0:ve.sections,onClick:function(){return vt()}},He.CONTENT_GENERATOR.GENERATE_SECTIONS))),Ae>0&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Vt.m,{name:"sections",disabled:Oe,rows:4,value:Se,description:He.CONTENT_GENERATOR.SECTIONS_HELP,onChange:dt}))),React.createElement(_e.g,null),React.createElement(Ht,null,React.createElement("h2",null,He.COMMON.CONTENT),React.createElement("div",{style:{display:"flex",alignItems:"center"}},pt.paragraphsCount&&React.createElement(React.Fragment,null,React.createElement("label",{style:{margin:"0 5px 0 0"}},He.CONTENT_GENERATOR.PARAGRAPHS_PER_SECTION,":"),React.createElement(we.u,{scrolldown:!0,name:"paragraphsCount",disabled:Oe,style:{marginRight:10},value:Le,description:"",onChange:dt},[1,2,3,4,6,8,10].map((function(e){return React.createElement(we.j,{key:e,value:e,label:e})})))),React.createElement(w.M,{disabled:!xe,isBusy:Oe,startTime:null==ve?void 0:ve.content,onClick:function(){return yt()}},He.CONTENT_GENERATOR.GENERATE_CONTENT))),React.createElement(_e.g,null),React.createElement(Vt.m,{countable:"words",disabled:Oe,rows:12,value:N,description:He.CONTENT_GENERATOR.CONTENT_HELP,onChange:C}),React.createElement(_e.g,null),React.createElement(Ht,null,React.createElement("h2",null,He.COMMON.EXCERPT),React.createElement(w.M,{disabled:!xe,isBusy:Oe,startTime:null==ve?void 0:ve.excerpt,onClick:function(){return gt()}},He.CONTENT_GENERATOR.GENERATE_EXCERPT)),React.createElement(_e.g,null),React.createElement(Vt.m,{disabled:Oe,value:k,onBlur:P,rows:3}),React.createElement(_e.g,{line:!0,height:40}),React.createElement(we.u,{scrolldown:!0,disabled:Oe,name:"postType",onChange:ce,value:le},null==be?void 0:be.map((function(e){return React.createElement(we.j,{key:e.type,value:e.type,label:e.name})}))),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,style:{height:60},onClick:function(){return bt()},isBusy:Oe,disabled:!xe||!N},He.CONTENT_GENERATOR.CREATE_POST))),React.createElement(E.Y,null,React.createElement(vo,null,React.createElement("h2",{style:{marginTop:0}},He.CONTENT_GENERATOR.CONTENT_PARAMS),!pt.language&&!pt.writingStyle&&!pt.writingTone&&React.createElement("div",{style:{fontSize:11,lineHeight:"14px"}},He.CONTENT_GENERATOR.CONTENT_PARAMS_INTRO),pt.language&&React.createElement(React.Fragment,null,React.createElement("label",null,He.COMMON.LANGUAGE,":"),tt),pt.writingStyle&&React.createElement(React.Fragment,null,React.createElement("label",null,He.CONTENT_GENERATOR.WRITING_STYLE,":"),React.createElement(we.u,{scrolldown:!0,name:"writingStyle",disabled:Oe,value:Me,description:"",onChange:dt},$s.map((function(e){return React.createElement(we.j,{key:e.value,value:e.value,label:e.label})})))),pt.writingTone&&React.createElement(React.Fragment,null,React.createElement("label",null,He.CONTENT_GENERATOR.WRITING_TONE,":"),React.createElement(we.u,{scrolldown:!0,name:"writingTone",disabled:Oe,value:Pe,description:"",onChange:dt},Qs.map((function(e){return React.createElement(we.j,{key:e.value,value:e.value,label:e.label})}))))),React.createElement(_e.g,null),React.createElement(vo,null,React.createElement(Ht,null,React.createElement("h2",null,He.CONTENT_GENERATOR.POST_PARAMS),React.createElement(w.M,{onClick:function(){return Z(!J)}},J?He.COMMON.HIDE:He.COMMON.SHOW)),J&&React.createElement(React.Fragment,null,React.createElement("label",null,He.COMMON.POST_TYPE,":"),React.createElement(we.u,{scrolldown:!0,disabled:Oe,name:"postType",onChange:ce,value:le},null==be?void 0:be.map((function(e){return React.createElement(we.j,{key:e.type,value:e.type,label:e.name})}))))),React.createElement(_e.g,null),React.createElement(vo,null,React.createElement(Ht,null,React.createElement("h2",null,He.COMMON.MODEL_PARAMS),React.createElement(w.M,{onClick:function(){return $(!X)}},X?He.COMMON.HIDE:He.COMMON.SHOW)),X&&React.createElement(React.Fragment,null,React.createElement("label",null,He.COMMON.ENVIRONMENT,":"),React.createElement(we.u,{scrolldown:!0,name:"envId",value:null!=Ge?Ge:"",onChange:dt},Ze.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),React.createElement(we.j,{value:"",label:"None"})),React.createElement("label",null,He.COMMON.MODEL,":"),React.createElement(we.u,{name:"model",value:ke,description:He.CONTENT_GENERATOR.MODEL_HELP,scrolldown:!0,onChange:dt},qe.map((function(e){return React.createElement(we.j,{key:e,value:e.model,label:e.name})}))),React.createElement("label",null,He.COMMON.TEMPERATURE,":"),React.createElement(Re.A,{name:"temperature",value:Be,type:"number",onChange:dt,onBlur:dt,description:He.HELP.TEMPERATURE}),React.createElement(v.R,{name:"useMaxTokens",label:"Use Max Tokens",value:"1",checked:Ve,onChange:dt}),React.createElement("label",null,He.COMMON.MAX_TOKENS,":"),React.createElement(Re.A,{name:"maxTokens",value:null!=Ye?Ye:"",type:"number",onChange:dt,onBlur:dt,description:He.HELP.MAX_TOKENS,disabled:!Ve}))),React.createElement(_e.g,null),React.createElement(vo,null,React.createElement(Ht,null,React.createElement("h2",null,(0,O.FE)(He.COMMON.PROMPTS)),React.createElement(w.M,{onClick:function(){return ne(!te)}},te?"Hide":"Show")),te&&React.createElement(React.Fragment,null,React.createElement("p",{style:{fontSize:11,lineHeight:"14px"}},He.CONTENT_GENERATOR.PROMPTS_INTRO),React.createElement("label",null,(0,O.FE)(He.CONTENT_GENERATOR.PROMPT_TITLE)),React.createElement(Vt.m,{disabled:Oe,name:"titlePromptFormat",value:je,onChange:dt}),React.createElement("label",null,(0,O.FE)(He.CONTENT_GENERATOR.PROMPT_SECTIONS)),React.createElement(Vt.m,{disabled:Oe,name:"sectionsPromptFormat",value:Fe,onChange:dt}),React.createElement("label",null,(0,O.FE)(He.CONTENT_GENERATOR.PROMPT_CONTENT)),React.createElement(Vt.m,{disabled:Oe,name:"contentPromptFormat",value:De,onChange:dt}),React.createElement("label",null,(0,O.FE)(He.CONTENT_GENERATOR.PROMPT_EXCERPT)),React.createElement(Vt.m,{disabled:Oe,name:"excerptPromptFormat",value:Ue,onChange:dt}))),React.createElement(_e.g,null),Je)),React.createElement(Te.n,{isOpen:ae,onRequestClose:function(){return oe()},okButton:{label:He.CONTENT_GENERATOR.EDIT_POST,onClick:function(){window.open("/wp-admin/post.php?post=".concat(ae,"&action=edit"),"_blank"),U(),oe()}},cancelButton:{label:"Close",onClick:function(){oe()}},title:He.CONTENT_GENERATOR.POST_CREATED,content:React.createElement("p",null,He.CONTENT_GENERATOR.POST_CREATED_AS_DRAFT)}),React.createElement(Te.n,{isOpen:V,onRequestClose:function(){K()},okButton:{onClick:function(){K()}},title:"Error",content:React.createElement("p",null,V)}))};function Dd(e){return Dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(e)}var Ud;function Gd(){Gd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Dd(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Dd(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Bd(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Hd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bd(o,r,a,i,l,"next",e)}function l(e){Bd(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Yd(e){return function(e){if(Array.isArray(e))return Xd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){Vd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vd(e,t,n){var r;return r=function(e,t){if("object"!=Dd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Dd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Dd(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||qd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qd(e,t){if(e){if("string"==typeof e)return Xd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xd(e,t):void 0}}function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $d=wp.element,Qd=$d.useState,Jd=$d.useEffect,Zd=$d.useMemo,em=[1,2,3,4,5,6,7,8,9,10,12,14,16,18,20,40,60,80,100],tm=U.Ay.div(Ud||(Ud=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin-bottom: 5px;\n  label {\n    margin-bottom: 5px;\n    display: block;\n  }\n"])));const nm=function(){var e,t,n,r,a=bf("imagesGenerator"),o=a.template,i=a.setTemplate,l=a.jsxTemplates,c=Kd(Qd(),2),u=c[0],s=c[1],f=Kd(Qd(!0),2),d=f[0],p=f[1],h=Kd(Qd(!1),2),g=h[0],b=h[1],R=Kd(Qd(!1),2),_=R[0],x=R[1],S=(null==L?void 0:L.ai_envs)||[],N=ft(L,(null==o?void 0:o.envId)||null),C=N.imageModels,I=(0,N.getModel)(null==o?void 0:o.model),k=Kd(Qd([]),2),P=k[0],j=k[1],F=Kd(Qd([]),2),D=F[0],U=F[1],G=Kd(Qd(),2),B=G[0],H=G[1],Y=Kd(Qd(""),2),z=Y[0],W=Y[1],V=Kd(Qd(""),2),K=V[0],q=V[1],X=Kd(Qd(""),2),$=X[0],Q=X[1],J=Kd(Qd(""),2),Z=J[0],ee=J[1],te=Kd(Qd(""),2),ne=te[0],re=te[1],ae=Kd(Qd([]),2),oe=ae[0],ie=ae[1],le=Zd((function(){return D.indexOf(B)}),[B,D]),ce=null==o?void 0:o.prompt,ue=Kd(Qd(1),2),se=ue[0],fe=ue[1],de=Kd(Qd(0),2),me=de[0],pe=de[1],he=Kd(Qd(0),2),ve=he[0],ye=he[1],ge=new AbortController,Ee=null!==(e=null==o?void 0:o.style)&&void 0!==e?e:null,be=function(e,t){i((function(n){return Wd(Wd({},n),{},Vd({},t,e))}))};Jd((function(){var e;if(null!=o&&o.envId&&(null==o||!o.model)&&(null==C?void 0:C.length)>0){var t=C.find((function(e){return"dall-e-3"===e.model}))||C[0];i(Wd(Wd({},o),{},{model:t.model}))}if(null!=o&&o.model&&(null==o||!o.resolution)&&(null==I||null===(e=I.resolutions)||void 0===e?void 0:e.length)>0){var n=I.resolutions.map((function(e){return e.name})),r=n.includes("1024x1024")?"1024x1024":n[0];i(Wd(Wd({},o),{},{resolution:r}))}}),[o]),Jd((function(){if(B){var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:42,n=e.replace(/[\s|,]+/g,"-"),r=(n=n.replace(/--+/g,"-")).split("-"),a=r[0],o=1;o<r.length&&r[o]&&a.length+r[o].length<t;)a+="-"+r[o],o++;return a.length>t+1&&(a=a.slice(0,t+2)),a}(ce)+".png";re(e),W(ce),q(ce),Q(ce),ee(ce)}}),[B]);var Oe=function(){if(ce){for(var e=function(){var e={prompt:ce,envId:o.envId,model:o.model,resolution:o.resolution,style:o.style};j((function(t){return[].concat(Yd(t),[e])}))},t=0;t<se;t++)e();pe((function(e){return e+se}))}else console.error("Prompt is empty, cannot add to queue.")},Se=function(){var e=Hd(Gd().mark((function e(){var t,n;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==P.length&&!g){e.next=2;break}return e.abrupt("return");case 2:return b(!0),t=P[0],e.prev=4,e.next=7,(0,O.IU)("".concat(T,"/ai/images"),{method:"POST",nonce:A,signal:ge.signal,json:{env:"admin-tools",envId:t.envId,model:t.model,resolution:t.resolution,style:t.style,scope:"admin-tools",session:M,message:t.prompt,maxResults:1}});case 7:(n=e.sent).data&&n.data.length>0&&U((function(e){return[].concat(Yd(e),[n.data[0]])})),j((function(e){return e.slice(1)})),ye((function(e){return e+1})),1===P.length&&(pe(0),ye(0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),"AbortError"!==e.t0.name&&(console.error(e.t0),s(e.t0.message+(P.length>1?" The other tasks will continue.":"")),j((function(e){return e.slice(1)})),pe((function(e){return e-1})));case 17:return e.prev=17,b(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(){return e.apply(this,arguments)}}();Jd((function(){P.length>0&&!g&&Se()}),[P,g]);var Ce=function(){var e=Hd(Gd().mark((function e(){var t;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,(0,O.IU)("".concat(T,"/helpers/create_image"),{method:"POST",nonce:A,json:{url:B,title:z,description:K,caption:$,alt:Z,filename:ne}});case 4:t=e.sent,ie([].concat(Yd(oe),[{id:t.attachmentId,url:B}])),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),s(e.t0.message);case 12:return e.prev=12,x(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),Ie=Zd((function(){var e=oe.find((function(e){return e.url===B}));return e?e.id:null}),[B,oe]);return React.createElement(y.z,{nekoErrors:[]},React.createElement(Bt,{title:He.COMMON.IMAGES_GENERATOR}),React.createElement(E.N,null,React.createElement(E.Y,{fullWidth:!0},React.createElement(st,{options:L}),React.createElement(m.s,{p:!0,style:{marginTop:0,marginBottom:0}},"This will also be available in the Post Editor soon. If you have any idea or request, please join us on the ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/support/plugin/ai-engine/",rel:"noreferrer"},"Support Forum"),"! ")),React.createElement(E.Y,null,React.createElement(vo,{style:{marginBottom:25}},l),React.createElement(xe.L,{style:{marginBottom:25}},React.createElement("h3",{style:{marginTop:0}},"Parameters"),React.createElement("label",null,He.COMMON.ENVIRONMENT,":"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"envId",value:null!==(t=null==o?void 0:o.envId)&&void 0!==t?t:"",onChange:be},S.map((function(e){return React.createElement(we.j,{key:e.id,value:e.id,label:e.name})})),React.createElement(we.j,{value:"",label:"None"})),React.createElement(_e.g,{tiny:!0}),React.createElement("label",null,He.COMMON.MODEL,":"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"model",value:null==o?void 0:o.model,onChange:be},C.map((function(e){return React.createElement(we.j,{key:e.model,value:e.model,label:e.name})}))),React.createElement(_e.g,{tiny:!0}),React.createElement("label",null,He.COMMON.RESOLUTION,":"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"resolution",value:null==o?void 0:o.resolution,onChange:be},null==I||null===(n=I.resolutions)||void 0===n?void 0:n.map((function(e){return React.createElement(we.j,{key:e.name,value:e.name,label:e.label})}))),"custom"===(null==o?void 0:o.resolution)&&React.createElement(React.Fragment,null,React.createElement(_e.g,{tiny:!0}),React.createElement("label",null,"Custom Resolution:"),React.createElement(_e.g,{tiny:!0}),React.createElement(Re.A,{name:"customResolution",value:null==o?void 0:o.customResolution,onChange:function(e){return be(e,"customResolution")}})),(null==I||null===(r=I.model)||void 0===r?void 0:r.startsWith("dall-e-3"))&&React.createElement(React.Fragment,null,React.createElement(_e.g,{tiny:!0}),React.createElement("label",null,He.COMMON.STYLE,":"),React.createElement(_e.g,{tiny:!0}),React.createElement(we.u,{scrolldown:!0,name:"style",value:Ee,onChange:be},React.createElement(we.j,{key:"none",value:null,label:"None"}),React.createElement(we.j,{key:"natural",value:"natural",label:"Natural"}),React.createElement(we.j,{key:"vivid",value:"vivid",label:"Vivid"})))),React.createElement(xe.L,{style:{marginBottom:25}},React.createElement("h2",{style:{marginTop:0}},"Settings"),React.createElement(v.R,{id:"continuous_mode ",label:"Continuous",value:"1",checked:d,description:"New images will be added to the already generated images.",onChange:p}))),React.createElement(E.Y,{style:{flex:3}},React.createElement(Zt.j,{busy:g,value:ve,max:me,onStopClick:function(){ge.abort(),j([]),pe(0),ye(0),b(!1)},status:function(){return"".concat(ve," / ").concat(me)}}),React.createElement(_e.g,null),React.createElement(xe.L,null,B&&React.createElement(React.Fragment,null,React.createElement(Ht,{style:{paddingBottom:10}},React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(w.M,{disabled:le<1||g,onClick:function(){le>0&&H(D[le-1])}},"<"),React.createElement(w.M,{onClick:function(){return H()}},"Back to Results"),React.createElement(w.M,{disabled:le>=D.length-1||g,onClick:function(){le<D.length-1&&H(D[le+1])}},">"))),React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("div",{style:{flex:2}},React.createElement("a",{href:B,target:"_blank",rel:"noreferrer"},React.createElement("img",{src:B,style:{width:"100%"}}))),React.createElement("div",{style:{flex:1,marginLeft:10,display:"flex",flexDirection:"column"}},React.createElement(tm,null,React.createElement("label",null,"Title:"),React.createElement(Vt.m,{value:z,onBlur:W,rows:2})),React.createElement(tm,null,React.createElement("label",null,"Caption:"),React.createElement(Vt.m,{value:$,onBlur:Q,rows:2})),React.createElement(tm,null,React.createElement("label",null,"Description:"),React.createElement(Vt.m,{value:K,onBlur:q,rows:2})),React.createElement(tm,null,React.createElement("label",null,"Alternative Text:"),React.createElement(Vt.m,{value:Z,onBlur:ee,rows:2})),React.createElement(tm,null,React.createElement("label",null,"Filename:"),React.createElement(Re.A,{value:ne,onChange:re})),React.createElement(_e.g,null),React.createElement(w.M,{fullWidth:!0,style:{height:42},onClick:Ce,isBusy:_},"Add to Media Library"),React.createElement(_e.g,{tiny:!0}),Ie&&React.createElement(React.Fragment,null,React.createElement(_e.g,null),React.createElement(Ne.X,{variant:"success"},"The media has been created! You can edit it here: ",React.createElement("a",{href:"/wp-admin/post.php?post=".concat(Ie,"&action=edit"),target:"_blank",rel:"noreferrer"},"Edit Media #",Ie),"."))))),!B&&React.createElement(React.Fragment,null,React.createElement(Ht,null,React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(w.M,{disabled:!ce,isBusy:g,onClick:Oe},"Generate"),React.createElement(we.u,{scrolldown:!0,id:"totalImagesToGenerate",name:"totalImagesToGenerate",style:{marginLeft:10,marginRight:10,width:120},value:se,onChange:function(e){return fe(e)}},em.map((function(e){return React.createElement(we.j,{key:e,id:e,value:e,label:"".concat(e," ").concat(e>1?"Images":"Image")})}))),g&&React.createElement(w.M,{disabled:!ce,onClick:Oe},"Add to Queue"),D.length>0&&React.createElement(w.M,{onClick:function(){U([])}},"Clear"))),React.createElement(_e.g,null),React.createElement(Vt.m,{value:ce,onChange:function(e){i(Wd(Wd({},o),{},{prompt:e}))}}),React.createElement(Yt,null,D.map((function(e){return React.createElement("img",{key:e,src:e,onClick:function(){return H(e)}})})),Yd(Array(Math.max(3-D.length,0)).keys()).map((function(){return React.createElement("div",{className:"empty-image"})}))))))),React.createElement(Te.n,{isOpen:u,onRequestClose:function(){s()},okButton:{onClick:function(){s()}},title:"Error",content:React.createElement("p",null,u)}))};var rm=wp.element,am=(rm.useState,rm.useEffect,rm.useMemo);const om=function(e){var t=e.isOpen,n=void 0!==t&&t,r=e.title,a=e.error,o=e.results,i=e.busy,l=void 0!==i&&i,c=e.onClick,u=void 0===c?function(){}:c,f=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},d=am((function(){return l?React.createElement(Xs.X,{type:"circle",size:"10%"}):a?React.createElement(React.Fragment,null,"Error: ",a):(null==o?void 0:o.length)>0?React.createElement(React.Fragment,null,"Pick one of those results:",React.createElement(zf,null,o.map((function(e){return React.createElement(Wf,{key:f(e),onClick:function(){u(e)}},e)})))):React.createElement(React.Fragment,null,"Nothing to display.")}),[o,a]);return React.createElement(s.A,null,React.createElement(E.N,null,React.createElement(Te.n,{isOpen:n,title:null!=r?r:"Results",content:d,onRequestClose:function(){return u()},okButton:{label:"Close",onClick:function(){return u()}}})))};function im(e){return im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(e)}function lm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dm(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function cm(){cm=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==im(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(im(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function um(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function sm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){um(o,r,a,i,l,"next",e)}function l(e){um(o,r,a,i,l,"throw",e)}i(void 0)}))}}function fm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||dm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dm(e,t){if(e){if("string"==typeof e)return mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mm(e,t):void 0}}function mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pm=wp.element,hm=pm.useState,vm=pm.useEffect,ym=wp.i18n.__,gm=wp.plugins.registerPlugin,Em=wp.components,bm=Em.Button,wm=Em.ToolbarDropdownMenu,Rm=Em.ToolbarGroup,Om=Em.Spinner,_m=Em.MenuGroup,xm=Em.MenuItem,Sm=wp.blockEditor.BlockControls,Tm=wp.editor.PluginDocumentSettingPanel,Nm=wp.richText.registerFormatType,Cm=wp.data.useSelect;function Im(){var e=fm(hm(!1),2),t=e[0],n=e[1],r=fm(hm([]),2),a=r[0],o=r[1],i=Cm((function(e){return e("core/block-editor").getSelectedBlock()}),[]);if(!i)return null;if("core/paragraph"===i.name){var l=function(e){e.style.opacity=.15,e.style.pointerEvents="none",e.style.userSelect="none",e.style.animation="neko-fade-animation 0.85s infinite linear"},c=function(e){e.style.opacity=1,e.style.pointerEvents="auto",e.style.userSelect="auto",e.style.animation="none"};vm((function(){if(null!=i&&i.clientId){var e=document.getElementById("block-"+i.clientId);e?t?l(e):c(e):console.warn("AI Engine: Could not find block element.")}}),[t,i]);var u=function(){var e=document.getElementById("block-"+i.clientId);e?c(e):console.warn("AI Engine: Could not find block element.")},s=function(e){wp.data.dispatch("core/block-editor").updateBlockAttributes(i.clientId,{content:e})},f=i.attributes.content,d=window.getSelection().toString(),m=function(){var e=sm(cm().mark((function e(t){var r,a,c,m,p,h,v,y,g,E,b,w,R,_,x,S;return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wp.data.select("core/editor"),a=r.getSelectedBlockClientId,c=r.getBlockIndex,m=r.getCurrentPost,p=a(),h=c(p),v=m(),y=v.id,n(!0),void 0,(N=document.getElementById("block-"+i.clientId))?l(N):console.warn("AI Engine: Could not find block element."),document.activeElement.blur(),e.prev=7,e.next=10,(0,O.IU)("".concat(T,"/ai/magic_wand"),{method:"POST",nonce:A,json:{action:t,data:{postId:y,text:f,selectedText:d}}});case 10:g=e.sent,u(),n(!1),E=g.data,b=E.mode,w=E.result,R=E.results,"replace"===b?s(w):"suggest"===b?o(R):"insertMedia"===b&&(_=g.data.media,x=wp.blocks.createBlock,S=x("core/image",{id:_.id,url:_.url,title:_.title,caption:_.caption,alt:_.alt}),wp.data.dispatch("core/block-editor").insertBlock(S,h+1)),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(7),u(),n(!1),alert("Error: "+e.t0.message),console.log("ERROR",e.t0);case 23:case"end":return e.stop()}var N}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}();return React.createElement(React.Fragment,null,React.createElement("style",null,"\n        @keyframes neko-fade-animation {\n          0% { opacity: 0.15; }\n          50% { opacity: 0.3; }\n          100% { opacity: 0.15; }\n        }\n    "),React.createElement(Sm,null,React.createElement(Rm,null,React.createElement(wm,{icon:t?React.createElement(Om,null):React.createElement(jt,{icon:"wand",style:{marginRight:0}}),label:ym("AI Wand")},(function(){return React.createElement(React.Fragment,null,React.createElement(_m,null,React.createElement(xm,{onClick:function(){return m("correctText")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Correct Text"),React.createElement("small",null,"Grammar & Spelling"))),React.createElement(xm,{onClick:function(){return m("enhanceText")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Enhance Text"),React.createElement("small",null,"Readibility & Quality"))),React.createElement(xm,{onClick:function(){return m("longerText")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Longer Text"),React.createElement("small",null,"Readibility"))),React.createElement(xm,{onClick:function(){return m("shorterText")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Shorter Text"),React.createElement("small",null,"Readibility"))),React.createElement(xm,{onClick:function(){return m("translateText")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Translate Text"),React.createElement("small",null,"To Post Language")))),React.createElement(_m,null,React.createElement(xm,{disabled:!d,onClick:function(){return m("suggestSynonyms")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Suggest Synonyms"),React.createElement("small",null,"For Selected Words")))),React.createElement(_m,null,React.createElement(xm,{onClick:function(){return m("generateImage")}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("b",null,"Generate Image"),React.createElement("small",null,"For this Text")))))})))),React.createElement(om,{isOpen:null==a?void 0:a.length,results:a,onClick:function(e){o([]),e&&function(e){var t=wp.data.select("core/block-editor"),n=t.getSelectionStart,r=t.getSelectionEnd,a=wp.data.select("core/block-editor").getSelectedBlock(),o=a.attributes.content,i=n().offset,l=r().offset,c=o.substring(0,i)+e+o.substring(l);wp.data.dispatch("core/block-editor").updateBlockAttributes(a.clientId,{content:c})}(e)},onClose:function(){return o([])}}))}}var km=function(){var e=sm(cm().mark((function e(t,n){var r,a,o,i,l,c;return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:return r=wp.data.select("core/editor"),a=r.getCurrentPost,o=a(),i=o.id,e.next=6,(0,O.IU)("".concat(T,"/ai/magic_wand"),{method:"POST",nonce:A,json:{action:"translateSection",data:{postId:i,context:n,text:t}}});case 6:return l=e.sent,c=l.data.result,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Am=function(){var e=sm(cm().mark((function e(){var t,n,r,a,o,i,l,c,u,s,f,d,m,p,h,v,y,g,E,b,w,R,O,_,x,S,T,N,C,I,k;return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wp.data.select("core/block-editor"),n=t.getBlocks,r=t.getBlockAttributes,a=wp.data.dispatch("core/block-editor"),o=a.updateBlockAttributes,i=wp.data.dispatch("core/editor"),l=i.editPost,i.savePost,c=wp.data.dispatch("core/notices"),u=c.createInfoNotice,s=c.removeNotice,f=wp.data.select("core/editor"),d=f.getEditedPostAttribute,m="mwai-translation-progress-notice",p=n(),h=d("title"),v=Nt(),y=function(){var e=sm(cm().mark((function e(t){return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("Translating content... ".concat(t,"%"),{id:m,isDismissible:!1}),e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){e.style.opacity=.15,e.style.pointerEvents="none",e.style.userSelect="none",e.style.animation="neko-fade-animation 0.85s infinite linear"},E=function(e){e.style.opacity=1,e.style.pointerEvents="auto",e.style.userSelect="auto",e.style.animation="none"},p.forEach((function(e){var t=document.querySelector('[data-block="'.concat(e.clientId,'"]'));t&&g(t)})),(b=document.querySelector(".editor-post-title__input"))&&g(b),e.next=17,y(0);case 17:return w=p.length+2,R=0,O="",e.prev=20,e.next=23,km(h,v);case 23:return O=e.sent,R++,l({title:O}),b&&E(b),e.next=29,y(Math.round(R/w*100));case 29:_=lm(p),e.prev=30,_.s();case 32:if((x=_.n()).done){e.next=50;break}if(S=x.value,!["core/paragraph","core/heading","core/list","core/quote","core/table"].includes(S.name)){e.next=45;break}if(!(T=r(S.clientId).content)){e.next=42;break}return e.next=39,km(T,v);case 39:return N=e.sent,e.next=42,o(S.clientId,{content:N});case 42:(C=document.querySelector('[data-block="'.concat(S.clientId,'"]')))&&E(C),wp.data.dispatch("core/block-editor").selectBlock(S.clientId);case 45:return R++,e.next=48,y(Math.round(R/w*100));case 48:e.next=32;break;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(30),_.e(e.t0);case 55:return e.prev=55,_.f(),e.finish(55);case 58:if(!(I=d("excerpt"))){e.next=64;break}return e.next=62,km(I,v);case 62:k=e.sent,l({excerpt:k});case 64:return e.prev=64,p.forEach((function(e){var t=document.querySelector('[data-block="'.concat(e.clientId,'"]'));t&&E(t)})),s(m),e.finish(64);case 68:case"end":return e.stop()}}),e,null,[[20,,64,68],[30,52,55,58]])})));return function(){return e.apply(this,arguments)}}(),Lm=function(){var e=null==L?void 0:L.module_suggestions,t=fm(hm(),2),n=t[0],r=t[1],a=fm(hm(),2),o=a[0],i=a[1],l=function(){var e=sm(cm().mark((function e(){return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Am();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=sm(cm().mark((function e(t){return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wp.data.dispatch("core/editor").editPost({title:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=sm(cm().mark((function e(t){return cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wp.data.dispatch("core/editor").editPost({excerpt:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e?React.createElement(s.A,null,React.createElement(Tm,{name:"mwai-document-settings",title:React.createElement(React.Fragment,null,React.createElement(jt,null)," AI Engine"),className:"mwai-document-settings"},React.createElement("p",null,"Suggest:"),React.createElement("div",{style:{display:"flex"}},React.createElement(bm,{variant:"primary",onClick:function(){var e=(0,wp.data.select("core/editor").getCurrentPost)(),t=e.id,n=e.title;r({postId:t,postTitle:n})},style:{flex:1,marginRight:10,textAlign:"center"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}})," Titles"),React.createElement(bm,{variant:"primary",onClick:function(){var e=(0,wp.data.select("core/editor").getCurrentPost)(),t=e.id,n=e.title;i({postId:t,postTitle:n})},style:{flex:1,textAlign:"center"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}})," Excerpts")),React.createElement("div",{style:{display:"flex"}},React.createElement(bm,{variant:"primary",onClick:l,style:{flex:1,marginTop:10,textAlign:"center"}},React.createElement(jt,{icon:"wand",style:{marginRight:8}})," Translate Post")),React.createElement(s.A,null,React.createElement(E.N,null,React.createElement(nd,{post:n,onTitleClick:c,onClose:r}),React.createElement(md,{post:o,onExcerptClick:u,onClose:i}))))):null};function Mm(e){return Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(e)}function Pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pm(Object(n),!0).forEach((function(t){var r,a,o,i;r=e,a=t,o=n[t],i=function(e,t){if("object"!=Mm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Mm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==Mm(i)?i:String(i))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fm.apply(this,arguments)}function Dm(){Dm=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),l=new I(r||[]);return a(i,"_invoke",{value:S(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",v={};function y(){}function g(){}function E(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,R=w&&w(w(k([])));R&&R!==n&&r.call(R,i)&&(b=R);var O=E.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,o,i,l){var c=f(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Mm(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var c=T(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?h:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=h,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Mm(t)+" is not iterable")}return g.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new x(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Um(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Gm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Um(o,r,a,i,l,"next",e)}function l(e){Um(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Bm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ym=wp.hooks.addFilter,zm=wp.element,Wm=zm.useState,Vm=zm.useRef,Km=zm.useEffect,qm=wp.components,Xm=qm.TextControl,$m=(qm.Spinner,qm.ProgressBar),Qm=qm.ToggleControl,Jm=qm.Card,Zm=qm.CardBody,ep=wp.data.dispatch,tp="mwai-copilot/prevent-new-block";var np,rp=["children","type","title","hint","isSelected","isDisplayed"];function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ap.apply(this,arguments)}var op=React.createElement(jt,{icon:"ai",style:{width:20,height:20}}),ip=U.Ay.div(np||(np=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n  color: black;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid black;\n  font-size: 15px;\n  box-sizing: content-box;\n  font-weight: 400;\n  font-size: 13px;\n  padding: 10px;\n  background: hsl(0deg 0% 100% / 75%);\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n  margin-bottom: 10px;\n\n\n  .mwai-title-container {\n    flex: inherit;\n    padding: 5px 0px 5px 10px;\n    display: flex;\n    align-items: center;\n    color: black;\n    font-weight: 600;\n    cursor: pointer;\n\n    .mwai-hint {\n      font-size: 10px;\n      font-weight: 400;\n      text-align: right;\n      flex: auto;\n\n      .mwai-pill {\n        background: var(--wp--preset--color--vivid-cyan-blue);\n        padding: 5px 10px;\n        border-radius: 8px;\n        color: white;\n      }\n\n      .mwai-pill-purple {\n        background: var(--wp--preset--color--vivid-purple);\n      }\n    }\n  }\n\n  .mwai-block-container-content {\n    flex: auto;\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n  }\n\n\t&.mwai-chatbot {\n\t\tbackground: var(--neko-main-color);\n\n\t\t.mwai-title-container {\n\t\t\tcolor: white;\n\t\t}\t\n\n\t\t.mwai-block-container-content {\n\t\t\tmargin-top: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tbackground: var(--neko-background-color);\n\t\t}\n\t}\n\n  &.is-selected {\n  }\n']))),lp=function(e){var t=e.children,n=e.type,r=void 0===n?"":n,a=e.title,o=void 0===a?"":a,i=e.hint,l=void 0===i?"":i,c=e.isSelected,u=e.isDisplayed,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,rp),f=(0,en.gR)("mwai-block-container","mwai-".concat(r),{"is-selected":c,"is-meow":!0});return React.createElement(ip,ap({className:f},s),React.createElement("div",{className:"mwai-title-container"},React.createElement(jt,{icon:"ai",style:{width:20,height:20}}),React.createElement("div",null,o),React.createElement("div",{className:"mwai-hint"},l)),(c||u)&&React.createElement("div",{className:"mwai-block-container-content"},t))};function cp(e){return cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(e)}function up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sp(e,t,n){var r;return r=function(e,t){if("object"!=cp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==cp(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mp=wp.blocks.registerBlockType,pp=wp.element,hp=pp.useMemo,vp=pp.useState,yp=wp.components,gp=yp.PanelBody,Ep=yp.SelectControl,bp=yp.ToggleControl,Rp=wp.blockEditor,Op=Rp.InspectorControls,_p=Rp.useBlockProps,xp=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))},Sp=function(e){var t=e.attributes,n=t.chatbotId,r=t.isCustomChatbot,a=t.shortcodeParams;if(r){var o=Object.entries(a).filter((function(e){var t=fp(e,2)[1];return null!=t&&""!==t})).reduce((function(e,t){var n=fp(t,2),r=n[0],a=n[1],o=xp(r),i=encodeURIComponent(a);return"bot_id"===o?"".concat(e,' custom_id="').concat(i,'"'):"".concat(e," ").concat(o,'="').concat(i,'"')}),"[mwai_chatbot");return"".concat(o,"]")}var i={id:{value:n,insertIfNull:!0}},l=Object.entries(i).filter((function(e){var t=fp(e,2)[1],n=t.value,r=t.insertIfNull;return!!n||r})).reduce((function(e,t){var n=fp(t,2),r=n[0],a=n[1].value,o=xp(r),i=encodeURIComponent(a);return"".concat(e," ").concat(o,'="').concat(i,'"')}),"[mwai_chatbot");return"".concat(l,"]")},Tp=function(e){var t=e.attributes,n=t.chatbotId,r=t.isCustomChatbot,a=t.shortcodeParams,o=e.setAttributes,i=e.isSelected,l=fp(vp(a),2),c=l[0],u=l[1],s=_p(),f=hp((function(){var e=F.map((function(e){return{label:e.name,value:e.botId}}));return e.unshift({label:"None",value:null}),e}),[F]),d=hp((function(){return F.find((function(e){return e.botId===n}))}),[n]),m=hp((function(){return r?"Custom Chatbot":d?"Chatbot (".concat(d.name,")"):"Chatbot"}),[r,n,d]);return React.createElement(React.Fragment,null,React.createElement("div",s,React.createElement(lp,{title:m,type:"chatbot",isSelected:i},r&&React.createElement(React.Fragment,null,React.createElement($o,{shortcodeParams:c,updateShortcodeParams:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?up(Object(n),!0).forEach((function(t){sp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):up(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);n[t]=e,u(n),o({shortcodeParams:n})},options:L,blockMode:!0})),!r&&React.createElement("p",null,"Selected chatbot: ",d?d.name:"None"))),React.createElement(Op,null,React.createElement(gp,{title:He.COMMON.CHATBOT},React.createElement(bp,{label:"Custom Chatbot",checked:r,onChange:function(e){return o({isCustomChatbot:e})}}),!r&&f&&f.length>0&&React.createElement(Ep,{label:He.COMMON.CHATBOT,value:n,options:f,onChange:function(e){return o({chatbotId:e})}})),!r&&React.createElement(gp,{title:He.COMMON.SETTINGS})))};function Np(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ip=wp.blocks.registerBlockType,kp=wp.element.useMemo,Ap=wp.components,Lp=Ap.PanelBody,Mp=Ap.SelectControl,Pp=Ap.ToggleControl,jp=Ap.TextControl,Fp=wp.blockEditor,Dp=Fp.InspectorControls,Up=Fp.useBlockProps,Gp=function(e){var t=e.attributes,n=t.isCustomChatbot,r=t.chatbotId,a=t.customId,o=t.textNewChat,i={};n?a&&(i.customId=a):r&&(i.id=r),o&&(i.textNewChat=o);var l=Object.entries(i).filter((function(e){var t=Np(e,2)[1];return null!=t&&""!==t})).reduce((function(e,t){var n=Np(t,2),r=n[0],a=n[1],o=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))}(r);return"".concat(e," ").concat(o,'="').concat(a,'"')}),"[mwai_discussions");return"".concat(l,"]")},Bp=function(e){var t=e.attributes,n=t.isCustomChatbot,r=t.chatbotId,a=t.customId,o=t.textNewChat,i=e.setAttributes,l=e.isSelected,c=Up(),u=kp((function(){var e=F.map((function(e){return{label:e.name,value:e.botId}}));return e.unshift({label:"None",value:""}),e}),[F]),s=kp((function(){return F.find((function(e){return e.botId===r}))}),[r]),f=kp((function(){return n?"Discussions (Custom Chatbot)":s?"Discussions (".concat(s.name,")"):"Discussions"}),[n,s]);return React.createElement(React.Fragment,null,React.createElement("div",c,React.createElement(lp,{title:f,type:"discussions",isSelected:l},React.createElement("span",null,n?"Custom ID: ".concat(a||"None"):"Selected chatbot: ".concat(s?s.name:"None")),React.createElement("span",null,"New Chat: ",o||"Default"))),React.createElement(Dp,null,React.createElement(Lp,{title:"Discussions Settings"},React.createElement(Pp,{label:"Custom Chatbot",checked:n,onChange:function(e){return i({isCustomChatbot:e})}}),n?React.createElement(jp,{label:"Custom Chatbot ID",value:a,onChange:function(e){return i({customId:e})}}):React.createElement(Mp,{label:"Select Chatbot",value:r,options:u,onChange:function(e){return i({chatbotId:e})}}),React.createElement(jp,{label:"Text for New Chat Button",value:o,onChange:function(e){return i({textNewChat:e})}}))))};function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hp.apply(this,arguments)}var Yp=wp.i18n.__,zp=wp.blocks.registerBlockType,Wp=wp.element.useEffect,Vp=wp.components,Kp=Vp.PanelBody,qp=Vp.SelectControl,Xp=Vp.TextControl,$p=wp.blockEditor,Qp=$p.InspectorControls,Jp=$p.InnerBlocks,Zp=$p.useBlockProps,eh=function(e){var t=Zp.save(),n=e.attributes,r=n.id,a=n.theme,o='[mwai-form-container id="'.concat(r,'" theme="').concat(a,'"]');return React.createElement("div",Hp({},t,{id:"mwai-form-container-".concat(r),className:"mwai-form-container"}),o,React.createElement(Jp.Content,null))},th=function(e){var t=e.attributes,n=t.id,r=t.theme,a=e.setAttributes,o=Zp();return Wp((function(){if(!n){var e=Math.random().toString(36).substr(2,9);a({id:e})}}),[n]),React.createElement(React.Fragment,null,React.createElement("div",o,React.createElement(lp,{title:"Container",type:"container",isDisplayed:!0},React.createElement(Jp,null))),React.createElement(Qp,null,React.createElement(Kp,{title:He.COMMON.STYLE},React.createElement("p",null,"The theme will be applied to all the AI elements in this container."),React.createElement(qp,{label:"Theme",value:r,onChange:function(e){return a({theme:e})},options:[{label:"None",value:"none"},{label:"ChatGPT",value:"ChatGPT"},{label:"Timeless",value:"Timeless"}]}),React.createElement(Xp,{label:"ID",value:n,onChange:function(e){return a({id:e})}}))))};function nh(e){return function(e){if(Array.isArray(e))return rh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ah=wp.i18n.__,oh=wp.blocks.registerBlockType,ih=wp.element.useEffect,lh=wp.components,ch=lh.Button,uh=lh.PanelBody,sh=lh.TextControl,fh=lh.SelectControl,dh=lh.CheckboxControl,mh=wp.blockEditor,ph=mh.useBlockProps,hh=mh.InspectorControls,vh=function(e){var t=e.attributes,n=t.id,r=t.label,a=t.type,o=t.name,i=t.options,l=void 0===i?[]:i,c=t.placeholder,u=t.rows,s=t.defaultValue,f=t.maxlength,d=t.required,m=encodeURIComponent((0,O.F1)(l)),p=ph.save(),h="[mwai-form-field";return n&&(h+=' id="'.concat(n,'"')),r&&(h+=' label="'.concat(r,'"')),a&&(h+=' type="'.concat(a,'"')),o&&(h+=' name="'.concat(o,'"')),m&&(h+=' options="'.concat(m,'"')),c&&(h+=' placeholder="'.concat(c,'"')),"textarea"===a&&u&&(h+=' rows="'.concat(u,'"')),s&&(h+=' default="'.concat(s,'"')),f&&(h+=' maxlength="'.concat(f,'"')),d&&(h+=' required="'.concat(d,'"')),h+="]",React.createElement("div",p,h)},yh=function(e){var t,n=e.attributes,r=n.id,a=n.type,o=n.name,i=n.options,l=void 0===i?[]:i,c=n.label,u=n.placeholder,s=n.rows,f=n.defaultValue,d=n.maxlength,m=n.required,p=e.setAttributes,h=e.isSelected,v=ph();return ih((function(){if(!r){var e=Math.random().toString(36).substr(2,9);p({id:"mwai-"+e})}}),[r]),React.createElement(React.Fragment,null,React.createElement("div",v,React.createElement(lp,{title:"".concat((t=a,t.charAt(0).toUpperCase()+t.slice(1))),type:"field",isSelected:h,hint:React.createElement("span",{className:"mwai-pill"},"{",o,"}")},React.createElement("div",null,c),React.createElement("div",{style:{flex:"auto"}}),React.createElement("div",null,o))),React.createElement(hh,null,React.createElement(uh,{title:ah("Field")},React.createElement(sh,{label:"Label Text",value:c,onChange:function(e){p({label:e});var t=e.trim().replace(/ /g,"_").replace(/[^\w-]+/g,"").toUpperCase();t&&p({name:t})}}),React.createElement(sh,{label:"Field Name",value:o,onChange:function(e){return p({name:e})}}),React.createElement(fh,{label:"Field Type",value:a,onChange:function(e){return p({type:e})},options:[{label:"Input",value:"input"},{label:"Select",value:"select"},{label:"Checkbox",value:"checkbox"},{label:"Radio",value:"radio"},{label:"Text Area",value:"textarea"}]}),("input"===a||"textarea"===a)&&React.createElement(sh,{label:"Placeholder",value:u,onChange:function(e){return p({placeholder:e})}}),("input"===a||"textarea"===a)&&React.createElement(sh,{label:"Default Value",value:f,onChange:function(e){return p({defaultValue:e})}}),("input"===a||"textarea"===a)&&React.createElement(sh,{label:"Max Length",value:d,onChange:function(e){return p({maxlength:e})}}),"textarea"===a&&React.createElement(sh,{label:He.COMMON.ROWS,value:s,onChange:function(e){return p({rows:e})},type:"number",step:"1",min:"1",max:"100"}),React.createElement(dh,{label:"Required",checked:m,onChange:function(e){return p({required:e})}})),("select"===a||"radio"===a||"checkbox"===a)&&React.createElement(uh,{title:React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},React.createElement("div",null,ah("Options")))},l.map((function(e,t){return React.createElement("div",{key:t,style:{display:"flex",marginBottom:-25}},React.createElement("div",{style:{marginRight:5}},React.createElement(sh,{style:{marginRight:10},label:"Label",isInline:!0,value:e.label,onChange:function(e){var n=nh(l);n[t].label=e,p({options:n})}})),React.createElement(sh,{style:{},label:"Value",isSubtle:!0,value:e.value,onChange:function(e){var n=nh(l);n[t].value=e,p({options:n})}}),React.createElement("div",{style:{marginLeft:5,position:"relative",top:23}},React.createElement(ch,{style:{height:30},isDestructive:!0,icon:"trash",isSmall:!0,onClick:function(){var e=nh(l);e.splice(t,1),p({options:e})}})))})),React.createElement(ch,{isPrimary:!0,style:{width:"100%",marginTop:10},onClick:function(){var e=nh(l);e.push({label:"",value:""}),p({options:e})}},"Add Option")),React.createElement(uh,{title:He.COMMON.SYSTEM},React.createElement(sh,{label:"ID",value:r,onChange:function(e){return p({id:e})}}))))};var gh=wp.i18n.__,Eh=wp.blocks.registerBlockType,bh=wp.element.useEffect,wh=wp.components,Rh=(wh.Button,wh.PanelBody),Oh=wh.TextControl,_h=wh.SelectControl,xh=wh.CheckboxControl,Sh=wp.blockEditor,Th=Sh.useBlockProps,Nh=Sh.InspectorControls,Ch=function(e){var t=e.attributes,n=t.id,r=t.label,a=t.name,o=t.required,i=t.accept,l=t.customAccept,c=t.multiple,u=Th.save(),s=function(e,t){switch(e){case"all-images":return"image/*";case"all-documents":return".pdf,.doc,.docx,.txt,.xls,.xlsx";case"all":default:return"";case"custom":return t||""}}(i,l),f="[mwai-form-upload";return n&&(f+=' id="'.concat(n,'"')),r&&(f+=' label="'.concat(r,'"')),a&&(f+=' name="'.concat(a,'"')),""!==s&&(f+=' accept="'.concat(s,'"')),c&&(f+=' multiple="true"'),o&&(f+=' required="true"'),f+="]",React.createElement("div",u,f)},Ih=function(e){var t=e.attributes,n=t.id,r=t.label,a=t.name,o=t.required,i=t.accept,l=t.customAccept,c=t.multiple,u=e.setAttributes,s=e.isSelected,f=Th();return bh((function(){if(!n){var e=Math.random().toString(36).substr(2,9);u({id:"mwai-"+e})}}),[n]),React.createElement(React.Fragment,null,React.createElement("div",f,React.createElement(lp,{title:"Upload Field",type:"field",isSelected:s,hint:React.createElement("span",{className:"mwai-pill"},"{"+a+"}")},React.createElement("div",null,r),React.createElement("div",{style:{flex:"auto"}}),React.createElement("div",null,a))),React.createElement(Nh,null,React.createElement(Rh,{title:gh("Upload Field Settings")},React.createElement(Oh,{label:"Label Text",value:r,onChange:function(e){if(u({label:e}),!a||"LABEL"===a){var t=e.trim().replace(/ /g,"_").replace(/[^\w-]+/g,"").toUpperCase();t&&u({name:t})}}}),React.createElement(Oh,{label:"Field Name",value:a,onChange:function(e){return u({name:e})}}),React.createElement(_h,{label:"Accept",value:i,onChange:function(e){return u({accept:e})},options:[{label:"All Images",value:"all-images"},{label:"All Documents",value:"all-documents"},{label:"Any Files",value:"all"},{label:"Custom",value:"custom"}]}),"custom"===i&&React.createElement(Oh,{label:"Custom MIME Types",help:"Comma-separated list (e.g. .png,.jpg)",value:l,onChange:function(e){return u({customAccept:e})}}),React.createElement(xh,{label:"Multiple",checked:c,onChange:function(e){return u({multiple:e})}}),React.createElement(xh,{label:"Required",checked:o,onChange:function(e){return u({required:e})}})),React.createElement(Rh,{title:He.COMMON.SYSTEM},React.createElement(Oh,{label:"ID",value:n,onChange:function(e){return u({id:e})}}))))};function kh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ah(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ah(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lh=wp.i18n.__,Mh=wp.blocks.registerBlockType,Ph=wp.element.useEffect,jh=wp.components,Fh=jh.PanelBody,Dh=jh.TextControl,Uh=jh.CheckboxControl,Gh=wp.blockEditor,Bh=Gh.InspectorControls,Hh=Gh.useBlockProps,Yh=function(e){var t=e.attributes,n=t.id,r=t.copyButton,a=Hh.save(),o={id:{value:n,insertIfNull:!0},copy_button:{value:r,insertIfNull:!1}},i=Object.entries(o).filter((function(e){var t=kh(e,2)[1],n=t.value,r=t.insertIfNull;return!1!==n&&""!==n||r})).reduce((function(e,t){var n=kh(t,2),r=n[0],a=n[1].value;return"".concat(e," ").concat(r,'="').concat(a,'"')}),"[mwai-form-output");return i="".concat(i,"]"),React.createElement("div",a,i)},zh=function(e){var t=e.attributes,n=t.id,r=t.copyButton,a=e.setAttributes,o=e.isSelected,i=Hh();return Ph((function(){if(!n){var e=Math.random().toString(36).substr(2,9);a({id:"mwai-"+e})}}),[n]),React.createElement(React.Fragment,null,React.createElement("div",i,React.createElement(lp,{title:"Output",type:"output",isSelected:o,hint:React.createElement("span",{className:"mwai-pill mwai-pill-purple"},"#",n)},React.createElement("div",null),React.createElement("div",{style:{flex:"auto"}}),React.createElement("div",null,"#",n))),React.createElement(Bh,null,React.createElement(Fh,{title:He.FORMS.OUTPUT},React.createElement(Uh,{label:"Copy Button",checked:r,onChange:function(e){return a({copyButton:e})}}),React.createElement(Dh,{label:"ID",value:n,onChange:function(e){return a({id:e})}}))))};function Wh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kh=wp.i18n.__,qh=wp.blocks.registerBlockType,Xh=wp.element,$h=Xh.useMemo,Qh=Xh.useEffect,Jh=wp.components,Zh=Jh.PanelBody,ev=Jh.TextControl,tv=Jh.TextareaControl,nv=Jh.SelectControl,rv=Jh.CheckboxControl,av=wp.blockEditor,ov=av.InspectorControls,iv=av.useBlockProps,lv=function(e){var t=e.attributes,n=t.id,r=t.label,a=t.prompt,o=t.message,i=t.outputElement,l=t.aiEnvId,c=t.embeddingsEnvId,u=t.index,s=t.namespace,f=t.localMemory,d=t.model,m=t.temperature,p=t.maxTokens,h=t.isAssistant,v=t.assistantId,y=t.resolution,g=encodeURIComponent(a),E=encodeURIComponent(o),b=iv.save(),w={id:{value:n,insertIfNull:!0},local_memory:{value:f,insertIfNull:!1},label:{value:r,insertIfNull:!0},prompt:{value:g,insertIfNull:!1},message:{value:E,insertIfNull:!1},output_element:{value:i,insertIfNull:!0},model:{value:d,insertIfNull:!1},temperature:{value:m,insertIfNull:!1},max_tokens:{value:p,insertIfNull:!1},is_assistant:{value:h,insertIfNull:!1},env_id:{value:l,insertIfNull:!1},embeddings_env_id:{value:c,insertIfNull:!1},embeddings_index:{value:u,insertIfNull:!1},embeddings_namespace:{value:s,insertIfNull:!1},assistant_id:{value:v,insertIfNull:!1},resolution:{value:y,insertIfNull:!1}},R=Object.entries(w).filter((function(e){var t=Wh(e,2)[1],n=t.value,r=t.insertIfNull;return!!n||r})).reduce((function(e,t){var n=Wh(t,2),r=n[0],a=n[1].value;return"".concat(e," ").concat(r,'="').concat(a,'"')}),"[mwai-form-submit");return R="".concat(R,"]"),React.createElement("div",b,R)},cv=function(e){var t,n=iv(),r=e.attributes,a=r.id,o=r.label,i=r.message,l=r.model,c=r.temperature,u=r.maxTokens,s=r.aiEnvId,f=r.embeddingsEnvId,d=r.index,m=r.namespace,p=r.assistantId,h=r.resolution,v=r.isAssistant,y=r.localMemory,g=r.outputElement,E=r.placeholders,b=void 0===E?[]:E,w=e.setAttributes,R=e.isSelected,O=$h((function(){return L.embeddings_envs||[]}),[]),_=$h((function(){return O.find((function(e){return e.id===f}))||null}),[O,f]),x=$h((function(){return(null==_?void 0:_.indexes)||[]}),[_]),S=$h((function(){return(null==_?void 0:_.namespaces)||[]}),[_]),T=$h((function(){return L.ai_envs||[]}),[]),N=ft(L,s),C=N.models,I=(0,N.getModel)(l),k=null==I||null===(t=I.features)||void 0===t?void 0:t.includes("text-to-image"),A=$h((function(){return T.find((function(e){return e.id===s}))||null}),[T,s]),M=$h((function(){return(null==A?void 0:A.assistants)||[]}),[A]),P=$h((function(){return M.find((function(e){return e.id===p}))||null}),[M,p]);Qh((function(){!s&&!l||A||w({aiEnvId:null,model:null})}),[s]),Qh((function(){(f||d||m)&&!_&&w({embeddingsEnvId:null,index:null,namespace:null})}),[f]),Qh((function(){P&&P.model&&P.model!==l&&w({model:P.model})}),[P]),Qh((function(){v||w({assistantId:""})}),[v]),Qh((function(){if(!a){var e=Math.random().toString(36).substr(2,9);w({id:"mwai-"+e})}}),[a]),Qh((function(){s||""===l||w({model:""})}),[s]),Qh((function(){var e=i.match(/{([^}]+)}/g);if(e){var t=e.map((function(e){return e.replace("{","").replace("}","")}));t.join(",")!==b.join(",")&&w({placeholders:t})}else w({placeholders:[]})}),[i]);var j=$h((function(){return b?b.length:0}),[b]),F=$h((function(){var e=M.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:"None",value:""}),e}),[M]),D=$h((function(){var e=C.map((function(e){return{label:e.rawName,value:e.model}}));return e.unshift({label:"Default",value:""}),e}),[C]),U=$h((function(){var e;if(!I||!k)return[];var t=(null==I||null===(e=I.resolutions)||void 0===e?void 0:e.map((function(e){return{label:e.label,value:e.name}})))||[];return t.unshift({label:"None",value:""}),t}),[I,k]),G=$h((function(){var e=x.map((function(e){return{label:e.name,value:e.name}}));return e.unshift({label:"None",value:""}),e}),[x]),B=$h((function(){var e=T.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:"Default",value:""}),e}),[T]),H=$h((function(){var e=O.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:"None",value:""}),e}),[O]),Y=$h((function(){var e=S.map((function(e){return{label:e,value:e}}));return e.unshift({label:"None",value:""}),e}),[S]),z=$h((function(){return 0===j?"N/A":React.createElement("span",{className:"mwai-pill"},j," field",j>1?"s":"")}),[j]);return React.createElement(React.Fragment,null,React.createElement("div",n,React.createElement(lp,{title:"Submit",type:"submit",isSelected:R,hint:React.createElement(React.Fragment,null,"IN:"," ",React.createElement("span",{className:"mwai-pill"},z)," ","OUT:"," ",React.createElement("span",{className:"mwai-pill mwai-pill-purple"},g||"N/A"))},"Input Fields: ",b.join(", "),React.createElement("br",null),"Prompt: ",i,React.createElement("br",null),"Output Element: ",g)),React.createElement(ov,null,React.createElement(Zh,{title:He.COMMON.OUTPUT},React.createElement(ev,{label:He.COMMON.LABEL,value:o,onChange:function(e){return w({label:e})}}),React.createElement(tv,{label:He.COMMON.PROMPT,value:i,onChange:function(e){return w({message:e})},help:He.FORMS.PROMPT_INFO}),React.createElement(ev,{label:He.FORMS.OUTPUT_ELEMENT,value:g,onChange:function(e){return w({outputElement:e})},help:He.FORMS.OUTPUT_ELEMENT_INFO})),React.createElement(Zh,{title:He.COMMON.MODEL_PARAMS},T&&T.length>0&&React.createElement(nv,{label:He.COMMON.ENVIRONMENT,value:s,options:B,onChange:function(e){return w({aiEnvId:e})}}),T&&T.length>0&&React.createElement(rv,{label:"Assistant Mode",checked:v,onChange:function(e){return w({isAssistant:e})}}),v&&M&&M.length>0&&React.createElement(React.Fragment,null,React.createElement(nv,{label:He.COMMON.ASSISTANT,value:p,options:F,onChange:function(e){return w({assistantId:e})}})),!v&&React.createElement(React.Fragment,null,C&&C.length>0&&React.createElement(nv,{label:He.COMMON.MODEL,value:l,options:D,disabled:!s,onChange:function(e){return w({model:e})}}),!k&&React.createElement(React.Fragment,null,React.createElement(ev,{label:He.COMMON.TEMPERATURE,value:c,onChange:function(e){return w({temperature:parseFloat(e)})},type:"number",step:"0.1",min:"0",max:"1",help:He.HELP.TEMPERATURE}),React.createElement(ev,{label:He.COMMON.MAX_TOKENS,value:u,onChange:function(e){return w({maxTokens:parseInt(e)})},type:"number",step:"16",min:"32",max:"4096",help:React.createElement(wo,{model:I,maxTokens:u,onRecommendedClick:function(e){return w({maxTokens:e})}})})),k&&React.createElement(React.Fragment,null,React.createElement(nv,{label:He.COMMON.RESOLUTION,value:h,options:U,onChange:function(e){return w({resolution:e})}})))),!k&&React.createElement(React.Fragment,null,React.createElement(Zh,{title:He.COMMON.CONTEXT_PARAMS},O&&O.length>0&&React.createElement(nv,{label:He.COMMON.EMBEDDINGS_ENV,value:f,options:H,disabled:!(null!=H&&H.length),onChange:function(e){return w({embeddingsEnvId:e})}}),x&&x.length>0&&React.createElement(nv,{label:He.COMMON.EMBEDDINGS_INDEX,value:d,options:G,disabled:!(null!=H&&H.length),onChange:function(e){return w({index:e})}}),"pinecone"===(null==_?void 0:_.type)&&S&&S.length>0&&React.createElement(nv,{label:He.COMMON.NAMESPACE,value:m,options:Y,disabled:!(null!=H&&H.length),onChange:function(e){return w({namespace:e})}}))),React.createElement(Zh,{title:He.COMMON.SYSTEM},React.createElement(ev,{label:"ID",value:a,onChange:function(e){return w({id:e})}}),React.createElement(rv,{label:"Local Memory",checked:y,onChange:function(e){return w({localMemory:e})},help:"Store the forms data in the browser's local storage for 12 hours."}))))};var uv=wp.i18n.__,sv=wp.blocks.registerBlockType,fv=wp.element,dv=(fv.useMemo,fv.useEffect),mv=wp.components,pv=mv.PanelBody,hv=mv.TextControl,vv=mv.CheckboxControl,yv=wp.blockEditor,gv=yv.InspectorControls,Ev=yv.useBlockProps,bv=function(e){var t=e.attributes,n=t.id,r=t.label,a=t.localMemory,o=Ev.save(),i='[mwai-form-reset id="'.concat(n,'" label="').concat(r,'"');return a&&(i+=' local_memory="true"'),i+="]",React.createElement("div",o,i)},wv=function(e){var t=Ev(),n=e.attributes,r=n.id,a=n.label,o=n.localMemory,i=e.setAttributes,l=e.isSelected;return dv((function(){if(!r){var e=Math.random().toString(36).substr(2,9);i({id:"mwai-reset-"+e})}}),[r]),React.createElement(React.Fragment,null,React.createElement("div",t,React.createElement(lp,{title:"Reset",type:"reset",isSelected:l,hint:React.createElement(React.Fragment,null,uv("This block resets the AI form fields","ai-engine"))},uv("ID:","ai-engine")," ",r,React.createElement("br",null),uv("Label:","ai-engine")," ",a)),React.createElement(gv,null,React.createElement(pv,{title:uv("Reset Button Settings","ai-engine")},React.createElement(hv,{label:uv("ID","ai-engine"),value:r,onChange:function(e){return i({id:e})},help:uv("Unique identifier. If omitted, one is auto-generated.","ai-engine")}),React.createElement(hv,{label:uv("Label","ai-engine"),value:a,onChange:function(e){return i({label:e})},help:uv("Text on the reset button.","ai-engine")}),React.createElement(vv,{label:uv("Local Memory","ai-engine"),checked:o,onChange:function(e){return i({localMemory:e})},help:uv("Clear local storage for this forms key when resetting.","ai-engine")}))))};var Rv,Ov=wp.element.render,_v=new c.E({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1,placeholderData:function(e){return e}}}}),xv=L.module_chatbots,Sv=L.module_suggestions,Tv=L.module_forms;xv&&(mp("ai-engine/chatbot",{title:"AI Chatbot",description:"Embed an AI Engine Chatbot in your content.",icon:op,category:"layout",keywords:["ai","openai","chatbot"],attributes:{id:{type:"string",default:""},chatbotId:{type:"string",default:"default"},isCustomChatbot:{type:"boolean",default:!1},shortcodeParams:{type:"object",default:{}}},edit:Tp,save:Sp}),Ip("ai-engine/discussions",{title:"AI Discussions",description:"Embed AI Engine Discussions in your content.",icon:op,category:"layout",keywords:["ai","openai","discussions"],attributes:{isCustomChatbot:{type:"boolean",default:!1},chatbotId:{type:"string",default:""},customId:{type:"string",default:""},textNewChat:{type:"string",default:""}},edit:Bp,save:Gp})),Tv&&(oh("ai-engine/form-field",{apiVersion:3,title:"AI Form Field",description:"An AI Field for your AI Form.",icon:op,category:"layout",keywords:[ah("ai"),ah("openai"),ah("form")],supports:{dimensions:{width:!0}},attributes:{id:{type:"string",default:""},name:{type:"string",default:"LABEL"},type:{type:"string",default:"input"},options:{type:"array",default:[]},label:{type:"string",default:"Label: "},placeholder:{type:"string",default:""},defaultValue:{type:"string",default:""},maxlength:{type:"string",default:""},rows:{type:"rows",default:4},required:{type:"boolean",default:!0}},edit:yh,save:vh}),Eh("ai-engine/upload-field",{apiVersion:3,title:"AI Upload Field",description:"A File Upload field for your AI Form.",icon:op,category:"layout",keywords:[gh("ai"),gh("openai"),gh("form"),gh("upload")],attributes:{id:{type:"string",default:""},label:{type:"string",default:"Upload:"},name:{type:"string",default:"UPLOAD"},required:{type:"boolean",default:!1},accept:{type:"string",default:"all-images"},customAccept:{type:"string",default:".png,.jpg"},multiple:{type:"boolean",default:!1}},edit:Ih,save:Ch}),Mh("ai-engine/form-output",{title:"AI Form Output",description:"An Output Field for your AI Form.",icon:op,category:"layout",keywords:[Lh("ai"),Lh("openai"),Lh("form")],supports:{dimensions:{minHeight:!0}},attributes:{id:{type:"string",default:""},copyButton:{type:"boolean",default:!0}},edit:zh,save:Yh}),qh("ai-engine/form-submit",{title:"AI Form Submit",description:"The Submit Button for your AI Form.",icon:op,category:"layout",keywords:[Kh("ai"),Kh("openai"),Kh("form")],supports:{dimensions:{minHeight:!1}},attributes:{id:{type:"string",default:""},localMemory:{type:"boolean",default:!1},label:{type:"string",default:"Submit"},prompt:{type:"string",default:""},message:{type:"string",default:""},outputElement:{type:"string",default:""},model:{type:"string",default:""},temperature:{type:"number",default:.8},maxTokens:{type:"number",default:4096},placeholders:{type:"array",default:[]},aiEnvId:{type:"string",default:""},embeddingsEnvId:{type:"string",default:""},index:{type:"string",default:""},namespace:{type:"string",default:null},isAssistant:{type:"boolean",default:!1},assistantId:{type:"string",default:""},resolution:{type:"string",default:null}},edit:cv,save:lv}),sv("ai-engine/form-reset",{title:"AI Form Reset",description:"A reset button for your AI Form.",icon:op,category:"layout",keywords:[uv("ai"),uv("openai"),uv("form"),uv("reset")],supports:{dimensions:{minHeight:!1}},attributes:{id:{type:"string",default:""},label:{type:"string",default:"Reset"},localMemory:{type:"boolean",default:!1}},edit:wv,save:bv}),zp("ai-engine/form-container",{title:"AI Form Container",description:"Container to embed the blocks relative to a specific AI Form.",icon:op,category:"layout",keywords:[Yp("ai"),Yp("openai"),Yp("form")],attributes:{id:{type:"string",default:""},theme:{type:"string",default:"ChatGPT"}},edit:th,save:eh})),Sv&&(gm("ai-engine-document-settings",{render:Lm}),Nm("ai-wand/actions",{title:"AI Wand",tagName:"mwai",className:null,edit:Im}),Rv=function(e){var t=Vm(),n=Bm(Wm(!1),2),r=n[0],a=n[1],o=Bm(Wm(""),2),i=o[0],l=o[1],c=Bm(Wm(!1),2),u=c[0],s=c[1],f=Bm(Wm(!1),2),d=f[0],m=f[1],p=Bm(Wm(!1),2),h=p[0],v=p[1],y=wp.data.select("core/editor").getCurrentPostId(),g=function(){var t=Gm(Dm().mark((function t(n){var r,o,i,c,u,f,d,m,p,v;return Dm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Nt("[== CURRENT BLOCK ==]"),t.prev=1,s(!0),t.next=5,(0,O.IU)("".concat(T,"/ai/copilot"),{method:"POST",nonce:A,json:{action:h?"image":"text",message:n,context:r,postId:y}});case 5:o=t.sent,h?(i=o.data.media,c=wp.blocks.createBlock,u=wp.data.dispatch("core/block-editor"),f=u.replaceBlock,d=wp.data.select("core/block-editor"),m=d.getSelectedBlockClientId,p=c("core/image",{id:i.id,url:i.url,title:i.title,caption:i.caption,alt:i.alt}),v=m(),f(v,p)):e.setAttributes({content:o.data}),setTimeout((function(){var e=wp.data.select("core/block-editor").getSelectedBlockClientId,t=document.querySelector('[data-block="'.concat(e(),'"]'));if(t){var n=document.createRange(),r=window.getSelection();n.setStart(t,1),n.collapse(!0),r.removeAllRanges(),r.addRange(n)}}),50),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Error:",t.t0.message),ep("core/notices").createErrorNotice("AI Copilot error: ".concat(t.t0.message),{isDismissible:!0});case 14:return t.prev=14,s(!1),a(!1),l(""),t.finish(14);case 19:case"end":return t.stop()}}),t,null,[[1,10,14,19]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=Gm(Dm().mark((function e(t){return Dm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:if("Enter"!==t.key){e.next=9;break}return t.preventDefault(),t.stopPropagation(),e.next=7,g(i);case 7:e.next=10;break;case 9:("Escape"===t.key||"Backspace"===t.key&&!i)&&(t.preventDefault(),a(!1),l(""));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Km((function(){r&&t.current&&t.current.focus()}),[r]),Km((function(){var e=function(e){if(r&&"Enter"===e.key)return e.preventDefault(),!1};return ep("core/keyboard-shortcuts").registerShortcut({name:tp,category:"block",description:"Prevent new block creation when AI Copilot is active",keyCombination:{character:"enter"}}),window.addEventListener("keydown",e,!0),function(){window.removeEventListener("keydown",e,!0),ep("core/keyboard-shortcuts").unregisterShortcut(tp)}}),[r]),r?React.createElement(Jm,null,React.createElement(Zm,null,u?React.createElement("div",{style:{textAlign:"center",padding:20}},React.createElement($m,null)):React.createElement(React.Fragment,null,React.createElement(Xm,{ref:t,label:React.createElement(React.Fragment,null,React.createElement(jt,{icon:"wand",style:{marginBottom:-4}}),"AI Copilot"),value:i,placeholder:h?"Describe the image...":"Write about...",onChange:function(e){return l(e)},onKeyDown:E,onCompositionStart:function(){return m(!0)},onCompositionEnd:function(){return m(!1)}}),React.createElement("div",{style:{display:"flex",justifyContent:"end",marginBottom:-12}},React.createElement(Qm,{label:"Image Mode",checked:h,onChange:v}))))):React.createElement("div",{onCompositionStart:function(){return m(!0)},onCompositionEnd:function(){return m(!1)},onKeyDown:function(e){var t,n;if(!d){var r=((null==e||null===(t=e.target)||void 0===t?void 0:t.innerText)||"").trim(),o=null==e||null===(n=e.target)||void 0===n?void 0:n.localName;"Space"!==e.code||r||"p"!==o||(e.preventDefault(),a(!0))}}},React.createElement(e.BlockEdit,e))},Ym("editor.BlockEdit","mwai-copilot/module",(function(e){return function(t){return"core/paragraph"===t.name?React.createElement(Rv,Fm({BlockEdit:e},t)):React.createElement(e,t)}})),Ym("blocks.registerBlockType","mwai-copilot/placeholder",(function(e,t){if("core/paragraph"===t){var n=e.edit;e.edit=function(e){return e=jm(jm({},e),{},{attributes:jm(jm({},e.attributes),{},{placeholder:"Type / to choose a block, or press space to summon the AI Copilot"})}),n(e)}}return e}))),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("mwai-admin-settings");e&&Ov(React.createElement(u.Ht,{client:_v},React.createElement(s.A,null,React.createElement(qs,null))),e);var t=document.getElementById("mwai-content-generator");t&&Ov(React.createElement(u.Ht,{client:_v},React.createElement(s.A,null,React.createElement(Fd,null))),t);var n=document.getElementById("mwai-image-generator");n&&Ov(React.createElement(u.Ht,{client:_v},React.createElement(s.A,null,React.createElement(nm,null))),n);var r=document.getElementById("mwai-playground");if(r&&Ov(React.createElement(u.Ht,{client:_v},React.createElement(s.A,null,React.createElement(Gf,null))),r),Sv){var a=document.getElementById("mwai-admin-postsList");a&&Ov(React.createElement(s.A,null,React.createElement(Rd,null)),a)}var o=document.getElementById("meow-common-dashboard");o&&Ov(React.createElement(u.Ht,{client:_v},React.createElement(s.A,null,React.createElement(be,null))),o)}))},1594:e=>{e.exports=React},5206:e=>{e.exports=ReactDOM}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,r)=>{if(!t){var a=1/0;for(c=0;c<deferred.length;c++){for(var[t,n,r]=deferred[c],o=!0,i=0;i<t.length;i++)(!1&r||a>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[i])))?t.splice(i--,1):(o=!1,r<a&&(a=r));if(o){deferred.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>r;c--)deferred[c]=deferred[c-1];deferred[c]=[t,n,r]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,i,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in i)__webpack_require__.o(i,r)&&(__webpack_require__.m[r]=i[r]);if(l)var u=l(__webpack_require__)}for(t&&t(n);c<o.length;c++)a=o[c],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(u)},n=self.wpJsonMwai=self.wpJsonMwai||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__.O(void 0,[121],(()=>__webpack_require__(1923)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();